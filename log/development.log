

Started GET "/" for 127.0.0.1 at 2015-09-29 13:32:46 +0700
Processing by HomeController#index as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 36ms (ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:32:46 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 723ms (Views: 722.1ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 127.0.0.1 at 2015-09-29 13:33:07 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.0ms)
Completed 200 OK in 26ms (Views: 2.1ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 127.0.0.1 at 2015-09-29 13:33:07 +0700


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:35:54 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 648ms (Views: 647.9ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:35:57 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 26ms (Views: 25.6ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:06 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 26ms (Views: 25.3ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:07 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 61ms (Views: 60.9ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:21 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 39ms (Views: 38.6ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:26 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 45ms (Views: 44.5ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:27 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 41ms (Views: 40.3ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:36:28 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 38ms (Views: 38.2ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:41:36 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 490ms (Views: 489.5ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:41:40 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 24ms (Views: 24.0ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:43:10 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.0ms)
Completed 200 OK in 494ms (Views: 493.1ms | ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-29 13:43:25 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 58ms (Views: 58.1ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 127.0.0.1 at 2015-09-29 13:43:43 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.5ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 127.0.0.1 at 2015-09-29 13:43:44 +0700


Started GET "/" for 1.52.21.220 at 2015-09-29 15:01:41 +0700
Processing by HomeController#index as HTML
Redirected to http://kandy-shopify.ngrok.io/login
Completed 302 Found in 23ms (ActiveRecord: 0.0ms)


Started GET "/login" for 1.52.21.220 at 2015-09-29 15:01:42 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.1ms)
Completed 200 OK in 506ms (Views: 505.1ms | ActiveRecord: 0.0ms)


Started GET "/login" for 1.52.21.220 at 2015-09-29 15:02:26 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 85ms (Views: 84.7ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=https%3A%2F%2Fletranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:03:33 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"https://letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 17ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:03:34 +0700


Started GET "/login" for 1.52.21.220 at 2015-09-29 15:05:30 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (2.2ms)
Completed 200 OK in 489ms (Views: 488.3ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:05:55 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:05:55 +0700


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:06:25 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.5ms)
Completed 200 OK in 9ms (Views: 7.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:06:26 +0700


Started GET "/auth/shopify/callback?code=353de1f1f31bc0c1d0d0d59447690e09&hmac=cd722063a82f1f59450c812e38e227214861f24a5aea676045ef16acb642d9d0&shop=letranloc-2.myshopify.com&signature=2efb89efba97c7c507d4f4d376e71f99&state=bdca2af5bdc5c6f8bd29f622c95932e1aae3dc59101c6390&timestamp=1443514031" for 1.52.21.220 at 2015-09-29 15:07:12 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"353de1f1f31bc0c1d0d0d59447690e09", "hmac"=>"cd722063a82f1f59450c812e38e227214861f24a5aea676045ef16acb642d9d0", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2efb89efba97c7c507d4f4d376e71f99", "state"=>"bdca2af5bdc5c6f8bd29f622c95932e1aae3dc59101c6390", "timestamp"=>"1443514031"}
Completed 500 Internal Server Error in 108ms (ActiveRecord: 2.5ms)

ActiveRecord::StatementInvalid (Could not find table 'shops'):
  app/models/session_storage.rb:3:in `store'




Started GET "/auth/shopify/callback" for 1.52.21.220 at 2015-09-29 15:08:00 +0700

OmniAuth::Error (invalid_site):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:74:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/callback" for 1.52.21.220 at 2015-09-29 15:09:24 +0700

ActionController::RoutingError (No route matches [GET] "/callback"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/login" for 1.52.21.220 at 2015-09-29 15:10:01 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.9ms)
Completed 200 OK in 403ms (Views: 402.3ms | ActiveRecord: 0.0ms)


Started GET "/authenticate" for 1.52.21.220 at 2015-09-29 15:10:16 +0700

ActionController::RoutingError (No route matches [GET] "/authenticate"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/auth/shopify/callback" for 1.52.21.220 at 2015-09-29 15:10:25 +0700

OmniAuth::Error (invalid_site):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:74:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/logout" for 1.52.21.220 at 2015-09-29 15:10:37 +0700
Processing by SessionsController#destroy as HTML
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/login" for 1.52.21.220 at 2015-09-29 15:10:38 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.1ms)
Completed 200 OK in 93ms (Views: 92.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify/callback" for 1.52.21.220 at 2015-09-29 15:11:56 +0700

OmniAuth::Error (invalid_site):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:74:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:16:03 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:16:04 +0700


Started GET "/auth/shopify/callback?code=3821e7fccf1056f912aa2d0a7aba698c&hmac=7921c6984d0a2acf30e0e5af802872354d065eec04b4cf9747089f2c4343a3ea&shop=letranloc-2.myshopify.com&signature=5abfd6baa6bd83a077e33f7e08055b21&state=d48175c8a0f8d3220583c54fd70097de367098fe5ab054b4&timestamp=1443514568" for 1.52.21.220 at 2015-09-29 15:16:09 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"3821e7fccf1056f912aa2d0a7aba698c", "hmac"=>"7921c6984d0a2acf30e0e5af802872354d065eec04b4cf9747089f2c4343a3ea", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5abfd6baa6bd83a077e33f7e08055b21", "state"=>"d48175c8a0f8d3220583c54fd70097de367098fe5ab054b4", "timestamp"=>"1443514568"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms)

ActiveRecord::StatementInvalid (Could not find table 'shops'):
  app/models/session_storage.rb:3:in `store'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:17:35 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:17:37 +0700


Started GET "/auth/shopify/callback?code=794f4e32585a47f757a2314596a3762b&hmac=95bd8e6994b6e1f6502cf3fa9b103cf2d0d05fa68899137564ba30e70716c60d&shop=letranloc-2.myshopify.com&signature=08ed40146547849e7a6f357000ceda68&state=483f056f5c636a051a46cf1d52beab16108e311e5505aa81&timestamp=1443514662" for 1.52.21.220 at 2015-09-29 15:17:42 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"794f4e32585a47f757a2314596a3762b", "hmac"=>"95bd8e6994b6e1f6502cf3fa9b103cf2d0d05fa68899137564ba30e70716c60d", "shop"=>"letranloc-2.myshopify.com", "signature"=>"08ed40146547849e7a6f357000ceda68", "state"=>"483f056f5c636a051a46cf1d52beab16108e311e5505aa81", "timestamp"=>"1443514662"}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.1ms)

ActiveRecord::StatementInvalid (Could not find table 'shops'):
  app/models/session_storage.rb:3:in `store'


  [1m[36m (2.5ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (17.4ms)[0m  select sqlite_version(*)
  [1m[36m (1.8ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-embedded-app/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.8ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m


Started GET "/auth/shopify/callback?code=794f4e32585a47f757a2314596a3762b&hmac=95bd8e6994b6e1f6502cf3fa9b103cf2d0d05fa68899137564ba30e70716c60d&shop=letranloc-2.myshopify.com&signature=08ed40146547849e7a6f357000ceda68&state=483f056f5c636a051a46cf1d52beab16108e311e5505aa81&timestamp=1443514662" for 1.52.21.220 at 2015-09-29 15:18:34 +0700

OAuth2::Error (<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>400 - Oauth error invalid_request</title>
  <style type="text/css">

    * { border:0; margin:0; padding:0; -moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box; }
    html,body { height:100%; border:0; margin:0; padding:0; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; font-weight:300; background:#fff; }
    body { min-height:100%; font-size:16px; line-height:22px; color:#6c6c6c; }
    a { color:#479ccf; }

    h1,h2,h3,h4,h5,h6 { text-align:left; margin:0 0 20px 0; color:#31373D; font-weight:700; }
    h1 { font-size:28px; line-height:48px; margin-bottom:7px; }
    h2 { font-size:20px; font-weight:300; line-height:30px; color:#6c6c6c; }
    h3 { font-size:17px; line-height:30px; position:relative; padding-bottom:18px; margin-bottom:22px; font-weight:400; }
    h3:after { content:""; position:absolute; left:0; bottom:0; height:2px; width:76px; background:#EAEAEA; }
    h4 { font-size:14px; margin-bottom:3px; }

    img { max-width:100%; }

    li { margin-bottom:5px; }

    .ico { display:inline-block; }
    .ico svg { background-size:contain; background-position:center; width:24px; height:24px; margin-bottom:5px; }

    .wrapper { min-width:320px; max-width:650px; margin:0 auto; padding:20px; }

    .hero { margin-bottom:30px; }

    .content--block { position:relative; margin-bottom:50px; }
    .content--desc { margin-bottom:32px; position:relative; }
    .content--desc-large { font-size:20px; line-height:28px; }

    .request-id { padding-top:100px; font-size:13px; color:#ccc; }

    @media all and (min-width:500px) {
      body { padding:60px 0; }
      .wrapper { padding:20px 20px 20px 100px; }
      .ico svg { width:40px; height:40px; margin-bottom:0; }
      .hero { margin-bottom:70px; }
      .content--block { margin-bottom:80px; }
      .content--desc .ico { position:absolute; left:-70px; top:-7px; }
    }

    @media all and (min-width:900px) {
      .wrapper { padding:20px; }
    }

  </style>
</head>

<body class="status-error status-code-500">

  <div class="wrapper">
    <div class="hero">
      <svg width="160px" height="176px" viewBox="0 0 160 176" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
        <title>shopify-bag-outline</title>
        <desc>Created with Sketch.</desc>
        <defs></defs>
        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
          <g id="user-action-required-2" sketch:type="MSArtboardGroup" transform="translate(-297.000000, -81.000000)" stroke="#979797" stroke-dasharray="5">
            <g id="shopify-bag-outline" sketch:type="MSLayerGroup" transform="translate(298.000000, 82.000000)">
              <path d="M138.817711,32.9976853 C138.371951,32.7161619 137.887187,32.6604147 137.887187,32.6604147 L123.887534,31.6151547 L113.584904,21.3716063 C113.200436,21.0733588 112.749104,20.9005425 112.286628,20.8085596 L104.647414,174.188624 L158.389365,162.551396 L139.402771,34.070819 C139.402771,34.070819 139.257899,33.2847834 138.817711,32.9976853" id="Fill-1" sketch:type="MSShapeGroup"></path>
              <path d="M104.652986,20.8643068 L99.4292354,22.483763 C97.1196409,15.7244147 93.9714603,10.8994944 90.0264836,8.10655958 C87.070537,6.01325214 83.8137024,5.13244635 80.3144857,5.408395 C79.5984836,4.46347992 78.8323334,3.59939829 77.9742453,2.90534562 C74.1100625,-0.222072416 69.1286936,-0.707073074 63.1694384,1.45591837 C45.436545,7.89750757 37.8224056,30.7622225 35.033619,42.4328993 L19.170132,47.3470151 C19.170132,47.3470151 15.5009693,48.3894878 14.6400951,49.4235984 C13.6956409,50.558054 13.5117649,53.615788 13.5117649,53.615788 L0.300550361,155.58857 L99.4988854,174.183049 L107.138099,20.7778986 C106.043201,20.5632719 104.926014,20.8001975 104.652986,20.8643068 L104.652986,20.8643068 Z M87.081681,12.7586636 C90.1602116,14.9383792 92.375082,19.3061725 93.9491723,24.1812653 L85.6218167,26.7595734 C85.6134587,26.1630783 85.6106727,25.5693706 85.5855987,24.9533641 C85.3850067,19.5932706 84.6550745,15.0777472 83.4153043,11.4207307 C84.7470126,11.5628861 85.9756388,11.9754154 87.081681,12.7586636 L87.081681,12.7586636 Z M62.4868683,33.9286636 C64.7825327,25.0620711 69.1621256,16.0561106 77.4671932,12.5273127 C79.1972995,17.0205372 79.6987796,23.1471547 79.6653476,28.6048058 L62.4868683,33.9286636 L62.4868683,33.9286636 Z M65.2115768,7.08638578 C68.8083035,5.77911389 71.558086,5.87109677 73.6531584,7.23969059 C62.5453743,12.3544964 57.6503714,25.0955194 55.513509,36.0888677 L41.7952423,40.3395918 C44.9099909,29.1929388 51.7774822,11.964266 65.2115768,7.08638578 L65.2115768,7.08638578 Z M74.6366166,82.0524358 C73.8509645,81.6705675 72.9204403,81.2608255 71.8673321,80.8705951 C70.8225819,80.4831521 69.6608197,80.1124332 68.4015474,79.8058236 C67.1506332,79.499214 65.8077809,79.2511389 64.3897067,79.1034088 C62.9883484,78.9612535 61.5173401,78.9138683 59.9906118,79.0030639 C58.5892535,79.0866847 57.3188373,79.3347597 56.2016511,79.7333522 C55.0956089,80.1291573 54.1344387,80.6726926 53.3432145,81.3472337 C52.5547764,82.0217749 51.9307123,82.8245346 51.4905242,83.7499381 C51.0531221,84.669767 50.79681,85.7122396 50.746662,86.8634194 C50.710444,87.7163515 50.8413861,88.5358354 51.1422741,89.3330204 C51.4431622,90.1302054 51.9112103,90.9106662 52.5519904,91.6883397 C53.1927705,92.4688005 54.0062827,93.246474 54.9925269,94.0380843 C55.984343,94.8352693 57.1572493,95.6519658 58.5112455,96.4965359 C60.4057259,97.7090375 62.3419963,99.0804187 64.1863286,100.65249 C66.055735,102.24686 67.8248453,104.044707 69.3460016,106.093417 C70.8838739,108.167213 72.1626481,110.489084 73.0263083,113.095265 C73.8955405,115.718171 74.3357286,118.614238 74.1964285,121.805766 C73.9707625,127.023704 72.8285023,131.522503 70.9368079,135.254778 C69.0701876,138.936881 66.4931371,141.832948 63.3895325,143.929043 C60.3555779,145.98054 56.8396452,147.254363 53.0144665,147.76445 C49.3035138,148.263388 45.319533,148.040399 41.2157542,147.134507 C41.1823222,147.126145 41.1488902,147.117783 41.1182442,147.112208 C41.0848122,147.106633 41.0541662,147.098271 41.0207342,147.089909 C40.9873022,147.084334 40.9538702,147.075972 40.9232242,147.06761 C40.8897921,147.059248 40.8591461,147.053673 40.8257141,147.045311 C38.9005878,146.579822 37.0423254,145.972178 35.2955031,145.266976 C33.5765407,144.570136 31.9606604,143.778525 30.4924382,142.922806 C29.0409319,142.075448 27.7287256,141.169556 26.5920374,140.230216 C25.4664932,139.302025 24.510895,138.340386 23.7614609,137.378747 L28.2914977,122.340939 C29.0548619,122.987606 29.9909581,123.720682 31.0552103,124.467695 C32.1306065,125.225856 33.3397307,126.000743 34.6352209,126.725456 C35.9446412,127.455745 37.3432135,128.13586 38.7835757,128.687758 C40.240654,129.248017 41.7423083,129.677271 43.2300326,129.897472 C44.5422388,130.0898 45.7151451,130.050777 46.7431793,129.819426 C47.7767855,129.585288 48.6599476,129.156034 49.3843078,128.570689 C50.1086679,127.982556 50.674226,127.235543 51.0642661,126.379824 C51.4598782,125.521317 51.6827582,124.554103 51.7273342,123.519992 C51.7719102,122.483094 51.6771862,121.510305 51.4180882,120.562603 C51.1589901,119.614901 50.735518,118.700646 50.1225979,117.780818 C49.5124638,116.866564 48.7212396,115.949522 47.7210655,115.00182 C46.7320353,114.059692 45.542413,113.089691 44.1326968,112.061155 C42.4053764,110.770607 40.7783521,109.368565 39.3240598,107.846666 C37.8836976,106.341492 36.6104953,104.713673 35.5657451,102.9437 C34.5321389,101.193238 33.7186268,99.2978328 33.1920727,97.2435484 C32.6655186,95.1948387 32.4231365,92.9788874 32.5290045,90.5650336 C32.7045226,86.5289361 33.5124627,82.8078104 34.860887,79.4574036 C36.2232413,76.0735484 38.1567256,73.0353259 40.5805461,70.4207821 C43.0545146,67.7532785 46.0578231,65.5038789 49.5236078,63.7729282 C53.0869025,61.9918051 57.1656073,60.7430678 61.6789281,60.1493601 C63.7767865,59.8761988 65.7854929,59.7451929 67.6883313,59.7368308 C69.6162437,59.7284687 71.42993,59.8427505 73.1015303,60.0573772 C74.7926326,60.2720039 76.3332909,60.5869756 77.6984312,60.9716313 C79.0775015,61.3618618 80.2699097,61.8245635 81.2533679,62.3262883 L74.6366166,82.0524358 L74.6366166,82.0524358 Z" id="Fill-10" sketch:type="MSShapeGroup"></path>
          </g>
        </g>
      </g>
    </svg>
    </div>
    <div class="content">
      <div class="content--block">
        <div class="content--desc">
          <i class="ico ico-svg ico-40-svg">
            <svg viewBox="0 0 40 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                <g id="back-soon-3" sketch:type="MSArtboardGroup" transform="translate(-230.000000, -519.000000)">
                  <g id="what-went-wrong?" sketch:type="MSLayerGroup" transform="translate(231.000000, 444.000000)">
                    <g id="warning" transform="translate(0.000000, 77.000000)" sketch:type="MSShapeGroup">
                      <path d="M17.593,0.492 C18.217,-0.589 19.778,-0.589 20.402,0.492 L37.766,30.567 C38.39,31.648 37.61,33 36.361,33 L1.634,33 C0.386,33 -0.395,31.648 0.229,30.567 L17.593,0.492 L17.593,0.492 Z" id="Stroke-1" stroke="#E9BE33" stroke-width="2" stroke-linejoin="round"></path>
                      <path d="M20.75,28 C20.75,28.966 19.966,29.75 19,29.75 C18.033,29.75 17.25,28.966 17.25,28 C17.25,27.034 18.033,26.25 19,26.25 C19.966,26.25 20.75,27.034 20.75,28" id="Fill-2" fill="#E9BE33"></path>
                      <path d="M19,23 L19,8" id="Stroke-3" stroke="#E9BE33" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </i>
          <p class="content--desc-large">Oops, something went wrong.</p>
        </div>
      </div>
      <div class="content--block">
        <h3>What happened?</h3>
        <div class="content--desc">
          Oauth error invalid_request: 
        </div>
      </div>
      <div class="content--block">
        <h3>What can I do?</h3>
        <div class="content--desc">
          <ul>
            <li>Press the back button on your browser.</li>
            <li>Return to your <a href="/admin">admin dashboard</a>.</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="request-id">Request ID: 4b2bacb2-7f86-46f9-a783-2604ef0d9d8d</div>
  </div>
</body>
</html>
):
  oauth2 (1.0.0) lib/oauth2/client.rb:113:in `request'
  oauth2 (1.0.0) lib/oauth2/client.rb:138:in `get_token'
  oauth2 (1.0.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:76:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/?hmac=9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8b4f9dafd46a93520b2642dd5a0d3eb1&timestamp=1443514754" for 1.52.21.220 at 2015-09-29 15:19:15 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8b4f9dafd46a93520b2642dd5a0d3eb1", "timestamp"=>"1443514754"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 3ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:19:16 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.2ms)
Completed 200 OK in 49ms (Views: 48.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 15:19:17 +0700


Started GET "/auth/shopify/callback?code=9b93cf528b96e7697066baa0f6430f26&hmac=dff0bcec71dec4536eab0661b5fc186174e99f414f7bac1cead1eeb376a3dc41&shop=letranloc-2.myshopify.com&signature=31a4ed99a187838a8669e653c6ea64f8&state=9ce87c1b5556e6b54c34ec0a953d84c76ead039f56b04252&timestamp=1443514758" for 1.52.21.220 at 2015-09-29 15:19:18 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"9b93cf528b96e7697066baa0f6430f26", "hmac"=>"dff0bcec71dec4536eab0661b5fc186174e99f414f7bac1cead1eeb376a3dc41", "shop"=>"letranloc-2.myshopify.com", "signature"=>"31a4ed99a187838a8669e653c6ea64f8", "state"=>"9ce87c1b5556e6b54c34ec0a953d84c76ead039f56b04252", "timestamp"=>"1443514758"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "6159de5ad73225ae9aff3a1b3adcf37d"], ["created_at", "2015-09-29 08:19:20.343213"], ["updated_at", "2015-09-29 08:19:20.343213"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8b4f9dafd46a93520b2642dd5a0d3eb1&timestamp=1443514754
Completed 302 Found in 166ms (ActiveRecord: 6.0ms)


Started GET "/?hmac=9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8b4f9dafd46a93520b2642dd5a0d3eb1&timestamp=1443514754" for 1.52.21.220 at 2015-09-29 15:19:21 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8b4f9dafd46a93520b2642dd5a0d3eb1", "timestamp"=>"1443514754"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.5ms)
  Rendered home/index.html.erb within layouts/embedded_app (31.7ms)
Completed 200 OK in 452ms (Views: 447.1ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=10dcae474a0c2e9f7d287ca7c6eaa31b64de7e94cfe3ef0792cc03584dfd48c4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c05d7941a9a69f4cef4e73900811ca15&timestamp=1443514763" for 1.52.21.220 at 2015-09-29 15:19:24 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"10dcae474a0c2e9f7d287ca7c6eaa31b64de7e94cfe3ef0792cc03584dfd48c4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c05d7941a9a69f4cef4e73900811ca15", "timestamp"=>"1443514763"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.6ms)
Completed 200 OK in 40ms (Views: 37.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=bee82297d298f4a7a15e50dccb635a4a7abe0d8ec7ce769f2c9f5fe4d0100372&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1c8fdd9e2c72033dfa33b6cbed038d05&timestamp=1443514874" for 1.52.21.220 at 2015-09-29 15:21:14 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"bee82297d298f4a7a15e50dccb635a4a7abe0d8ec7ce769f2c9f5fe4d0100372", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1c8fdd9e2c72033dfa33b6cbed038d05", "timestamp"=>"1443514874"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.6ms)
Completed 200 OK in 81ms (Views: 79.2ms | ActiveRecord: 0.2ms)


Started GET "/modal" for 1.52.21.220 at 2015-09-29 15:23:18 +0700
Processing by HomeController#modal as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/modal.html.erb within layouts/embedded_app (0.9ms)
Completed 200 OK in 59ms (Views: 57.3ms | ActiveRecord: 0.1ms)


Started GET "/modal_buttons" for 1.52.21.220 at 2015-09-29 15:23:27 +0700
Processing by HomeController#modal_buttons as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/modal_buttons.html.erb within layouts/embedded_app (0.4ms)
Completed 200 OK in 45ms (Views: 43.5ms | ActiveRecord: 0.1ms)


Started GET "/does_not_exist" for 1.52.21.220 at 2015-09-29 15:23:42 +0700

ActionController::RoutingError (No route matches [GET] "/does_not_exist"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/regular_app_page" for 1.52.21.220 at 2015-09-29 15:23:55 +0700
Processing by HomeController#regular_app_page as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/regular_app_page.html.erb within layouts/embedded_app (0.7ms)
Completed 200 OK in 52ms (Views: 49.8ms | ActiveRecord: 0.2ms)


Started GET "/" for 1.52.21.220 at 2015-09-29 15:24:04 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (1.8ms)
Completed 200 OK in 25ms (Views: 23.3ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=3c4ea9add4aeb28d62f62772fee17b7fb21b4d5f94ac62a2de0bab49e688fb3c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f154d42bca87c00deeba890880284282&timestamp=1443515293" for 1.52.21.220 at 2015-09-29 15:28:14 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"3c4ea9add4aeb28d62f62772fee17b7fb21b4d5f94ac62a2de0bab49e688fb3c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f154d42bca87c00deeba890880284282", "timestamp"=>"1443515293"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.2ms)
Completed 200 OK in 59ms (Views: 57.1ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=4e7afd9c6081f08d7a64783d36a18f00485de57aae103e39165b255c9573a3c7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=989f54bf2b95f3ae9ba2bb803a106548&timestamp=1443517494" for 1.52.21.220 at 2015-09-29 16:04:56 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4e7afd9c6081f08d7a64783d36a18f00485de57aae103e39165b255c9573a3c7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"989f54bf2b95f3ae9ba2bb803a106548", "timestamp"=>"1443517494"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (1.7ms)
Completed 200 OK in 34ms (Views: 32.2ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=4e7afd9c6081f08d7a64783d36a18f00485de57aae103e39165b255c9573a3c7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=989f54bf2b95f3ae9ba2bb803a106548&timestamp=1443517494" for 1.52.21.220 at 2015-09-29 16:07:57 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4e7afd9c6081f08d7a64783d36a18f00485de57aae103e39165b255c9573a3c7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"989f54bf2b95f3ae9ba2bb803a106548", "timestamp"=>"1443517494"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (1.8ms)
Completed 200 OK in 35ms (Views: 32.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=6e054bd3ed231c2466e6ce5f04539d726de5cb985a8d17d0fe2086a9e4f1fde1&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c65075a12eb8b17e489e4706e4298f1d&timestamp=1443517678" for 1.52.21.220 at 2015-09-29 16:07:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"6e054bd3ed231c2466e6ce5f04539d726de5cb985a8d17d0fe2086a9e4f1fde1", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c65075a12eb8b17e489e4706e4298f1d", "timestamp"=>"1443517678"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.0ms)
Completed 200 OK in 43ms (Views: 40.5ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=022ad113fff5b98a8e824c15b0cb531ea92e6f4a7b2a8e03b564fea8243dc089&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=794e59d24166d1d6933987aa00e8452c&timestamp=1443517834" for 1.52.21.220 at 2015-09-29 16:10:36 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"022ad113fff5b98a8e824c15b0cb531ea92e6f4a7b2a8e03b564fea8243dc089", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"794e59d24166d1d6933987aa00e8452c", "timestamp"=>"1443517834"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (42.6ms)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb___2768344773163688113_70238822293160'




Started GET "/?hmac=c32418237fdc8aadcf1771881dcab5c1e641ae89063d16b96ad6c0f610c2bb85&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=630d0112e76c31e21247ae7f98e48d41&timestamp=1443517906" for 1.52.21.220 at 2015-09-29 16:11:48 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"c32418237fdc8aadcf1771881dcab5c1e641ae89063d16b96ad6c0f610c2bb85", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"630d0112e76c31e21247ae7f98e48d41", "timestamp"=>"1443517906"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (4.8ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `length' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.length %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb___2768344773163688113_70238822482420'




Started GET "/?hmac=65460b9900d19c32621038c118677155a37b9a28a5f68371c91bbc1af1dc34c4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0d8d0b88d0062a57b7f49602da2a81a8&timestamp=1443517967" for 1.52.21.220 at 2015-09-29 16:12:49 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"65460b9900d19c32621038c118677155a37b9a28a5f68371c91bbc1af1dc34c4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0d8d0b88d0062a57b7f49602da2a81a8", "timestamp"=>"1443517967"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (4.6ms)
Completed 500 Internal Server Error in 9ms (ActiveRecord: 0.1ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb___2768344773163688113_70238760426640'




Started GET "/?hmac=c6c571ca909fe48a5d6f2612baf86feffb23ba59a22ee18a7409300d6bdb2948&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e68d0798e6714ab879fafca858642e2f&timestamp=1443517997" for 1.52.21.220 at 2015-09-29 16:13:19 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"c6c571ca909fe48a5d6f2612baf86feffb23ba59a22ee18a7409300d6bdb2948", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e68d0798e6714ab879fafca858642e2f", "timestamp"=>"1443517997"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (1.9ms)
Completed 200 OK in 1136ms (Views: 21.5ms | ActiveRecord: 1.3ms)


Started GET "/?hmac=3eeb75d3228de6682ba136549b736aeedf6baf240b62056a7a3df8283fc37a7c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=72815e1b0c0a9d069781ea1359de5b6f&timestamp=1443518013" for 1.52.21.220 at 2015-09-29 16:13:35 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"3eeb75d3228de6682ba136549b736aeedf6baf240b62056a7a3df8283fc37a7c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"72815e1b0c0a9d069781ea1359de5b6f", "timestamp"=>"1443518013"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.2ms)
Completed 200 OK in 1174ms (Views: 23.7ms | ActiveRecord: 1.2ms)


Started GET "/" for 1.52.21.220 at 2015-09-29 16:23:43 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.9ms)
Completed 200 OK in 1605ms (Views: 115.3ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=6bc351ebcb27cbc0bb3d60e4ce01362c21a5dfd5bb913879fc7de7ff34cadd0d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=07851232784865c467a13db68754caab&timestamp=1443518626" for 1.52.21.220 at 2015-09-29 16:23:48 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"6bc351ebcb27cbc0bb3d60e4ce01362c21a5dfd5bb913879fc7de7ff34cadd0d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"07851232784865c467a13db68754caab", "timestamp"=>"1443518626"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.1ms)
Completed 200 OK in 1071ms (Views: 24.8ms | ActiveRecord: 0.1ms)


Started GET "/login" for 1.52.21.220 at 2015-09-29 16:24:07 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.6ms)
Completed 200 OK in 38ms (Views: 38.1ms | ActiveRecord: 0.0ms)


Started GET "/" for 1.52.21.220 at 2015-09-29 16:24:10 +0700
Processing by HomeController#index as HTML
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/login" for 1.52.21.220 at 2015-09-29 16:24:11 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (0.0ms)
Completed 200 OK in 22ms (Views: 22.2ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 16:24:26 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.5ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 16:24:27 +0700


Started GET "/auth/shopify/callback?code=037fd1716f323addcf26c95a2fd09c8a&hmac=a1d2bba28fa07ce20a3abb7ecd21044c794d268700c2bcb589b18cd21082205b&shop=letranloc-2.myshopify.com&signature=cb34d3b2d673679b0b4a64949225ba26&state=1a75e9e5a594fbe74b9a25b9e39b2cb7e7c2a67388ed51de&timestamp=1443518675" for 1.52.21.220 at 2015-09-29 16:24:36 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"037fd1716f323addcf26c95a2fd09c8a", "hmac"=>"a1d2bba28fa07ce20a3abb7ecd21044c794d268700c2bcb589b18cd21082205b", "shop"=>"letranloc-2.myshopify.com", "signature"=>"cb34d3b2d673679b0b4a64949225ba26", "state"=>"1a75e9e5a594fbe74b9a25b9e39b2cb7e7c2a67388ed51de", "timestamp"=>"1443518675"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 9ms (ActiveRecord: 0.8ms)


Started GET "/" for 1.52.21.220 at 2015-09-29 16:24:39 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.9ms)
Completed 200 OK in 1101ms (Views: 24.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=055c3591e24516b48fe595ba8b8809e59a6d9aa4dcc56383d6a89fcaf2c52ee6&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7a098ac8415e7de06b3b225fe73bece5&timestamp=1443518682" for 1.52.21.220 at 2015-09-29 16:24:46 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"055c3591e24516b48fe595ba8b8809e59a6d9aa4dcc56383d6a89fcaf2c52ee6", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7a098ac8415e7de06b3b225fe73bece5", "timestamp"=>"1443518682"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (1.9ms)
Completed 200 OK in 1260ms (Views: 22.8ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=d3313108bad54fa77cff9cb6588fcb33a417ea1dcab6b37ca80deae8a8ef6fc2&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=818f3b9637abf7e6c526bbdcc2a08e07&timestamp=1443518703" for 1.52.21.220 at 2015-09-29 16:25:03 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"d3313108bad54fa77cff9cb6588fcb33a417ea1dcab6b37ca80deae8a8ef6fc2", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"818f3b9637abf7e6c526bbdcc2a08e07", "timestamp"=>"1443518703"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.1ms)
Completed 200 OK in 1115ms (Views: 22.7ms | ActiveRecord: 0.4ms)


Started GET "/modal" for 1.52.21.220 at 2015-09-29 16:25:13 +0700
Processing by HomeController#modal as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/modal.html.erb within layouts/embedded_app (0.1ms)
Completed 200 OK in 42ms (Views: 41.0ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=39e4a031c486108e37504649faf13f283a1b2a39751cdd7ded843f35bf2149ae&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=20f35d6fcefb16429a5dd16f00994dca&timestamp=1443519308" for 1.52.21.220 at 2015-09-29 16:35:10 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"39e4a031c486108e37504649faf13f283a1b2a39751cdd7ded843f35bf2149ae", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"20f35d6fcefb16429a5dd16f00994dca", "timestamp"=>"1443519308"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.1ms)
Completed 200 OK in 1777ms (Views: 24.5ms | ActiveRecord: 0.1ms)


Started GET "/buttons" for 1.52.21.220 at 2015-09-29 16:35:44 +0700
Processing by HomeController#buttons as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/buttons.html.erb within layouts/embedded_app (0.8ms)
Completed 200 OK in 45ms (Views: 43.3ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=8de1c409e381965a65639bb00e6e7bf06eb2a65af191061935c00e17a0bd55de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=56f54a09f6ba97a36de48de4176c4c01&timestamp=1443519483" for 1.52.21.220 at 2015-09-29 16:38:04 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"8de1c409e381965a65639bb00e6e7bf06eb2a65af191061935c00e17a0bd55de", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"56f54a09f6ba97a36de48de4176c4c01", "timestamp"=>"1443519483"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.3ms)
Completed 200 OK in 1551ms (Views: 89.6ms | ActiveRecord: 0.1ms)


Started GET "/buttons?hmac=6c9e3e08c14a861144ec5bd7e5134243050334c91b27807b616ca624803bf47c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1a775eb9f58834ddbf928b30c56b8128&timestamp=1443519501" for 1.52.21.220 at 2015-09-29 16:38:22 +0700
Processing by HomeController#buttons as HTML
  Parameters: {"hmac"=>"6c9e3e08c14a861144ec5bd7e5134243050334c91b27807b616ca624803bf47c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1a775eb9f58834ddbf928b30c56b8128", "timestamp"=>"1443519501"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/buttons.html.erb within layouts/embedded_app (0.1ms)
Completed 200 OK in 49ms (Views: 46.7ms | ActiveRecord: 0.2ms)


Started GET "/form_page" for 1.52.21.220 at 2015-09-29 16:39:48 +0700
Processing by HomeController#form_page as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/form_page.html.erb within layouts/embedded_app (1.3ms)
Completed 200 OK in 114ms (Views: 112.9ms | ActiveRecord: 0.2ms)


Started POST "/form_page" for 1.52.21.220 at 2015-09-29 16:40:22 +0700
Processing by HomeController#form_page as HTML
  Parameters: {"authenticity_token"=>"pe+9niN+/OemRMZLrasu//dsyW+x+2YIYJ0wxmMwZTKkyxUMv6IxDT47Zpfeo++BPzWOqwgJhPGfnjsSRwfJPg==", "name"=>"demo", "colour"=>"Pink"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/form_page.html.erb within layouts/embedded_app (0.1ms)
Completed 200 OK in 21ms (Views: 19.2ms | ActiveRecord: 0.2ms)


Started GET "/regular_app_page" for 1.52.21.220 at 2015-09-29 16:42:27 +0700
Processing by HomeController#regular_app_page as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/regular_app_page.html.erb within layouts/embedded_app (0.1ms)
Completed 200 OK in 48ms (Views: 47.0ms | ActiveRecord: 0.2ms)


Started GET "/pagination" for 1.52.21.220 at 2015-09-29 16:42:58 +0700
Processing by HomeController#pagination as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/pagination.html.erb within layouts/embedded_app (1.0ms)
Completed 200 OK in 47ms (Views: 46.1ms | ActiveRecord: 0.1ms)


Started GET "/pagination?page=2" for 1.52.21.220 at 2015-09-29 16:43:02 +0700
Processing by HomeController#pagination as HTML
  Parameters: {"page"=>"2"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/pagination.html.erb within layouts/embedded_app (0.2ms)
Completed 200 OK in 23ms (Views: 21.8ms | ActiveRecord: 0.2ms)


Started GET "/pagination?page=3" for 1.52.21.220 at 2015-09-29 16:43:04 +0700
Processing by HomeController#pagination as HTML
  Parameters: {"page"=>"3"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/pagination.html.erb within layouts/embedded_app (0.2ms)
Completed 200 OK in 20ms (Views: 18.9ms | ActiveRecord: 0.2ms)


Started GET "/breadcrumbs" for 1.52.21.220 at 2015-09-29 16:43:09 +0700
Processing by HomeController#breadcrumbs as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/breadcrumbs.html.erb within layouts/embedded_app (0.4ms)
Completed 200 OK in 21ms (Views: 19.4ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=27b15b2dd7fd4ad8b31a2920c0ac861d8af08eb7afb9fd601b9ae0864b696ffe&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5acbac801d7849f49b8f0aaf830dd84b&timestamp=1443519833" for 1.52.21.220 at 2015-09-29 16:43:55 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"27b15b2dd7fd4ad8b31a2920c0ac861d8af08eb7afb9fd601b9ae0864b696ffe", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5acbac801d7849f49b8f0aaf830dd84b", "timestamp"=>"1443519833"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.0ms)
Completed 200 OK in 1425ms (Views: 23.4ms | ActiveRecord: 0.2ms)


Started GET "/help?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 17:51:26 +0700
Processing by HomeController#help as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/help.html.erb within layouts/embedded_app (0.7ms)
Completed 200 OK in 118ms (Views: 116.5ms | ActiveRecord: 0.1ms)


Started GET "/help?hmac=95eda4e61226044c338012e3a681b331e7099dab86094016342dc068ef6c11e9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ad8b7867c3168666f1e846da243bd6be&timestamp=1443523888" for 1.52.21.220 at 2015-09-29 17:51:29 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"95eda4e61226044c338012e3a681b331e7099dab86094016342dc068ef6c11e9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ad8b7867c3168666f1e846da243bd6be", "timestamp"=>"1443523888"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/help.html.erb within layouts/embedded_app (0.1ms)
Completed 200 OK in 33ms (Views: 31.6ms | ActiveRecord: 0.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 18:28:36 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 1ms (Views: 0.7ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-29 18:28:37 +0700


Started GET "/auth/shopify/callback?code=f79622733a2daa2dbb4725a723530a4a&hmac=c65186a2c2e24acefe46af3e52c280e7e2c76a010f0672b9f9863b9eb8e2e153&shop=letranloc-2.myshopify.com&signature=50ada4c9c4aae5d5757e84e6a15640e1&state=bfb6723b2c535d736152a1a322c0196577120ecdc8214dab&timestamp=1443526126" for 1.52.21.220 at 2015-09-29 18:28:47 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"f79622733a2daa2dbb4725a723530a4a", "hmac"=>"c65186a2c2e24acefe46af3e52c280e7e2c76a010f0672b9f9863b9eb8e2e153", "shop"=>"letranloc-2.myshopify.com", "signature"=>"50ada4c9c4aae5d5757e84e6a15640e1", "state"=>"bfb6723b2c535d736152a1a322c0196577120ecdc8214dab", "timestamp"=>"1443526126"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["shopify_token", "8083ac6e82f61c8756547ac242cab422"], ["updated_at", "2015-09-29 11:28:48.894851"], ["id", 1]]
  [1m[35m (1.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8b4f9dafd46a93520b2642dd5a0d3eb1&timestamp=1443514754
Completed 302 Found in 10ms (ActiveRecord: 2.3ms)


Started GET "/?hmac=9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8b4f9dafd46a93520b2642dd5a0d3eb1&timestamp=1443514754" for 1.52.21.220 at 2015-09-29 18:28:49 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9a757fa5b690e3c1fd43e96e5f08714b14a9c7a8bd3da6a92ffe200a860160de", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8b4f9dafd46a93520b2642dd5a0d3eb1", "timestamp"=>"1443514754"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (4.4ms)
Completed 200 OK in 1289ms (Views: 163.3ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=f361dd380a2bfb6d1c6549ad42a292df852264a0944f8cba3b56b7f792926768&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a23c7c849a5145c4745e93dea7773bad&timestamp=1443526132" for 1.52.21.220 at 2015-09-29 18:28:55 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f361dd380a2bfb6d1c6549ad42a292df852264a0944f8cba3b56b7f792926768", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a23c7c849a5145c4745e93dea7773bad", "timestamp"=>"1443526132"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.0ms)
Completed 200 OK in 1116ms (Views: 30.7ms | ActiveRecord: 0.2ms)


Started GET "/buttons" for 1.52.21.220 at 2015-09-29 19:17:58 +0700
Processing by HomeController#buttons as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/buttons.html.erb within layouts/embedded_app (0.2ms)
Completed 200 OK in 122ms (Views: 119.7ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473" for 1.52.21.220 at 2015-09-30 17:21:16 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"da137b5e3f81a8876cf647ee4d95586a", "timestamp"=>"1443608473"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 23ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 17:21:17 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.3ms)
Completed 200 OK in 42ms (Views: 40.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 17:21:18 +0700


Started GET "/auth/shopify/callback?code=395352dffcf6d4cbfe0793c9f0c188a9&hmac=c3370349dc32b7aee8a4036b02862fb5c213215a88db2ebc886abb276d1db322&shop=letranloc-2.myshopify.com&signature=d35676f7353fa4b024b21d6d2deb75a1&state=40cb346db1f5f3ff3d75c26e1004fd56327331875673de29&timestamp=1443608479" for 1.52.21.220 at 2015-09-30 17:21:20 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"395352dffcf6d4cbfe0793c9f0c188a9", "hmac"=>"c3370349dc32b7aee8a4036b02862fb5c213215a88db2ebc886abb276d1db322", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d35676f7353fa4b024b21d6d2deb75a1", "state"=>"40cb346db1f5f3ff3d75c26e1004fd56327331875673de29", "timestamp"=>"1443608479"}
  [1m[36mShop Load (16.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473
Completed 302 Found in 206ms (ActiveRecord: 20.4ms)


Started GET "/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473" for 1.52.21.220 at 2015-09-30 17:21:22 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"da137b5e3f81a8876cf647ee4d95586a", "timestamp"=>"1443608473"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.4ms)
  Rendered home/index.html.erb within layouts/embedded_app (18.2ms)
Completed 200 OK in 1561ms (Views: 411.4ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=dda0a0c5c1bdc4290902382f3997a4d342f28e0c87d9bd5e5daeae85ba123742&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d0175aa8d43c126507210d25aec95adc&timestamp=1443608485" for 1.52.21.220 at 2015-09-30 17:21:26 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"dda0a0c5c1bdc4290902382f3997a4d342f28e0c87d9bd5e5daeae85ba123742", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d0175aa8d43c126507210d25aec95adc", "timestamp"=>"1443608485"}
  [1m[35mShop Load (0.9ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.0ms)
  Rendered home/index.html.erb within layouts/embedded_app (2.1ms)
Completed 200 OK in 1153ms (Views: 25.8ms | ActiveRecord: 0.9ms)


Started GET "/form_page" for 1.52.21.220 at 2015-09-30 17:23:08 +0700
Processing by HomeController#form_page as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/form_page.html.erb within layouts/embedded_app (1.0ms)
Completed 200 OK in 39ms (Views: 37.6ms | ActiveRecord: 0.1ms)


Started GET "/" for 1.52.21.220 at 2015-09-30 17:23:25 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (3.2ms)
Completed 200 OK in 1571ms (Views: 36.7ms | ActiveRecord: 0.2ms)


Started GET "/modal_buttons" for 1.52.21.220 at 2015-09-30 17:40:57 +0700
Processing by HomeController#modal_buttons as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/modal_buttons.html.erb within layouts/embedded_app (0.5ms)
Completed 200 OK in 76ms (Views: 74.6ms | ActiveRecord: 0.1ms)


Started GET "/buttons" for 1.52.21.220 at 2015-09-30 17:41:28 +0700
Processing by HomeController#buttons as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/buttons.html.erb within layouts/embedded_app (0.5ms)
Completed 200 OK in 40ms (Views: 38.7ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=72a8c8555a8ff196226f17b481cb78bc55b471c026b59cb197167d533ae89423&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9d86f502e1c4fb4a1153e609242ac949&timestamp=1443609701" for 1.52.21.220 at 2015-09-30 17:41:42 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"72a8c8555a8ff196226f17b481cb78bc55b471c026b59cb197167d533ae89423", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9d86f502e1c4fb4a1153e609242ac949", "timestamp"=>"1443609701"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (16.8ms)
Completed 200 OK in 1595ms (Views: 64.3ms | ActiveRecord: 0.2ms)


Started GET "/" for 127.0.0.1 at 2015-09-30 18:03:08 +0700
Processing by HomeController#index as HTML
Redirected to http://localhost:3000/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/login" for 127.0.0.1 at 2015-09-30 18:03:08 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.html.erb within layouts/application (1.5ms)
Completed 200 OK in 190ms (Views: 189.0ms | ActiveRecord: 0.0ms)


Started GET "/regular_app_page" for 1.52.21.220 at 2015-09-30 18:22:15 +0700
Processing by HomeController#regular_app_page as HTML
  [1m[35mShop Load (19.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/regular_app_page.html.erb within layouts/embedded_app (1.5ms)
Completed 200 OK in 176ms (Views: 138.4ms | ActiveRecord: 19.8ms)


Started GET "/?hmac=69f120cedfc0c398453247db8b9b8c9d224d51312382f5d2967b2d8cb729d625&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3b0c8a740121656b4f1232f18c5587cf&timestamp=1443612159" for 1.52.21.220 at 2015-09-30 18:22:40 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"69f120cedfc0c398453247db8b9b8c9d224d51312382f5d2967b2d8cb729d625", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3b0c8a740121656b4f1232f18c5587cf", "timestamp"=>"1443612159"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (499.0ms)
Completed 500 Internal Server Error in 524ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb__4220689479964452726_70200151497680'




Started GET "/help?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 18:23:19 +0700
Processing by HomeController#help as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/help.html.erb within layouts/embedded_app (0.5ms)
Completed 200 OK in 51ms (Views: 49.2ms | ActiveRecord: 0.4ms)


Started GET "/help?hmac=f6d5371888fc8ed3c49daca45601ff5526a025df07e65f044d8583669b2d21b0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6f0b1f199d7b575b5e6f832514b4539d&timestamp=1443612200" for 1.52.21.220 at 2015-09-30 18:23:24 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"f6d5371888fc8ed3c49daca45601ff5526a025df07e65f044d8583669b2d21b0", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6f0b1f199d7b575b5e6f832514b4539d", "timestamp"=>"1443612200"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/help.html.erb within layouts/embedded_app (0.0ms)
Completed 200 OK in 22ms (Views: 20.9ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=186336ce5da3731cad02f36fe4c236700a2b1897e761ba80bdbb857640a09329&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=55168357acfa2f8622eddf2d667beb01&timestamp=1443612308" for 1.52.21.220 at 2015-09-30 18:25:10 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"186336ce5da3731cad02f36fe4c236700a2b1897e761ba80bdbb857640a09329", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"55168357acfa2f8622eddf2d667beb01", "timestamp"=>"1443612308"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (6.4ms)
Completed 500 Internal Server Error in 14ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb__4220689479964452726_70200151497680'




Started GET "/preferences?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 18:27:25 +0700

ActionController::RoutingError (No route matches [GET] "/preferences"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/?hmac=393deb66d3a7876220eeac125c6a17d5dc6d511978b192268bb4283127d78145&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=63efb7e3ce8ab7b4acdcfc3872b965dc&timestamp=1443614063" for 1.52.21.220 at 2015-09-30 18:54:27 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"393deb66d3a7876220eeac125c6a17d5dc6d511978b192268bb4283127d78145", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"63efb7e3ce8ab7b4acdcfc3872b965dc", "timestamp"=>"1443614063"}
  [1m[36mShop Load (25.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.7ms)
  Rendered home/index.html.erb within layouts/embedded_app (65.5ms)
Completed 500 Internal Server Error in 662ms (ActiveRecord: 39.9ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb__2192053758027178799_70361930463500'




Started GET "/?hmac=df27f41556460d2956832986f82db642145e00150eccf54b031c8101ea9a76d9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3a94842d67c6dbe1b3d8201f626d5a46&timestamp=1443614077" for 1.52.21.220 at 2015-09-30 18:54:39 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"df27f41556460d2956832986f82db642145e00150eccf54b031c8101ea9a76d9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3a94842d67c6dbe1b3d8201f626d5a46", "timestamp"=>"1443614077"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (7.2ms)
Completed 500 Internal Server Error in 29ms (ActiveRecord: 0.1ms)

ActionView::Template::Error (undefined method `count' for nil:NilClass):
    1: <%= render "/common/top_bar" %>
    2: 
    3: <h2>Shopify Embedded Example. (<%= @products.count %>)</h2>
    4: 
    5: <p>This application demos the various ways an app can now interact with the Shopify Admin. See the project README for details.</p>
    6: 
  app/views/home/index.html.erb:3:in `_app_views_home_index_html_erb__2192053758027178799_70361930463500'




Started GET "/?hmac=89c9c9999d777e5518712c29fbf4f0708b12eb4da034782750d2e5fccd9b23c9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e0ccdcb61e430e5b89a4f17a2a7ce049&timestamp=1443614125" for 1.52.21.220 at 2015-09-30 18:55:27 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"89c9c9999d777e5518712c29fbf4f0708b12eb4da034782750d2e5fccd9b23c9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e0ccdcb61e430e5b89a4f17a2a7ce049", "timestamp"=>"1443614125"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered common/_top_bar.html.erb (0.1ms)
  Rendered home/index.html.erb within layouts/embedded_app (15.5ms)
Completed 200 OK in 833ms (Views: 831.1ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=911f20d27f68639804bffbabe32fd8b652ee0a4f271c08343ad5417b7e536518&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=cae3e17e5d53448ec05b9da6c3f8cdd6&timestamp=1443615796" for 1.52.21.220 at 2015-09-30 19:23:19 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"911f20d27f68639804bffbabe32fd8b652ee0a4f271c08343ad5417b7e536518", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"cae3e17e5d53448ec05b9da6c3f8cdd6", "timestamp"=>"1443615796"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (2.8ms)
Completed 200 OK in 208ms (Views: 194.8ms | ActiveRecord: 1.1ms)


Started GET "/?hmac=26d865c6fe694fcf6fcc6454c542f40b4a839adf8c177d8a9e52dfcac03154e6&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c417f48fb72694ad530386ba63974fe9&timestamp=1443615859" for 1.52.21.220 at 2015-09-30 19:24:21 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"26d865c6fe694fcf6fcc6454c542f40b4a839adf8c177d8a9e52dfcac03154e6", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c417f48fb72694ad530386ba63974fe9", "timestamp"=>"1443615859"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 64ms (Views: 62.1ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=cb6990e069a42e00e1168b392900caad7b7f15402402efd8e85a364a537e435a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a52cea16cab476a42e6eaffec76e7fab&timestamp=1443615902" for 1.52.21.220 at 2015-09-30 19:25:04 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"cb6990e069a42e00e1168b392900caad7b7f15402402efd8e85a364a537e435a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a52cea16cab476a42e6eaffec76e7fab", "timestamp"=>"1443615902"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 116ms (Views: 113.4ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=ec56514d69d750d572b4003c1c666151d9fa4efce2f4dd170749284eb347b8cf&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d41eb0835fe6efac339c5424f32c5477&timestamp=1443615978" for 1.52.21.220 at 2015-09-30 19:26:21 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"ec56514d69d750d572b4003c1c666151d9fa4efce2f4dd170749284eb347b8cf", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d41eb0835fe6efac339c5424f32c5477", "timestamp"=>"1443615978"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (3.0ms)
Completed 200 OK in 87ms (Views: 85.4ms | ActiveRecord: 0.2ms)


Started GET "/preferences?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 19:27:44 +0700

ActionController::RoutingError (No route matches [GET] "/preferences"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/preferences?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 19:28:39 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[36mShop Load (6.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.9ms)
Completed 200 OK in 561ms (Views: 412.9ms | ActiveRecord: 10.8ms)


Started GET "/preferences?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 19:29:17 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (1.7ms)
Completed 200 OK in 23ms (Views: 21.9ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=4cca9e09c0e49aec043937fe0364283faf0c44fd92bf2ada05fb5fd1ae596617&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=eb3e5a0bcde5edaf875dea1ebbe7ae83&timestamp=1443616217" for 1.52.21.220 at 2015-09-30 19:30:19 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4cca9e09c0e49aec043937fe0364283faf0c44fd92bf2ada05fb5fd1ae596617", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"eb3e5a0bcde5edaf875dea1ebbe7ae83", "timestamp"=>"1443616217"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (2.2ms)
Completed 200 OK in 26ms (Views: 24.6ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=fb8169bb60b348982cfb5118d4a955e03795ebac046010bf5d31f5553baa5d55&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4b948e18d311eb372ef37867ef98390e&timestamp=1443616455" for 1.52.21.220 at 2015-09-30 19:34:17 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"fb8169bb60b348982cfb5118d4a955e03795ebac046010bf5d31f5553baa5d55", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4b948e18d311eb372ef37867ef98390e", "timestamp"=>"1443616455"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 44ms (Views: 41.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=025d4d59ae56a16fc7032a82e872254e16e604d82dd400cd90fff7466c8ad96e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=48af507ccad73e458578d515e1641031&timestamp=1443616520" for 1.52.21.220 at 2015-09-30 19:35:22 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"025d4d59ae56a16fc7032a82e872254e16e604d82dd400cd90fff7466c8ad96e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"48af507ccad73e458578d515e1641031", "timestamp"=>"1443616520"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 58ms (Views: 56.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 19:36:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.0ms)
Completed 200 OK in 29ms (Views: 27.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=6c67114304f3750758c63822dc778a5c4c8d72f054afacc535fd335e6dcf024d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1305fdcdca74f816516eed9129ab5045&timestamp=1443616586" for 1.52.21.220 at 2015-09-30 19:36:28 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6c67114304f3750758c63822dc778a5c4c8d72f054afacc535fd335e6dcf024d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1305fdcdca74f816516eed9129ab5045", "timestamp"=>"1443616586"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 28ms (Views: 26.8ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=e7fa61c7236d83719bd42a8fbff5e3e2ae7fd54360b762fc23131af53fb1d4c7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2e62cb658aa6fd46a8c1fdf4f180c250&timestamp=1443616604" for 1.52.21.220 at 2015-09-30 19:36:46 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e7fa61c7236d83719bd42a8fbff5e3e2ae7fd54360b762fc23131af53fb1d4c7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2e62cb658aa6fd46a8c1fdf4f180c250", "timestamp"=>"1443616604"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 70ms (Views: 67.2ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=f58cf81f9a66d8a8540ffed7650ba951efae3ac3189028d446f0c16c0dd1a402&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7bd8a6d101658d18ae772fde4bb09e35&timestamp=1443616644" for 1.52.21.220 at 2015-09-30 19:37:25 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f58cf81f9a66d8a8540ffed7650ba951efae3ac3189028d446f0c16c0dd1a402", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7bd8a6d101658d18ae772fde4bb09e35", "timestamp"=>"1443616644"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 47ms (Views: 44.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=c0ec825cde0aaddb686e67cbed2da6a15b404fcd65076f1e7f23ea5615e05a30&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b22b50d4b5206f2923ab0190d25fbdb2&timestamp=1443616671" for 1.52.21.220 at 2015-09-30 19:37:53 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"c0ec825cde0aaddb686e67cbed2da6a15b404fcd65076f1e7f23ea5615e05a30", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b22b50d4b5206f2923ab0190d25fbdb2", "timestamp"=>"1443616671"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (6.0ms)
Completed 200 OK in 54ms (Views: 51.3ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=7cbec35679bed80deda2d71b9b194504567fc867725b69b19e5dd447f9c72005&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e1bcd4205dadb745298b2bb83462bbed&timestamp=1443616773" for 1.52.21.220 at 2015-09-30 19:39:35 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7cbec35679bed80deda2d71b9b194504567fc867725b69b19e5dd447f9c72005", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e1bcd4205dadb745298b2bb83462bbed", "timestamp"=>"1443616773"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (251.4ms)
Completed 500 Internal Server Error in 257ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (SyntaxError: [stdin]:1:1: reserved word 'var'):
  compile ((execjs):6633:19)
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:47:in `rescue in block in call'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:44:in `block in call'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:75:in `block in lock'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:73:in `call'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:73:in `Locker'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:73:in `lock'
  execjs (2.5.2) lib/execjs/ruby_racer_runtime.rb:43:in `call'
  coffee-script (2.4.1) lib/coffee_script.rb:78:in `compile'
  tilt (1.4.1) lib/tilt/coffee.rb:46:in `evaluate'
  tilt (1.4.1) lib/tilt/template.rb:103:in `render'
  (eval):5:in `render_with_options'
  haml (4.0.7) lib/haml/filters.rb:184:in `block in compile'
  haml (4.0.7) lib/haml/filters.rb:162:in `instance_eval'
  haml (4.0.7) lib/haml/filters.rb:162:in `compile'
  haml (4.0.7) lib/haml/filters.rb:141:in `internal_compile'
  haml (4.0.7) lib/haml/compiler.rb:273:in `compile_filter'
  haml (4.0.7) lib/haml/compiler.rb:20:in `compile'
  haml (4.0.7) lib/haml/compiler.rb:22:in `block (2 levels) in compile'
  haml (4.0.7) lib/haml/compiler.rb:22:in `each'
  haml (4.0.7) lib/haml/compiler.rb:22:in `block in compile'
  haml (4.0.7) lib/haml/compiler.rb:95:in `compile_root'
  haml (4.0.7) lib/haml/compiler.rb:22:in `compile'
  haml (4.0.7) lib/haml/engine.rb:66:in `initialize'
  haml (4.0.7) lib/haml/template/plugin.rb:25:in `new'
  haml (4.0.7) lib/haml/template/plugin.rb:25:in `compile'
  haml (4.0.7) lib/haml/template/plugin.rb:30:in `call'
  actionview (4.2.2) lib/action_view/template.rb:270:in `compile'
  actionview (4.2.2) lib/action_view/template.rb:245:in `block (2 levels) in compile!'
  activesupport (4.2.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.2) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.2) lib/action_view/template.rb:244:in `block in compile!'
  actionview (4.2.2) lib/action_view/template.rb:232:in `synchronize'
  actionview (4.2.2) lib/action_view/template.rb:232:in `compile!'
  actionview (4.2.2) lib/action_view/template.rb:144:in `block in render'
  activesupport (4.2.2) lib/active_support/notifications.rb:166:in `instrument'
  actionview (4.2.2) lib/action_view/template.rb:333:in `instrument'
  actionview (4.2.2) lib/action_view/template.rb:143:in `render'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:54:in `block (2 levels) in render_template'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:39:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:39:in `instrument'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:53:in `block in render_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:61:in `render_with_layout'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:52:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:14:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:498:in `block (2 levels) in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `block (2 levels) in halting'
  shopify_app (6.0.6) lib/shopify_app/login_protection.rb:13:in `shopify_session'
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `block in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/?hmac=9b4b6a03f06dea266feecf09286cbf4b51833d9cf0e3aa69bb334c3575ed8f06&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=65b76025828e179faf779c1e6b38e600&timestamp=1443616792" for 1.52.21.220 at 2015-09-30 19:39:53 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9b4b6a03f06dea266feecf09286cbf4b51833d9cf0e3aa69bb334c3575ed8f06", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"65b76025828e179faf779c1e6b38e600", "timestamp"=>"1443616792"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (83.8ms)
Completed 200 OK in 126ms (Views: 113.3ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=59699ae8512a9021db37a0ec264b378c3afddae56792d4f3e96969d30187940d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=80c661b82677e77bc7186178df64c87e&timestamp=1443617054" for 1.52.21.220 at 2015-09-30 19:44:16 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"59699ae8512a9021db37a0ec264b378c3afddae56792d4f3e96969d30187940d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"80c661b82677e77bc7186178df64c87e", "timestamp"=>"1443617054"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (65.3ms)
Completed 200 OK in 92ms (Views: 90.1ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=e65a9e2c060e9508c54f710ca5fc8b027bba92cfecd54a251abc768a6d7ddfc4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=fe7f34a8f4e961eb0c3a804bf60e30c1&timestamp=1443617206" for 1.52.21.220 at 2015-09-30 19:46:47 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e65a9e2c060e9508c54f710ca5fc8b027bba92cfecd54a251abc768a6d7ddfc4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"fe7f34a8f4e961eb0c3a804bf60e30c1", "timestamp"=>"1443617206"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (102.4ms)
Completed 200 OK in 140ms (Views: 138.0ms | ActiveRecord: 0.2ms)


Started GET "/help" for 1.52.21.220 at 2015-09-30 19:50:23 +0700
Processing by HomeController#help as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/help.haml within layouts/embedded_app (9.4ms)
Completed 200 OK in 31ms (Views: 29.6ms | ActiveRecord: 0.2ms)


Started GET "/help?hmac=97cf82c7b66749c5772e8b787f01d07fec124b1610f5721d5cadd09b9a960256&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=80fddb9d3ea15292305b108d5776a201&timestamp=1443617424" for 1.52.21.220 at 2015-09-30 19:50:27 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"97cf82c7b66749c5772e8b787f01d07fec124b1610f5721d5cadd09b9a960256", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"80fddb9d3ea15292305b108d5776a201", "timestamp"=>"1443617424"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/help.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 23ms (Views: 21.0ms | ActiveRecord: 0.2ms)


Started GET "/help?hmac=5f55425a951025998a1b4d897d14a15694f5901f8ced89d83050519394201666&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=29ffbd9ab41c67c235c8e611b7a11004&timestamp=1443617468" for 1.52.21.220 at 2015-09-30 19:51:11 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"5f55425a951025998a1b4d897d14a15694f5901f8ced89d83050519394201666", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"29ffbd9ab41c67c235c8e611b7a11004", "timestamp"=>"1443617468"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/help.haml within layouts/embedded_app (11.4ms)
Completed 200 OK in 38ms (Views: 35.9ms | ActiveRecord: 0.2ms)


Started GET "/help?hmac=cae52db1c62ff2feec59abc26f7bb31fe32793ff70f890d3281b6336c1589708&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a8ef62e4d7dcd016aecf01a50e2e577b&timestamp=1443617488" for 1.52.21.220 at 2015-09-30 19:51:30 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"cae52db1c62ff2feec59abc26f7bb31fe32793ff70f890d3281b6336c1589708", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a8ef62e4d7dcd016aecf01a50e2e577b", "timestamp"=>"1443617488"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/help.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 26ms (Views: 24.3ms | ActiveRecord: 0.2ms)


Started GET "/help?hmac=05fdd0975a16c5ce2bdaa6cd9fa78ad1bcac3e61f6e91aa15a9c61e8f5a4a090&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=24164452b43166575562430bb0b18069&timestamp=1443617817" for 1.52.21.220 at 2015-09-30 19:57:03 +0700
Processing by HomeController#help as HTML
  Parameters: {"hmac"=>"05fdd0975a16c5ce2bdaa6cd9fa78ad1bcac3e61f6e91aa15a9c61e8f5a4a090", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"24164452b43166575562430bb0b18069", "timestamp"=>"1443617817"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/help.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 139ms (Views: 137.3ms | ActiveRecord: 0.1ms)


Started GET "/" for 1.52.21.220 at 2015-09-30 19:57:17 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (8.3ms)
Completed 200 OK in 61ms (Views: 59.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 1.52.21.220 at 2015-09-30 19:59:54 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.1ms)
Completed 200 OK in 97ms (Views: 95.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=3f1dfc72e5a7a27d36bb46e653f61b5c5b26ce87e3f17900eb226a2244d1d88c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a6d04887d4579ae2e03f436a15e0ba8a&timestamp=1443618367" for 1.52.21.220 at 2015-09-30 20:06:12 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"3f1dfc72e5a7a27d36bb46e653f61b5c5b26ce87e3f17900eb226a2244d1d88c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a6d04887d4579ae2e03f436a15e0ba8a", "timestamp"=>"1443618367"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (12.4ms)
Completed 200 OK in 380ms (Views: 376.8ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=9aad147e26abab017b40e04bcbef008abea48272ac22b3ca7482787f7faf8cf9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4a8c8b90db2b05e1eec6429365a2ce31&timestamp=1443619335" for 1.52.21.220 at 2015-09-30 20:22:18 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9aad147e26abab017b40e04bcbef008abea48272ac22b3ca7482787f7faf8cf9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4a8c8b90db2b05e1eec6429365a2ce31", "timestamp"=>"1443619335"}
  [1m[36mShop Load (4.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (87.2ms)
Completed 200 OK in 5059ms (Views: 4911.9ms | ActiveRecord: 22.4ms)


Started GET "/?hmac=21781821527e252663255a161ccbe29aed41ebc8357de3bf3ec5c8d9c91cc203&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=13521763ebc2994184601046dcf92ea0&timestamp=1443619374" for 1.52.21.220 at 2015-09-30 20:22:55 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"21781821527e252663255a161ccbe29aed41ebc8357de3bf3ec5c8d9c91cc203", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"13521763ebc2994184601046dcf92ea0", "timestamp"=>"1443619374"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.3ms)
Completed 200 OK in 76ms (Views: 73.0ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=cdd3358cb555df6afad2d8c85384b0e29c10ee15a295ae84aeab6cebb5ade48b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6637d78886943ed782e4fbbf812d1414&timestamp=1443619417" for 1.52.21.220 at 2015-09-30 20:23:39 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"cdd3358cb555df6afad2d8c85384b0e29c10ee15a295ae84aeab6cebb5ade48b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6637d78886943ed782e4fbbf812d1414", "timestamp"=>"1443619417"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (17.2ms)
Completed 200 OK in 91ms (Views: 88.3ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=8a3e874d962bb6798a8ac9cc3c338ac41680156c05b3618fe7ec423c13350773&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3b967605c90e344cc42e737b2e7ba792&timestamp=1443619601" for 1.52.21.220 at 2015-09-30 20:26:43 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"8a3e874d962bb6798a8ac9cc3c338ac41680156c05b3618fe7ec423c13350773", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3b967605c90e344cc42e737b2e7ba792", "timestamp"=>"1443619601"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 47ms (Views: 46.1ms | ActiveRecord: 0.1ms)


Started GET "/demo?hmac=b9754916e1015d320c64a0d2ce4f9ba7c6ca6f57cfff0084deb1979c3009059a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7a921c2f818b0768b406dcef2258fc3c&timestamp=1443619605" for 1.52.21.220 at 2015-09-30 20:26:47 +0700

ActionController::RoutingError (No route matches [GET] "/demo"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/demo?hmac=06add46c6b3b01126e77be86474645297f79d444da5e800947d070da21cb88e0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e31977c4d99b47b06f914581b233011f&timestamp=1443619800" for 1.52.21.220 at 2015-09-30 20:30:03 +0700

ActionController::RoutingError (No route matches [GET] "/demo"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/" for 1.52.21.220 at 2015-09-30 20:30:13 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.7ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 51ms (Views: 48.9ms | ActiveRecord: 0.7ms)


Started GET "/preferences" for 1.52.21.220 at 2015-09-30 20:42:51 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.1ms)
Completed 200 OK in 53ms (Views: 51.8ms | ActiveRecord: 0.2ms)


Started GET "/login" for 1.52.21.220 at 2015-09-30 21:30:23 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.haml within layouts/application (6.1ms)
Completed 200 OK in 704ms (Views: 703.8ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 21:30:42 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.8ms)
Completed 200 OK in 22ms (Views: 1.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 21:30:44 +0700


Started GET "/auth/shopify/callback?code=74d1572faaface84c63872eaf0bba8f4&hmac=4568265d5e3c0b91e4892805731b4d5f1f618536cad6b6df94b103c59dea473b&shop=letranloc-2.myshopify.com&signature=080b27b05d11ec986d9ef3941e0b1940&state=faf74a4ed4790571c5f590ddb73405f43547d41e08ba1d2d&timestamp=1443623540" for 1.52.21.220 at 2015-09-30 21:32:22 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"74d1572faaface84c63872eaf0bba8f4", "hmac"=>"4568265d5e3c0b91e4892805731b4d5f1f618536cad6b6df94b103c59dea473b", "shop"=>"letranloc-2.myshopify.com", "signature"=>"080b27b05d11ec986d9ef3941e0b1940", "state"=>"faf74a4ed4790571c5f590ddb73405f43547d41e08ba1d2d", "timestamp"=>"1443623540"}
  [1m[36mShop Load (5.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["shopify_token", "a3b917a7dfd6fa0d22dea8b7cfaffba5"], ["updated_at", "2015-09-30 14:32:24.321174"], ["id", 1]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473
Completed 302 Found in 142ms (ActiveRecord: 9.5ms)


Started GET "/auth/shopify/callback?code=c870e2f257262a43c38653791a7aeacd&hmac=a8b1a54eec971b4be6a1589ab496bdb177154a8b8232dfb7ab9bda45dffa93ff&shop=letranloc-2.myshopify.com&signature=bdc1850d4b172ea8a98cd50c6dd51f1d&timestamp=1443623544" for 1.52.21.220 at 2015-09-30 21:32:25 +0700

OmniAuth::Strategies::OAuth2::CallbackError (csrf_detected | CSRF detected):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:71:in `callback_phase'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:76:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/auth/shopify/callback?code=c870e2f257262a43c38653791a7aeacd&hmac=a8b1a54eec971b4be6a1589ab496bdb177154a8b8232dfb7ab9bda45dffa93ff&shop=letranloc-2.myshopify.com&signature=bdc1850d4b172ea8a98cd50c6dd51f1d&timestamp=1443623544" for 1.52.21.220 at 2015-09-30 21:32:44 +0700

OmniAuth::Strategies::OAuth2::CallbackError (csrf_detected | CSRF detected):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:71:in `callback_phase'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:76:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 21:33:29 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.0ms)
Completed 200 OK in 12ms (Views: 11.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-09-30 21:33:31 +0700


Started GET "/auth/shopify/callback?code=54415f08339d9d9ba0e0d83b6a6fb3d3&hmac=5b6a1cb7af86fd5ee23891e67c0b0625bb2e4726a13a34ac467c8fee523bf3e1&shop=letranloc-2.myshopify.com&signature=223c5e727f81faecc0324676ff5d090f&state=65c1390becb5585c79b2df1b661900d0994cee13ebdb7a6a&timestamp=1443623621" for 1.52.21.220 at 2015-09-30 21:33:43 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"54415f08339d9d9ba0e0d83b6a6fb3d3", "hmac"=>"5b6a1cb7af86fd5ee23891e67c0b0625bb2e4726a13a34ac467c8fee523bf3e1", "shop"=>"letranloc-2.myshopify.com", "signature"=>"223c5e727f81faecc0324676ff5d090f", "state"=>"65c1390becb5585c79b2df1b661900d0994cee13ebdb7a6a", "timestamp"=>"1443623621"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.3ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["shopify_token", "155f3f61cac7a8890950c3e476e6f2d6"], ["updated_at", "2015-09-30 14:33:44.754574"], ["id", 1]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473
Completed 302 Found in 103ms (ActiveRecord: 4.5ms)


Started GET "/?hmac=9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da137b5e3f81a8876cf647ee4d95586a&timestamp=1443608473" for 1.52.21.220 at 2015-09-30 21:33:46 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"9f155bb4275e6d16ecc36013f0010a577362cb07dcc94036f397e5ec22c80c91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"da137b5e3f81a8876cf647ee4d95586a", "timestamp"=>"1443608473"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (68.0ms)
Completed 200 OK in 414ms (Views: 397.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=6201fd5f7dad9d36c66a9ef690805a17dbdedf9077fbd2654bccc6d91a8ea32d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6c0b301a2c02b9413ebafe8cf100a6db&timestamp=1443623628" for 1.52.21.220 at 2015-09-30 21:33:49 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"6201fd5f7dad9d36c66a9ef690805a17dbdedf9077fbd2654bccc6d91a8ea32d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6c0b301a2c02b9413ebafe8cf100a6db", "timestamp"=>"1443623628"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 73ms (Views: 70.8ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=f70e35d5add332893cd0f241f96dc2b5092a2de5472b87b6cce3cbefa2b6ff21&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=74d55dc7643b3e7c69cd08a91bb36aad&timestamp=1443623691" for 1.52.21.220 at 2015-09-30 21:34:52 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f70e35d5add332893cd0f241f96dc2b5092a2de5472b87b6cce3cbefa2b6ff21", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"74d55dc7643b3e7c69cd08a91bb36aad", "timestamp"=>"1443623691"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 77ms (Views: 74.8ms | ActiveRecord: 0.2ms)


Started GET "/" for 1.52.21.220 at 2015-09-30 21:35:48 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.3ms)
Completed 200 OK in 183ms (Views: 180.8ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=0c96fb9a53c656c52f7d3760c3be36a1d633aac54ecbfc6f89e6d0461fec3ef1&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5132f3ee2c25b1d4adfc7c481d183aab&timestamp=1443623763" for 1.52.21.220 at 2015-09-30 21:36:08 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"0c96fb9a53c656c52f7d3760c3be36a1d633aac54ecbfc6f89e6d0461fec3ef1", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5132f3ee2c25b1d4adfc7c481d183aab", "timestamp"=>"1443623763"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 46ms (Views: 44.1ms | ActiveRecord: 0.2ms)


Started GET "/" for 1.52.21.220 at 2015-09-30 21:36:35 +0700
Processing by HomeController#index as HTML
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/login" for 1.52.21.220 at 2015-09-30 21:36:37 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.haml within layouts/application (3.5ms)
Completed 200 OK in 99ms (Views: 98.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 09:41:06 +0700


Started GET "/auth/shopify/callback?code=bb121cfe69330e5e55ffd7f09a6b0053&hmac=a20698f1d61149e1af5fac75155c6009c11cc880b9e13deab0efd694bd4eae91&shop=letranloc-2.myshopify.com&signature=dcb5b558e57dc4102d2d6cc941cfa154&state=80156741be68908116f993319b5bc6a98abbc41b001ec794&timestamp=1443667270" for 1.52.21.220 at 2015-10-01 09:41:10 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"bb121cfe69330e5e55ffd7f09a6b0053", "hmac"=>"a20698f1d61149e1af5fac75155c6009c11cc880b9e13deab0efd694bd4eae91", "shop"=>"letranloc-2.myshopify.com", "signature"=>"dcb5b558e57dc4102d2d6cc941cfa154", "state"=>"80156741be68908116f993319b5bc6a98abbc41b001ec794", "timestamp"=>"1443667270"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 180ms (ActiveRecord: 4.8ms)


Started GET "/" for 1.52.21.220 at 2015-10-01 09:41:13 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (114.5ms)
Completed 200 OK in 899ms (Views: 871.6ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=3bef894fb6cbcb302dd0843acacd10310375906bbfcb0a76aab565219effa9fd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=614d22ea4c13efc4ec5595546d6b0799&timestamp=1443667275" for 1.52.21.220 at 2015-10-01 09:41:17 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"3bef894fb6cbcb302dd0843acacd10310375906bbfcb0a76aab565219effa9fd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"614d22ea4c13efc4ec5595546d6b0799", "timestamp"=>"1443667275"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 51ms (Views: 48.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 1.52.21.220 at 2015-10-01 09:41:25 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (11.3ms)
Completed 200 OK in 47ms (Views: 45.6ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=5938cb05f43368eca423f366ae764a650d2a2a1e3d688102224dbafad59b2828&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8a2025838c0973419eb3368116e4b9cc&timestamp=1443668707" for 1.52.21.220 at 2015-10-01 10:05:08 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"5938cb05f43368eca423f366ae764a650d2a2a1e3d688102224dbafad59b2828", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8a2025838c0973419eb3368116e4b9cc", "timestamp"=>"1443668707"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (12.6ms)
Completed 500 Internal Server Error in 91ms (ActiveRecord: 1.0ms)

ActionView::Template::Error (couldn't find file 'kandy.min.js' with type 'application/javascript'):
     9:         shopOrigin: "https://#{@shop_session.url if @shop_session}"
    10:         debug: true
    11:     = stylesheet_link_tag 'application'
    12:     = javascript_include_tag 'application'
    13:     = csrf_meta_tags
    14:     %body
    15:       = yield
  app/assets/javascripts/application.coffee.erb:15
  app/views/layouts/embedded_app.haml:12:in `_app_views_layouts_embedded_app_haml__1033492131983924832_70194279783680'




Started GET "/preferences?hmac=fe108d1ef72436b48f87e54f54ca03c27f7ec5765bd57c948a088ab82a22bc55&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=dc53ed056387ec255710b823eea446c0&timestamp=1443668775" for 1.52.21.220 at 2015-10-01 10:06:16 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fe108d1ef72436b48f87e54f54ca03c27f7ec5765bd57c948a088ab82a22bc55", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"dc53ed056387ec255710b823eea446c0", "timestamp"=>"1443668775"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (92.3ms)
Completed 200 OK in 4452ms (Views: 4319.8ms | ActiveRecord: 4.0ms)


Started GET "/preferences?hmac=396d10975b61676999e2c4a7fde2b5d56f8c905b9a753ddb403b716563fb65e7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d30b1632ca5646ae80c7e687988cbf65&timestamp=1443669107" for 1.52.21.220 at 2015-10-01 10:11:48 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"396d10975b61676999e2c4a7fde2b5d56f8c905b9a753ddb403b716563fb65e7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d30b1632ca5646ae80c7e687988cbf65", "timestamp"=>"1443669107"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.2ms)
Completed 500 Internal Server Error in 15ms (ActiveRecord: 0.3ms)

ActionView::Template::Error (You don't need to use "- end" in Haml. Un-indent to close a block:
- if foo?
  %strong Foo!
- else
  Not foo.
%p This line is un-indented, so it isn't part of the "if" block):
    14: 
    15: - form_tag do
    16:   - submit_tag 'Save'
    17: - end
  app/views/home/preferences.haml:17




Started GET "/preferences?hmac=d1165f2ea110858b8e2985c5f1d69922cd8340db4b922cae5f4d9543ffbae635&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=24670eee641c680891ac54a780c365cc&timestamp=1443669208" for 1.52.21.220 at 2015-10-01 10:13:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d1165f2ea110858b8e2985c5f1d69922cd8340db4b922cae5f4d9543ffbae635", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"24670eee641c680891ac54a780c365cc", "timestamp"=>"1443669208"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.1ms)
Completed 200 OK in 89ms (Views: 87.0ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=781292f97cd388e409c460af4a8732668f069c9d5a25bc3e3b64d0dbb13659da&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=eafcb92f14456c7937b1f440d5bf8150&timestamp=1443669290" for 1.52.21.220 at 2015-10-01 10:14:52 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"781292f97cd388e409c460af4a8732668f069c9d5a25bc3e3b64d0dbb13659da", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"eafcb92f14456c7937b1f440d5bf8150", "timestamp"=>"1443669290"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (122.3ms)
Completed 500 Internal Server Error in 132ms (ActiveRecord: 0.2ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:19: syntax error, unexpected keyword_ensure, expecting end-of-input):
  app/views/home/preferences.haml:19: syntax error, unexpected keyword_ensure, expecting end-of-input




Started GET "/preferences?hmac=9200a8fd5e9459008e4502b90a74a84eea5bf204a00016b5d285c24173deaf91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=241a0be521ec8a90d4d72f4cda97d4bb&timestamp=1443669316" for 1.52.21.220 at 2015-10-01 10:15:18 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9200a8fd5e9459008e4502b90a74a84eea5bf204a00016b5d285c24173deaf91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"241a0be521ec8a90d4d72f4cda97d4bb", "timestamp"=>"1443669316"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (29.7ms)
Completed 200 OK in 95ms (Views: 92.9ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=c57ac17777f552ce10e86e7b8fd71e141ac80c9c3bfb19c9efa38b543978b03e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=bfded76e53eb0c3c9833ed04f3aeec0a&timestamp=1443669376" for 1.52.21.220 at 2015-10-01 10:16:18 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c57ac17777f552ce10e86e7b8fd71e141ac80c9c3bfb19c9efa38b543978b03e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bfded76e53eb0c3c9833ed04f3aeec0a", "timestamp"=>"1443669376"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (40.9ms)
Completed 200 OK in 138ms (Views: 135.8ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=cb2f05c1257fdf05e76ea47fa090719f9f3f287afc03bdf5076c5d8e89f36ce7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f67c4bae3e38a522706202b4a03212ea&timestamp=1443671398" for 1.52.21.220 at 2015-10-01 10:50:00 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"cb2f05c1257fdf05e76ea47fa090719f9f3f287afc03bdf5076c5d8e89f36ce7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f67c4bae3e38a522706202b4a03212ea", "timestamp"=>"1443671398"}
  [1m[36mShop Load (3.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (17.0ms)
Completed 200 OK in 259ms (Views: 252.5ms | ActiveRecord: 3.5ms)


Started GET "/preferences?hmac=9c46f43b50cfb11f5e0c147716af99a915ff3462d9008ca7f4f63a31099a1e7a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8d3aae93ccfbf052d0366c793b27b6f2&timestamp=1443671463" for 1.52.21.220 at 2015-10-01 10:51:05 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9c46f43b50cfb11f5e0c147716af99a915ff3462d9008ca7f4f63a31099a1e7a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8d3aae93ccfbf052d0366c793b27b6f2", "timestamp"=>"1443671463"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (12.7ms)
Completed 200 OK in 87ms (Views: 85.2ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=ab78ac9d6b619d531df32072527ada0becafc8b624fef3e1508c1664d541f092&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6a3c58a6f39739fe3c85bfb764b9fa77&timestamp=1443671529" for 1.52.21.220 at 2015-10-01 10:52:10 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ab78ac9d6b619d531df32072527ada0becafc8b624fef3e1508c1664d541f092", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6a3c58a6f39739fe3c85bfb764b9fa77", "timestamp"=>"1443671529"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (13.9ms)
Completed 200 OK in 108ms (Views: 106.4ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=d378ea3c7ed5d42587f4a5055014e2ff8bbe88ac4c19f4570b6442f4f667bbdd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=08e3fb0afc431269be176b6af527a201&timestamp=1443671618" for 1.52.21.220 at 2015-10-01 10:53:41 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d378ea3c7ed5d42587f4a5055014e2ff8bbe88ac4c19f4570b6442f4f667bbdd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"08e3fb0afc431269be176b6af527a201", "timestamp"=>"1443671618"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (14.7ms)
Completed 200 OK in 83ms (Views: 81.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=a9200f521955bb5623dda18cf4fa1bad6e6b722a7e733f4cbde347680c95d2c8&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=490840ec13da7302b0da54434c669bce&timestamp=1443671665" for 1.52.21.220 at 2015-10-01 10:54:27 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a9200f521955bb5623dda18cf4fa1bad6e6b722a7e733f4cbde347680c95d2c8", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"490840ec13da7302b0da54434c669bce", "timestamp"=>"1443671665"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.1ms)
Completed 200 OK in 84ms (Views: 81.9ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=0112fc9ca7749765620d95b9ab07998572e833ae4b5b1861e3bbb8aad91c41b7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7e390b75f466fa00635299cf5070dd9b&timestamp=1443671751" for 1.52.21.220 at 2015-10-01 10:55:54 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0112fc9ca7749765620d95b9ab07998572e833ae4b5b1861e3bbb8aad91c41b7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7e390b75f466fa00635299cf5070dd9b", "timestamp"=>"1443671751"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (14.5ms)
Completed 200 OK in 170ms (Views: 168.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=8ed7c7cbc8e929aeb4949edd66bbc95c90b9747d5b66ee7bf6687622dad52125&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=eb3c28a93be71d1a21c5cd208d74ec23&timestamp=1443671883" for 1.52.21.220 at 2015-10-01 10:58:05 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"8ed7c7cbc8e929aeb4949edd66bbc95c90b9747d5b66ee7bf6687622dad52125", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"eb3c28a93be71d1a21c5cd208d74ec23", "timestamp"=>"1443671883"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (1.6ms)
Completed 200 OK in 122ms (Views: 119.5ms | ActiveRecord: 0.3ms)


Started POST "/preferences" for 1.52.21.220 at 2015-10-01 10:58:15 +0700

ActionController::RoutingError (No route matches [POST] "/preferences"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/preferences?hmac=6ddbc30a3bd9486ea25d064591927d7253e53f17abbdc4e8ff9dccd06144ec0a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a1a25295aab319240c03375149ea5a51&timestamp=1443672042" for 1.52.21.220 at 2015-10-01 11:00:44 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6ddbc30a3bd9486ea25d064591927d7253e53f17abbdc4e8ff9dccd06144ec0a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a1a25295aab319240c03375149ea5a51", "timestamp"=>"1443672042"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (1.2ms)
Completed 200 OK in 65ms (Views: 52.3ms | ActiveRecord: 0.9ms)


Started GET "/preferences?hmac=b60b3941e5888c828a3c900c2a3e1e5119d82c04a9c24d07897d2d0329805bf9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f326ac1a99b49dc77fecbceee6e3a3d1&timestamp=1443672142" for 1.52.21.220 at 2015-10-01 11:02:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b60b3941e5888c828a3c900c2a3e1e5119d82c04a9c24d07897d2d0329805bf9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f326ac1a99b49dc77fecbceee6e3a3d1", "timestamp"=>"1443672142"}
  [1m[36mShop Load (22.6ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (187.2ms)
Completed 200 OK in 1533ms (Views: 1247.5ms | ActiveRecord: 27.0ms)


Started GET "/preferences?hmac=586d6147dbd2725a16acee68dff26c3c53b8fc37100464b80d9bdb4bdc4ee953&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=44afd26775293173ff8cddbb027a9cfc&timestamp=1443672231" for 1.52.21.220 at 2015-10-01 11:03:53 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"586d6147dbd2725a16acee68dff26c3c53b8fc37100464b80d9bdb4bdc4ee953", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"44afd26775293173ff8cddbb027a9cfc", "timestamp"=>"1443672231"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.3ms)
Completed 200 OK in 201ms (Views: 198.4ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=9842c51bfd70e1105f0517da494574c19c79a334f7a9e3e0bf43b4d6ff25a790&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d2a6125580e02a9ade2b05ed7e467e94&timestamp=1443672326" for 1.52.21.220 at 2015-10-01 11:05:28 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9842c51bfd70e1105f0517da494574c19c79a334f7a9e3e0bf43b4d6ff25a790", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d2a6125580e02a9ade2b05ed7e467e94", "timestamp"=>"1443672326"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.2ms)
Completed 200 OK in 257ms (Views: 254.6ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=343f00ef5d49f1a46b203f69ca1ddbfbc5df2422c66f33e9059142062835353e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6778e95a869da8cdbbeb80aa783edc47&timestamp=1443673000" for 1.52.21.220 at 2015-10-01 11:16:43 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"343f00ef5d49f1a46b203f69ca1ddbfbc5df2422c66f33e9059142062835353e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6778e95a869da8cdbbeb80aa783edc47", "timestamp"=>"1443673000"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.1ms)
Completed 200 OK in 248ms (Views: 246.0ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=ffda5b059036abc6d37e9f854735b31595308a3df65c0aa9bbb62cc233e05632&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a6c6d76d67c265a75125b04ad74c4561&timestamp=1443673111" for 1.52.21.220 at 2015-10-01 11:18:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ffda5b059036abc6d37e9f854735b31595308a3df65c0aa9bbb62cc233e05632", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a6c6d76d67c265a75125b04ad74c4561", "timestamp"=>"1443673111"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (25.2ms)
Completed 200 OK in 152ms (Views: 149.5ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=22b97526a3713b4fb685256b568fd88a07c3238abc76224ecbc204e5fee2f3f9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5d9eab01e597544820340fb70220c6b2&timestamp=1443673179" for 1.52.21.220 at 2015-10-01 11:19:41 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"22b97526a3713b4fb685256b568fd88a07c3238abc76224ecbc204e5fee2f3f9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5d9eab01e597544820340fb70220c6b2", "timestamp"=>"1443673179"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.9ms)
Completed 200 OK in 2869ms (Views: 2866.8ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=2ae2aaf143cd2d820ad017856abd54128ef5d8222b0eb660c284c2ec13b59fc2&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da77235a210931022baa1b3bb2f18eb3&timestamp=1443673238" for 1.52.21.220 at 2015-10-01 11:20:41 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ae2aaf143cd2d820ad017856abd54128ef5d8222b0eb660c284c2ec13b59fc2", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"da77235a210931022baa1b3bb2f18eb3", "timestamp"=>"1443673238"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.0ms)
Completed 200 OK in 2890ms (Views: 2886.6ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=07dbf985e87aee6ae518756effda5c0112a7b0ae43bcabc2fe53f399525c69d9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f14f56e0d7545424a517a865c2cbe09c&timestamp=1443673293" for 1.52.21.220 at 2015-10-01 11:21:35 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"07dbf985e87aee6ae518756effda5c0112a7b0ae43bcabc2fe53f399525c69d9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f14f56e0d7545424a517a865c2cbe09c", "timestamp"=>"1443673293"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (18.7ms)
Completed 200 OK in 79ms (Views: 76.8ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=56d439153b8aadfea78b9414f23ad58b96946ca29f7fd2b61a1db604800a5c01&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=073993950d13807c6a67149739a2d927&timestamp=1443678356" for 1.52.21.220 at 2015-10-01 12:45:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"56d439153b8aadfea78b9414f23ad58b96946ca29f7fd2b61a1db604800a5c01", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"073993950d13807c6a67149739a2d927", "timestamp"=>"1443678356"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (12.2ms)
Completed 200 OK in 298ms (Views: 277.9ms | ActiveRecord: 1.3ms)


Started GET "/?hmac=e710d05f86b141c6a13fb882786ad0d0b3a1fd482cfc864c5c078aea6f56a954&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1a4bac6fa6556f89e55ea6b42a015b96&timestamp=1443678378" for 1.52.21.220 at 2015-10-01 12:46:22 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e710d05f86b141c6a13fb882786ad0d0b3a1fd482cfc864c5c078aea6f56a954", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1a4bac6fa6556f89e55ea6b42a015b96", "timestamp"=>"1443678378"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 4178ms (Views: 4176.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 1.52.21.220 at 2015-10-01 13:08:25 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (1.2ms)
Completed 200 OK in 148ms (Views: 145.9ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=1f6dfdb7e64a07a7ced998b8654a4f3035eb3901fc7f6ba2a0cebad6de5573b3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e80f6e7ba2ae6268713194e01fb702e0&timestamp=1443679784" for 1.52.21.220 at 2015-10-01 13:09:45 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"1f6dfdb7e64a07a7ced998b8654a4f3035eb3901fc7f6ba2a0cebad6de5573b3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e80f6e7ba2ae6268713194e01fb702e0", "timestamp"=>"1443679784"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 147ms (Views: 144.5ms | ActiveRecord: 0.2ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 13:42:01 +0700

ActionController::RoutingError (No route matches [POST] "/sms/order-creation"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.96 at 2015-10-01 13:42:03 +0700

ActionController::RoutingError (No route matches [POST] "/sms/order-creation"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.103 at 2015-10-01 13:43:06 +0700

ActionController::RoutingError (No route matches [POST] "/sms/order-creation"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.111 at 2015-10-01 13:45:07 +0700

ActionController::RoutingError (No route matches [POST] "/sms/order-creation"):
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:21:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.100 at 2015-10-01 13:45:38 +0700
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:45:38-04:00", "updated_at"=>"2015-10-01T02:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:45:38-04:00", "updated_at"=>"2015-10-01T02:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 13:49:39 +0700
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:49:38-04:00", "updated_at"=>"2015-10-01T02:49:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:49:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:49:38-04:00", "updated_at"=>"2015-10-01T02:49:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:49:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.100 at 2015-10-01 13:50:13 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:50:13-04:00", "updated_at"=>"2015-10-01T02:50:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:50:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:50:13-04:00", "updated_at"=>"2015-10-01T02:50:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:50:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.103 at 2015-10-01 13:52:47 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:52:46-04:00", "updated_at"=>"2015-10-01T02:52:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:52:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:52:46-04:00", "updated_at"=>"2015-10-01T02:52:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:52:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 13:54:15 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:54:14-04:00", "updated_at"=>"2015-10-01T02:54:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:54:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:54:14-04:00", "updated_at"=>"2015-10-01T02:54:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:54:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 29ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 13:56:08 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:56:08-04:00", "updated_at"=>"2015-10-01T02:56:08-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:56:08-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:56:08-04:00", "updated_at"=>"2015-10-01T02:56:08-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:56:08-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.96 at 2015-10-01 13:57:01 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:57:00-04:00", "updated_at"=>"2015-10-01T02:57:00-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:57:00-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:57:00-04:00", "updated_at"=>"2015-10-01T02:57:00-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:57:00-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.100 at 2015-10-01 13:58:07 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:58:07-04:00", "updated_at"=>"2015-10-01T02:58:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:58:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T02:58:07-04:00", "updated_at"=>"2015-10-01T02:58:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T02:58:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.111 at 2015-10-01 14:13:54 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:13:53-04:00", "updated_at"=>"2015-10-01T03:13:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:13:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:13:53-04:00", "updated_at"=>"2015-10-01T03:13:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:13:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 2ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.103 at 2015-10-01 14:16:38 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:16:37-04:00", "updated_at"=>"2015-10-01T03:16:37-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:16:37-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:16:37-04:00", "updated_at"=>"2015-10-01T03:16:37-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:16:37-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `verify_webhook' for WebhookService:Class):
  app/controllers/sms_controller.rb:14:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.96 at 2015-10-01 14:16:39 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:16:38-04:00", "updated_at"=>"2015-10-01T03:16:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:16:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:16:38-04:00", "updated_at"=>"2015-10-01T03:16:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:16:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `verify_webhook' for WebhookService:Class):
  app/controllers/sms_controller.rb:14:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 14:17:22 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:17:21-04:00", "updated_at"=>"2015-10-01T03:17:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:17:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:17:21-04:00", "updated_at"=>"2015-10-01T03:17:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:17:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 161ms (ActiveRecord: 0.0ms)

ActionView::MissingTemplate (Missing template sms/order_creation, application/order_creation with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 14:17:23 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:17:22-04:00", "updated_at"=>"2015-10-01T03:17:22-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:17:22-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:17:22-04:00", "updated_at"=>"2015-10-01T03:17:22-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:17:22-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 98ms (ActiveRecord: 0.0ms)

ActionView::MissingTemplate (Missing template sms/order_creation, application/order_creation with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.55.100 at 2015-10-01 14:17:44 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end
    head: :ok
         ^):
  app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end




Started POST "/sms/order-creation" for 23.227.55.109 at 2015-10-01 14:17:49 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end
    head: :ok
         ^):
  app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end




Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 14:17:50 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end
    head: :ok
         ^):
  app/controllers/sms_controller.rb:19: syntax error, unexpected ':', expecting keyword_end




Started POST "/sms/order-creation" for 23.227.55.96 at 2015-10-01 14:18:03 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:18:02-04:00", "updated_at"=>"2015-10-01T03:18:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:18:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:18:02-04:00", "updated_at"=>"2015-10-01T03:18:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:18:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 3ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-01 14:18:24 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:18:23-04:00", "updated_at"=>"2015-10-01T03:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-01T03:18:23-04:00", "updated_at"=>"2015-10-01T03:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-01T03:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 0ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:30:22 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.9ms)
Completed 200 OK in 47ms (Views: 31.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:30:24 +0700


Started GET "/auth/shopify/callback?code=8d7b3b2abad995d23c7410a7bd47a639&hmac=c16c9fe04cdab23e64fc0770514e45e447d42280af8764ee2d69136c92e28a80&shop=letranloc-2.myshopify.com&signature=fc157cea00a28df703b586affaa46ff8&state=d2ec035dbe8d4a9b586a6214021ecf71f013f0a2c9a8d446&timestamp=1443684629" for 1.52.21.220 at 2015-10-01 14:30:29 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"8d7b3b2abad995d23c7410a7bd47a639", "hmac"=>"c16c9fe04cdab23e64fc0770514e45e447d42280af8764ee2d69136c92e28a80", "shop"=>"letranloc-2.myshopify.com", "signature"=>"fc157cea00a28df703b586affaa46ff8", "state"=>"d2ec035dbe8d4a9b586a6214021ecf71f013f0a2c9a8d446", "timestamp"=>"1443684629"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NameError (uninitialized constant SessionsController::DOMAIN):
  app/controllers/sessions_controller.rb:5:in `callback'




Started GET "/auth/shopify/callback?code=8d7b3b2abad995d23c7410a7bd47a639&hmac=c16c9fe04cdab23e64fc0770514e45e447d42280af8764ee2d69136c92e28a80&shop=letranloc-2.myshopify.com&signature=fc157cea00a28df703b586affaa46ff8&state=d2ec035dbe8d4a9b586a6214021ecf71f013f0a2c9a8d446&timestamp=1443684629" for 1.52.21.220 at 2015-10-01 14:31:02 +0700

OAuth2::Error (<!DOCTYPE html>
<html lang="en">
<head>
  <meta charset="utf-8">
  <title>400 - Oauth error invalid_request</title>
  <style type="text/css">

    * { border:0; margin:0; padding:0; -moz-box-sizing:border-box; -webkit-box-sizing:border-box; box-sizing:border-box; }
    html,body { height:100%; border:0; margin:0; padding:0; font-family:"Helvetica Neue", Helvetica, Arial, sans-serif; font-weight:300; background:#fff; }
    body { min-height:100%; font-size:16px; line-height:22px; color:#6c6c6c; }
    a { color:#479ccf; }

    h1,h2,h3,h4,h5,h6 { text-align:left; margin:0 0 20px 0; color:#31373D; font-weight:700; }
    h1 { font-size:28px; line-height:48px; margin-bottom:7px; }
    h2 { font-size:20px; font-weight:300; line-height:30px; color:#6c6c6c; }
    h3 { font-size:17px; line-height:30px; position:relative; padding-bottom:18px; margin-bottom:22px; font-weight:400; }
    h3:after { content:""; position:absolute; left:0; bottom:0; height:2px; width:76px; background:#EAEAEA; }
    h4 { font-size:14px; margin-bottom:3px; }

    img { max-width:100%; }

    li { margin-bottom:5px; }

    .ico { display:inline-block; }
    .ico svg { background-size:contain; background-position:center; width:24px; height:24px; margin-bottom:5px; }

    .wrapper { min-width:320px; max-width:650px; margin:0 auto; padding:20px; }

    .hero { margin-bottom:30px; }

    .content--block { position:relative; margin-bottom:50px; }
    .content--desc { margin-bottom:32px; position:relative; }
    .content--desc-large { font-size:20px; line-height:28px; }

    .request-id { padding-top:100px; font-size:13px; color:#ccc; }

    @media all and (min-width:500px) {
      body { padding:60px 0; }
      .wrapper { padding:20px 20px 20px 100px; }
      .ico svg { width:40px; height:40px; margin-bottom:0; }
      .hero { margin-bottom:70px; }
      .content--block { margin-bottom:80px; }
      .content--desc .ico { position:absolute; left:-70px; top:-7px; }
    }

    @media all and (min-width:900px) {
      .wrapper { padding:20px; }
    }

  </style>
</head>

<body class="status-error status-code-500">

  <div class="wrapper">
    <div class="hero">
      <svg width="160px" height="176px" viewBox="0 0 160 176" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
        <title>shopify-bag-outline</title>
        <desc>Created with Sketch.</desc>
        <defs></defs>
        <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
          <g id="user-action-required-2" sketch:type="MSArtboardGroup" transform="translate(-297.000000, -81.000000)" stroke="#979797" stroke-dasharray="5">
            <g id="shopify-bag-outline" sketch:type="MSLayerGroup" transform="translate(298.000000, 82.000000)">
              <path d="M138.817711,32.9976853 C138.371951,32.7161619 137.887187,32.6604147 137.887187,32.6604147 L123.887534,31.6151547 L113.584904,21.3716063 C113.200436,21.0733588 112.749104,20.9005425 112.286628,20.8085596 L104.647414,174.188624 L158.389365,162.551396 L139.402771,34.070819 C139.402771,34.070819 139.257899,33.2847834 138.817711,32.9976853" id="Fill-1" sketch:type="MSShapeGroup"></path>
              <path d="M104.652986,20.8643068 L99.4292354,22.483763 C97.1196409,15.7244147 93.9714603,10.8994944 90.0264836,8.10655958 C87.070537,6.01325214 83.8137024,5.13244635 80.3144857,5.408395 C79.5984836,4.46347992 78.8323334,3.59939829 77.9742453,2.90534562 C74.1100625,-0.222072416 69.1286936,-0.707073074 63.1694384,1.45591837 C45.436545,7.89750757 37.8224056,30.7622225 35.033619,42.4328993 L19.170132,47.3470151 C19.170132,47.3470151 15.5009693,48.3894878 14.6400951,49.4235984 C13.6956409,50.558054 13.5117649,53.615788 13.5117649,53.615788 L0.300550361,155.58857 L99.4988854,174.183049 L107.138099,20.7778986 C106.043201,20.5632719 104.926014,20.8001975 104.652986,20.8643068 L104.652986,20.8643068 Z M87.081681,12.7586636 C90.1602116,14.9383792 92.375082,19.3061725 93.9491723,24.1812653 L85.6218167,26.7595734 C85.6134587,26.1630783 85.6106727,25.5693706 85.5855987,24.9533641 C85.3850067,19.5932706 84.6550745,15.0777472 83.4153043,11.4207307 C84.7470126,11.5628861 85.9756388,11.9754154 87.081681,12.7586636 L87.081681,12.7586636 Z M62.4868683,33.9286636 C64.7825327,25.0620711 69.1621256,16.0561106 77.4671932,12.5273127 C79.1972995,17.0205372 79.6987796,23.1471547 79.6653476,28.6048058 L62.4868683,33.9286636 L62.4868683,33.9286636 Z M65.2115768,7.08638578 C68.8083035,5.77911389 71.558086,5.87109677 73.6531584,7.23969059 C62.5453743,12.3544964 57.6503714,25.0955194 55.513509,36.0888677 L41.7952423,40.3395918 C44.9099909,29.1929388 51.7774822,11.964266 65.2115768,7.08638578 L65.2115768,7.08638578 Z M74.6366166,82.0524358 C73.8509645,81.6705675 72.9204403,81.2608255 71.8673321,80.8705951 C70.8225819,80.4831521 69.6608197,80.1124332 68.4015474,79.8058236 C67.1506332,79.499214 65.8077809,79.2511389 64.3897067,79.1034088 C62.9883484,78.9612535 61.5173401,78.9138683 59.9906118,79.0030639 C58.5892535,79.0866847 57.3188373,79.3347597 56.2016511,79.7333522 C55.0956089,80.1291573 54.1344387,80.6726926 53.3432145,81.3472337 C52.5547764,82.0217749 51.9307123,82.8245346 51.4905242,83.7499381 C51.0531221,84.669767 50.79681,85.7122396 50.746662,86.8634194 C50.710444,87.7163515 50.8413861,88.5358354 51.1422741,89.3330204 C51.4431622,90.1302054 51.9112103,90.9106662 52.5519904,91.6883397 C53.1927705,92.4688005 54.0062827,93.246474 54.9925269,94.0380843 C55.984343,94.8352693 57.1572493,95.6519658 58.5112455,96.4965359 C60.4057259,97.7090375 62.3419963,99.0804187 64.1863286,100.65249 C66.055735,102.24686 67.8248453,104.044707 69.3460016,106.093417 C70.8838739,108.167213 72.1626481,110.489084 73.0263083,113.095265 C73.8955405,115.718171 74.3357286,118.614238 74.1964285,121.805766 C73.9707625,127.023704 72.8285023,131.522503 70.9368079,135.254778 C69.0701876,138.936881 66.4931371,141.832948 63.3895325,143.929043 C60.3555779,145.98054 56.8396452,147.254363 53.0144665,147.76445 C49.3035138,148.263388 45.319533,148.040399 41.2157542,147.134507 C41.1823222,147.126145 41.1488902,147.117783 41.1182442,147.112208 C41.0848122,147.106633 41.0541662,147.098271 41.0207342,147.089909 C40.9873022,147.084334 40.9538702,147.075972 40.9232242,147.06761 C40.8897921,147.059248 40.8591461,147.053673 40.8257141,147.045311 C38.9005878,146.579822 37.0423254,145.972178 35.2955031,145.266976 C33.5765407,144.570136 31.9606604,143.778525 30.4924382,142.922806 C29.0409319,142.075448 27.7287256,141.169556 26.5920374,140.230216 C25.4664932,139.302025 24.510895,138.340386 23.7614609,137.378747 L28.2914977,122.340939 C29.0548619,122.987606 29.9909581,123.720682 31.0552103,124.467695 C32.1306065,125.225856 33.3397307,126.000743 34.6352209,126.725456 C35.9446412,127.455745 37.3432135,128.13586 38.7835757,128.687758 C40.240654,129.248017 41.7423083,129.677271 43.2300326,129.897472 C44.5422388,130.0898 45.7151451,130.050777 46.7431793,129.819426 C47.7767855,129.585288 48.6599476,129.156034 49.3843078,128.570689 C50.1086679,127.982556 50.674226,127.235543 51.0642661,126.379824 C51.4598782,125.521317 51.6827582,124.554103 51.7273342,123.519992 C51.7719102,122.483094 51.6771862,121.510305 51.4180882,120.562603 C51.1589901,119.614901 50.735518,118.700646 50.1225979,117.780818 C49.5124638,116.866564 48.7212396,115.949522 47.7210655,115.00182 C46.7320353,114.059692 45.542413,113.089691 44.1326968,112.061155 C42.4053764,110.770607 40.7783521,109.368565 39.3240598,107.846666 C37.8836976,106.341492 36.6104953,104.713673 35.5657451,102.9437 C34.5321389,101.193238 33.7186268,99.2978328 33.1920727,97.2435484 C32.6655186,95.1948387 32.4231365,92.9788874 32.5290045,90.5650336 C32.7045226,86.5289361 33.5124627,82.8078104 34.860887,79.4574036 C36.2232413,76.0735484 38.1567256,73.0353259 40.5805461,70.4207821 C43.0545146,67.7532785 46.0578231,65.5038789 49.5236078,63.7729282 C53.0869025,61.9918051 57.1656073,60.7430678 61.6789281,60.1493601 C63.7767865,59.8761988 65.7854929,59.7451929 67.6883313,59.7368308 C69.6162437,59.7284687 71.42993,59.8427505 73.1015303,60.0573772 C74.7926326,60.2720039 76.3332909,60.5869756 77.6984312,60.9716313 C79.0775015,61.3618618 80.2699097,61.8245635 81.2533679,62.3262883 L74.6366166,82.0524358 L74.6366166,82.0524358 Z" id="Fill-10" sketch:type="MSShapeGroup"></path>
          </g>
        </g>
      </g>
    </svg>
    </div>
    <div class="content">
      <div class="content--block">
        <div class="content--desc">
          <i class="ico ico-svg ico-40-svg">
            <svg viewBox="0 0 40 36" version="1.1" xmlns="http://www.w3.org/2000/svg" xmlns:xlink="http://www.w3.org/1999/xlink" xmlns:sketch="http://www.bohemiancoding.com/sketch/ns">
              <g id="Page-1" stroke="none" stroke-width="1" fill="none" fill-rule="evenodd" sketch:type="MSPage">
                <g id="back-soon-3" sketch:type="MSArtboardGroup" transform="translate(-230.000000, -519.000000)">
                  <g id="what-went-wrong?" sketch:type="MSLayerGroup" transform="translate(231.000000, 444.000000)">
                    <g id="warning" transform="translate(0.000000, 77.000000)" sketch:type="MSShapeGroup">
                      <path d="M17.593,0.492 C18.217,-0.589 19.778,-0.589 20.402,0.492 L37.766,30.567 C38.39,31.648 37.61,33 36.361,33 L1.634,33 C0.386,33 -0.395,31.648 0.229,30.567 L17.593,0.492 L17.593,0.492 Z" id="Stroke-1" stroke="#E9BE33" stroke-width="2" stroke-linejoin="round"></path>
                      <path d="M20.75,28 C20.75,28.966 19.966,29.75 19,29.75 C18.033,29.75 17.25,28.966 17.25,28 C17.25,27.034 18.033,26.25 19,26.25 C19.966,26.25 20.75,27.034 20.75,28" id="Fill-2" fill="#E9BE33"></path>
                      <path d="M19,23 L19,8" id="Stroke-3" stroke="#E9BE33" stroke-width="2" stroke-linecap="round" stroke-linejoin="round"></path>
                    </g>
                  </g>
                </g>
              </g>
            </svg>
          </i>
          <p class="content--desc-large">Oops, something went wrong.</p>
        </div>
      </div>
      <div class="content--block">
        <h3>What happened?</h3>
        <div class="content--desc">
          Oauth error invalid_request: 
        </div>
      </div>
      <div class="content--block">
        <h3>What can I do?</h3>
        <div class="content--desc">
          <ul>
            <li>Press the back button on your browser.</li>
            <li>Return to your <a href="/admin">admin dashboard</a>.</li>
          </ul>
        </div>
      </div>
    </div>
    <div class="request-id">Request ID: 153976c0-f38c-4c27-8263-4fcd9f45cd58</div>
  </div>
</body>
</html>
):
  oauth2 (1.0.0) lib/oauth2/client.rb:113:in `request'
  oauth2 (1.0.0) lib/oauth2/client.rb:138:in `get_token'
  oauth2 (1.0.0) lib/oauth2/strategy/auth_code.rb:29:in `get_token'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:89:in `build_access_token'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:73:in `callback_phase'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:76:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/auth/shopify/callback?code=42d30581c7c16e6ad70e089349a042a4&hmac=b2d0ee2ddcb519df95a6fec20454d504c3d0f75343f72ea426d99412c23b6b6b&shop=letranloc-2.myshopify.com&signature=7eb19dc97d86b13656e0efb5e0828997&timestamp=1443684692" for 1.52.21.220 at 2015-10-01 14:31:32 +0700

OmniAuth::Strategies::OAuth2::CallbackError (csrf_detected | CSRF detected):
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:25:in `raise_out!'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:20:in `call'
  omniauth (1.2.2) lib/omniauth/failure_endpoint.rb:12:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:475:in `fail!'
  omniauth-oauth2 (1.3.0) lib/omniauth/strategies/oauth2.rb:71:in `callback_phase'
  omniauth-shopify-oauth2 (1.1.10) lib/omniauth/strategies/shopify.rb:76:in `callback_phase'
  omniauth (1.2.2) lib/omniauth/strategy.rb:227:in `callback_call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:184:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:31:50 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 2ms (Views: 1.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:31:51 +0700


Started GET "/auth/shopify/callback?code=8db1ad21a6b78ee3ef8958cecd440142&hmac=40a90a53778e45b4ff5dcdc7b011231502f95448cc1e241b7eaace7001f4fa18&shop=letranloc-2.myshopify.com&signature=1ba0dec639e28d00109872bcafee2a96&state=7be01eae5d4f60161b5c2bcdea7b1ea5b20fd9642e66a6ea&timestamp=1443684715" for 1.52.21.220 at 2015-10-01 14:31:55 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"8db1ad21a6b78ee3ef8958cecd440142", "hmac"=>"40a90a53778e45b4ff5dcdc7b011231502f95448cc1e241b7eaace7001f4fa18", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1ba0dec639e28d00109872bcafee2a96", "state"=>"7be01eae5d4f60161b5c2bcdea7b1ea5b20fd9642e66a6ea", "timestamp"=>"1443684715"}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `path' for nil:NilClass):
  app/controllers/sessions_controller.rb:6:in `callback'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:33:30 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:33:31 +0700


Started GET "/auth/shopify/callback?code=f876ac0a142b99c31f368fdeb14ed421&hmac=93feab257d8e070826fb186df1f38e372879cbfd1e6d24f5e3c2760f02387483&shop=letranloc-2.myshopify.com&signature=922e6b8871d915254fc45a6faf60efba&state=1d2bf0c5cccef9c6eb3f2aedd50fa451b1a52b51cb2354d4&timestamp=1443684814" for 1.52.21.220 at 2015-10-01 14:33:35 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"f876ac0a142b99c31f368fdeb14ed421", "hmac"=>"93feab257d8e070826fb186df1f38e372879cbfd1e6d24f5e3c2760f02387483", "shop"=>"letranloc-2.myshopify.com", "signature"=>"922e6b8871d915254fc45a6faf60efba", "state"=>"1d2bf0c5cccef9c6eb3f2aedd50fa451b1a52b51cb2354d4", "timestamp"=>"1443684814"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `path' for nil:NilClass):
  app/controllers/sessions_controller.rb:6:in `callback'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:37:12 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.6ms)
Completed 200 OK in 2ms (Views: 1.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:37:13 +0700


Started GET "/auth/shopify/callback?code=dfa6ed3cb19e0712215533b4961ba62c&hmac=76920332835ed3330d6f6abb6b1b1f79b16e090135a567db944c2758e56796c2&shop=letranloc-2.myshopify.com&signature=8d7f77f753624ec69b18f371676b4b60&state=ff244148ddee28778547bffdcb6723288a047cbe66ce2c65&timestamp=1443685036" for 1.52.21.220 at 2015-10-01 14:37:16 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"dfa6ed3cb19e0712215533b4961ba62c", "hmac"=>"76920332835ed3330d6f6abb6b1b1f79b16e090135a567db944c2758e56796c2", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8d7f77f753624ec69b18f371676b4b60", "state"=>"ff244148ddee28778547bffdcb6723288a047cbe66ce2c65", "timestamp"=>"1443685036"}
Completed 500 Internal Server Error in 0ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `path' for nil:NilClass):
  app/controllers/sessions_controller.rb:5:in `callback'




Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:45:16 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.21.220 at 2015-10-01 14:45:17 +0700


Started GET "/auth/shopify/callback?code=3341cc0218e29019fd70f894f1363dd8&hmac=fae93ba61e05dd7c99f2a0654b38af0ed3514c26d6181a01fbc25b9ccbcbc323&shop=letranloc-2.myshopify.com&signature=19989e5323f6b08cbf2e36eb72936178&state=292130f3ceac7ecdf21da96fe73256a9dc39c1e147121db2&timestamp=1443685520" for 1.52.21.220 at 2015-10-01 14:45:21 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"3341cc0218e29019fd70f894f1363dd8", "hmac"=>"fae93ba61e05dd7c99f2a0654b38af0ed3514c26d6181a01fbc25b9ccbcbc323", "shop"=>"letranloc-2.myshopify.com", "signature"=>"19989e5323f6b08cbf2e36eb72936178", "state"=>"292130f3ceac7ecdf21da96fe73256a9dc39c1e147121db2", "timestamp"=>"1443685520"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["shopify_token", "affb69ed17d8c104ee66c188e7972854"], ["updated_at", "2015-10-01 07:45:23.737078"], ["id", 1]]
  [1m[36m (20.4ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 705ms (ActiveRecord: 41.7ms)


Started GET "/" for 1.52.21.220 at 2015-10-01 14:45:24 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (279.2ms)
Completed 200 OK in 1267ms (Views: 1243.1ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=bf290c8431896e190cb95d245a84122a863462a86eb30d77dd4db58903913058&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5af42e0b5d80555ab94508f3c2e94ce3&timestamp=1443685527" for 1.52.21.220 at 2015-10-01 14:45:29 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"bf290c8431896e190cb95d245a84122a863462a86eb30d77dd4db58903913058", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5af42e0b5d80555ab94508f3c2e94ce3", "timestamp"=>"1443685527"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 157ms (Views: 154.8ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=a66f2e99dc73de622af5e0b26a45cd84b50d4f315e33bb6888b616cc8a72a876&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f29ec7d79c177c4b2436be034b1356d8&timestamp=1443685547" for 1.52.21.220 at 2015-10-01 14:45:48 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"a66f2e99dc73de622af5e0b26a45cd84b50d4f315e33bb6888b616cc8a72a876", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f29ec7d79c177c4b2436be034b1356d8", "timestamp"=>"1443685547"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1772ms (Views: 181.6ms | ActiveRecord: 1.4ms)


Started GET "/?hmac=f42e2993bb9c9992a19526a72ad870507d0b07b79eac12f35e8841f013cd87d3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a2aa113e7c3422ef2bd955188be46ec3&timestamp=1443685663" for 1.52.21.220 at 2015-10-01 14:47:43 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f42e2993bb9c9992a19526a72ad870507d0b07b79eac12f35e8841f013cd87d3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a2aa113e7c3422ef2bd955188be46ec3", "timestamp"=>"1443685663"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1893ms (Views: 297.2ms | ActiveRecord: 1.4ms)


Started POST "/sms/order-creation" for 23.227.55.105 at 2015-10-01 14:49:11 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>1518090820, "email"=>"", "closed_at"=>nil, "created_at"=>"2015-10-01T03:49:10-04:00", "updated_at"=>"2015-10-01T03:49:11-04:00", "number"=>2, "note"=>"", "token"=>"b5c4f57ffac33305bce5a97d7fc57f28", "gateway"=>"bogus", "test"=>true, "total_price"=>"11.00", "subtotal_price"=>"10.00", "total_weight"=>0, "total_tax"=>"1.00", "taxes_included"=>false, "currency"=>"VND", "financial_status"=>"authorized", "confirmed"=>true, "total_discounts"=>"0.00", "total_line_items_price"=>"10.00", "cart_token"=>nil, "buyer_accepts_marketing"=>false, "name"=>"#1002", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>nil, "cancel_reason"=>nil, "total_price_usd"=>"0.00", "checkout_token"=>"06bd9dea58d3bc6a9c0c0ef4b1520f12", "reference"=>nil, "user_id"=>29904580, "location_id"=>2181892, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>"2015-10-01T03:49:10-04:00", "device_id"=>nil, "browser_ip"=>"1.52.21.220", "landing_site_ref"=>nil, "order_number"=>1002, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"direct", "source"=>"shopify_draft_order", "checkout_id"=>3623652100, "source_name"=>"shopify_draft_order", "fulfillment_status"=>nil, "tax_lines"=>[{"title"=>"VAT", "price"=>"1.00", "rate"=>0.1}], "tags"=>"", "line_items"=>[{"id"=>2753247748, "variant_id"=>nil, "title"=>"demo", "quantity"=>1, "price"=>"10.00", "grams"=>0, "sku"=>nil, "variant_title"=>"Custom", "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>nil, "requires_shipping"=>false, "taxable"=>true, "gift_card"=>false, "name"=>"demo - Custom", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>false, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>[{"title"=>"VAT", "price"=>"1.00", "rate"=>0.1}]}], "shipping_lines"=>nil, "fulfillments"=>nil, "client_details"=>{"browser_ip"=>"1.52.21.220", "accept_language"=>"en-US,en;q=0.8,vi;q=0.6", "user_agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36", "session_hash"=>"ddb7be43afc5c2ab8482283ba1910397cbf04a5469980a0edb1eecda921fe7b8", "browser_width"=>nil, "browser_height"=>nil}, "refunds"=>nil, "payment_details"=>{"credit_card_bin"=>"1", "avs_result_code"=>nil, "cvv_result_code"=>nil, "credit_card_number"=>"•••• •••• •••• 1", "credit_card_company"=>"Bogus"}, "sm"=>{"id"=>1518090820, "email"=>"", "closed_at"=>nil, "created_at"=>"2015-10-01T03:49:10-04:00", "updated_at"=>"2015-10-01T03:49:11-04:00", "number"=>2, "note"=>"", "token"=>"b5c4f57ffac33305bce5a97d7fc57f28", "gateway"=>"bogus", "test"=>true, "total_price"=>"11.00", "subtotal_price"=>"10.00", "total_weight"=>0, "total_tax"=>"1.00", "taxes_included"=>false, "currency"=>"VND", "financial_status"=>"authorized", "confirmed"=>true, "total_discounts"=>"0.00", "total_line_items_price"=>"10.00", "cart_token"=>nil, "buyer_accepts_marketing"=>false, "name"=>"#1002", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>nil, "cancel_reason"=>nil, "total_price_usd"=>"0.00", "checkout_token"=>"06bd9dea58d3bc6a9c0c0ef4b1520f12", "reference"=>nil, "user_id"=>29904580, "location_id"=>2181892, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>"2015-10-01T03:49:10-04:00", "device_id"=>nil, "browser_ip"=>"1.52.21.220", "landing_site_ref"=>nil, "order_number"=>1002, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"direct", "source"=>"shopify_draft_order", "checkout_id"=>3623652100, "source_name"=>"shopify_draft_order", "fulfillment_status"=>nil, "tax_lines"=>[{"title"=>"VAT", "price"=>"1.00", "rate"=>0.1}], "tags"=>"", "line_items"=>[{"id"=>2753247748, "variant_id"=>nil, "title"=>"demo", "quantity"=>1, "price"=>"10.00", "grams"=>0, "sku"=>nil, "variant_title"=>"Custom", "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>nil, "requires_shipping"=>false, "taxable"=>true, "gift_card"=>false, "name"=>"demo - Custom", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>false, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>[{"title"=>"VAT", "price"=>"1.00", "rate"=>0.1}]}], "shipping_lines"=>nil, "fulfillments"=>nil, "client_details"=>{"browser_ip"=>"1.52.21.220", "accept_language"=>"en-US,en;q=0.8,vi;q=0.6", "user_agent"=>"Mozilla/5.0 (Macintosh; Intel Mac OS X 10_10_4) AppleWebKit/537.36 (KHTML, like Gecko) Chrome/45.0.2454.101 Safari/537.36", "session_hash"=>"ddb7be43afc5c2ab8482283ba1910397cbf04a5469980a0edb1eecda921fe7b8", "browser_width"=>nil, "browser_height"=>nil}, "refunds"=>nil, "payment_details"=>{"credit_card_bin"=>"1", "avs_result_code"=>nil, "cvv_result_code"=>nil, "credit_card_number"=>"•••• •••• •••• 1", "credit_card_company"=>"Bogus"}}}
Completed 200 OK in 20ms (ActiveRecord: 0.0ms)


Started GET "/" for 113.22.144.177 at 2015-10-02 11:35:23 +0700
Processing by HomeController#index as HTML
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 28ms (ActiveRecord: 0.0ms)


Started GET "/login" for 113.22.144.177 at 2015-10-02 11:35:24 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.haml within layouts/application (7.2ms)
Completed 200 OK in 800ms (Views: 799.2ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=" for 113.22.144.177 at 2015-10-02 11:35:53 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>""}
  Rendered sessions/new.haml within layouts/application (0.3ms)
Completed 200 OK in 38ms (Views: 37.8ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=demo" for 113.22.144.177 at 2015-10-02 11:36:01 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"demo"}
  Rendered inline template (0.5ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=demo.myshopify.com" for 113.22.144.177 at 2015-10-02 11:36:02 +0700


Started GET "/login?shop=letranloc-2.myshopify.com" for 113.22.144.177 at 2015-10-02 11:52:11 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 113.22.144.177 at 2015-10-02 11:52:12 +0700


Started GET "/auth/shopify/callback?code=006e9b27c2d9efdfc974d47cfb86f2a4&hmac=a75b2274f3564b67e06c0656ab3a3427846097785a40a1755b999101610b0d54&shop=letranloc-2.myshopify.com&signature=6c5d7179d4801e09cafc783684b5f9cf&state=1ed22a07a959c1b7a9de36499ee268ed9efef44472b11e6b&timestamp=1443761534" for 113.22.144.177 at 2015-10-02 11:52:15 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"006e9b27c2d9efdfc974d47cfb86f2a4", "hmac"=>"a75b2274f3564b67e06c0656ab3a3427846097785a40a1755b999101610b0d54", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6c5d7179d4801e09cafc783684b5f9cf", "state"=>"1ed22a07a959c1b7a9de36499ee268ed9efef44472b11e6b", "timestamp"=>"1443761534"}
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 176ms (ActiveRecord: 3.9ms)


Started GET "/" for 113.22.144.177 at 2015-10-02 11:52:18 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (220.2ms)
Completed 200 OK in 1341ms (Views: 273.1ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=60626dd582ece945360f5e31bbb2c85ee0a57aae714ae0ee601c9af358c03c91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=196404477659f32f90d5f93485f15fd5&timestamp=1443761542" for 113.22.144.177 at 2015-10-02 11:52:24 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"60626dd582ece945360f5e31bbb2c85ee0a57aae714ae0ee601c9af358c03c91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"196404477659f32f90d5f93485f15fd5", "timestamp"=>"1443761542"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1157ms (Views: 90.5ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 113.22.144.177 at 2015-10-02 12:09:59 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (45.0ms)
Completed 200 OK in 108ms (Views: 106.5ms | ActiveRecord: 0.1ms)


Started GET "/preferences?hmac=f6957796f178a88197b3aee545681117afedda24e5b88480cba0f83a85275aee&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=bb01f701687dadb96080a7a26c12acf6&timestamp=1443765595" for 113.22.144.177 at 2015-10-02 12:59:58 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f6957796f178a88197b3aee545681117afedda24e5b88480cba0f83a85275aee", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bb01f701687dadb96080a7a26c12acf6", "timestamp"=>"1443765595"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (47.0ms)
Completed 200 OK in 117ms (Views: 103.1ms | ActiveRecord: 1.6ms)


Started GET "/preferences?hmac=406e0625d26b1f721f020afbdcf611860d58ac6cadb068862341a5a3bb517edb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5924d523b825ced5d1e9f3d821e97de6&timestamp=1443765655" for 113.22.144.177 at 2015-10-02 13:00:57 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"406e0625d26b1f721f020afbdcf611860d58ac6cadb068862341a5a3bb517edb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5924d523b825ced5d1e9f3d821e97de6", "timestamp"=>"1443765655"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (1.8ms)
Completed 200 OK in 76ms (Views: 73.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=e74939b7721d975c23f7cf349f59d0c096b9d69186789a04726d91a8d42e4c84&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b7beae834f2756791c3b41c1e51ec0bf&timestamp=1443765827" for 113.22.144.177 at 2015-10-02 13:03:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e74939b7721d975c23f7cf349f59d0c096b9d69186789a04726d91a8d42e4c84", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b7beae834f2756791c3b41c1e51ec0bf", "timestamp"=>"1443765827"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (36.7ms)
Completed 500 Internal Server Error in 42ms (ActiveRecord: 0.1ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:21: syntax error, unexpected ')'
));}\n    <div class='form-group'>\n      #{_hamlout.adjust_tabs(1); 
 ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:21: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
));}\n    <div class='form-group'>\n      #{_hamlout.adjust_tabs(1); 
                    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:21: syntax error, unexpected $undefined
));}\n    <div class='form-group'>\n      #{_hamlout.adjust_tabs(1); 
                                   ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:23: syntax error, unexpected '}', expecting keyword_end
));}\n      <div class='col-sm-10...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:23: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
));}\n      <div class='col-sm-10'>\n        #{_ham...
                      ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:23: syntax error, unexpected $undefined
...n      <div class='col-sm-10'>\n        #{_hamlout.adjust_ta...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: syntax error, unexpected '}', expecting keyword_end
));}\n      </div>\n    </div>\n ...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: unknown regexp options - dv
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: syntax error, unexpected $undefined
...));}\n      </div>\n    </div>\n    <div class='form-group'>...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
...iv>\n    </div>\n    <div class='form-group'>\n      #{_haml...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: syntax error, unexpected $undefined
...\n    <div class='form-group'>\n      #{_hamlout.adjust_tabs...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:27: syntax error, unexpected '}', expecting keyword_end
));}\n      <div class='col-sm-10...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:27: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
));}\n      <div class='col-sm-10'>\n        #{_ham...
                      ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:27: syntax error, unexpected $undefined
...n      <div class='col-sm-10'>\n        #{_hamlout.adjust_ta...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:29: syntax error, unexpected '}', expecting keyword_end
));}\n      </div>\n    </div>\n ...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:29: unknown regexp options - dv
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:29: syntax error, unexpected $undefined
...));}\n      </div>\n    </div>\n    <div class='form-group'>...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:29: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
...iv>\n    </div>\n    <div class='form-group'>\n      #{_haml...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:29: syntax error, unexpected $undefined
...\n    <div class='form-group'>\n      #{_hamlout.adjust_tabs...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:31: syntax error, unexpected '}', expecting keyword_end
));}\n      <div class='col-sm-10...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:31: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
));}\n      <div class='col-sm-10'>\n        #{_ham...
                      ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:31: syntax error, unexpected $undefined
...n      <div class='col-sm-10'>\n        #{_hamlout.adjust_ta...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected '}', expecting keyword_end
));}\n      </div>\n    </div>\n ...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: unknown regexp options - dv
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected $undefined
...));}\n      </div>\n    </div>\n    <div class='form-group'>...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
...iv>\n    </div>\n    <div class='form-group'>\n      <div cl...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected $undefined
...\n    <div class='form-group'>\n      <div class='col-sm-off...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
...'form-group'>\n      <div class='col-sm-offset-2 col-sm-10'>...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:33: syntax error, unexpected $undefined
...s='col-sm-offset-2 col-sm-10'>\n        #{
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: syntax error, unexpected '}', expecting keyword_end
));}\n      </div>\n    </div>\n ...
    ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: unknown regexp options - dv
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: syntax error, unexpected $undefined
...));}\n      </div>\n    </div>\n  </div>\n</div>\n<div class...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: unknown regexp options - dv
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: syntax error, unexpected $undefined
...\n    </div>\n  </div>\n</div>\n<div class='row jumbotron'><...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
...>\n  </div>\n</div>\n<div class='row jumbotron'></div>\n", -...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: syntax error, unexpected '<'
...>\n<div class='row jumbotron'></div>\n", -4, false);::Haml::...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:36: unterminated regexp meets end of file):
  app/views/home/preferences.haml:21: syntax error, unexpected ')'
  app/views/home/preferences.haml:21: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:21: syntax error, unexpected $undefined
  app/views/home/preferences.haml:23: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:23: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:23: syntax error, unexpected $undefined
  app/views/home/preferences.haml:25: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:25: unknown regexp options - dv
  app/views/home/preferences.haml:25: syntax error, unexpected $undefined
  app/views/home/preferences.haml:25: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:25: syntax error, unexpected $undefined
  app/views/home/preferences.haml:27: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:27: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:27: syntax error, unexpected $undefined
  app/views/home/preferences.haml:29: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:29: unknown regexp options - dv
  app/views/home/preferences.haml:29: syntax error, unexpected $undefined
  app/views/home/preferences.haml:29: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:29: syntax error, unexpected $undefined
  app/views/home/preferences.haml:31: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:31: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:31: syntax error, unexpected $undefined
  app/views/home/preferences.haml:33: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:33: unknown regexp options - dv
  app/views/home/preferences.haml:33: syntax error, unexpected $undefined
  app/views/home/preferences.haml:33: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:33: syntax error, unexpected $undefined
  app/views/home/preferences.haml:33: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:33: syntax error, unexpected $undefined
  app/views/home/preferences.haml:36: syntax error, unexpected '}', expecting keyword_end
  app/views/home/preferences.haml:36: unknown regexp options - dv
  app/views/home/preferences.haml:36: syntax error, unexpected $undefined
  app/views/home/preferences.haml:36: unknown regexp options - dv
  app/views/home/preferences.haml:36: syntax error, unexpected $undefined
  app/views/home/preferences.haml:36: syntax error, unexpected keyword_class, expecting keyword_do or '{' or '('
  app/views/home/preferences.haml:36: syntax error, unexpected '<'
  app/views/home/preferences.haml:36: unterminated regexp meets end of file




Started GET "/preferences?hmac=a9e27d0c2ab8ee479ba948802e24bafe221bdccfd574d9c9831eeab96287bd39&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b5e1948e007a242fda854e051c7082e2&timestamp=1443765842" for 113.22.144.177 at 2015-10-02 13:04:04 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a9e27d0c2ab8ee479ba948802e24bafe221bdccfd574d9c9831eeab96287bd39", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b5e1948e007a242fda854e051c7082e2", "timestamp"=>"1443765842"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (33.9ms)
Completed 200 OK in 107ms (Views: 105.6ms | ActiveRecord: 0.1ms)


Started GET "/preferences?hmac=be37342a70709efd957eda0d4b4db30fbcab1b554157a366618bdb2f28b9426a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=110aad400fb7f50954a8bec2ddf877af&timestamp=1443766108" for 113.22.144.177 at 2015-10-02 13:08:29 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"be37342a70709efd957eda0d4b4db30fbcab1b554157a366618bdb2f28b9426a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"110aad400fb7f50954a8bec2ddf877af", "timestamp"=>"1443766108"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.9ms)
Completed 200 OK in 145ms (Views: 143.0ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=facf9b3743694bc5f2f21f7d8e5045ff2f0e3f634910c831d978adc8419ff03b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=af80f6408a6b5b9eaa428f812174a3cb&timestamp=1443766922" for 113.22.144.177 at 2015-10-02 13:22:04 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"facf9b3743694bc5f2f21f7d8e5045ff2f0e3f634910c831d978adc8419ff03b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"af80f6408a6b5b9eaa428f812174a3cb", "timestamp"=>"1443766922"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (651.3ms)
Completed 500 Internal Server Error in 660ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (SyntaxError: [stdin]:17:3: unexpected <):
    1: :coffeescript
    2:   window.mainPageTitle = 'Preferences'
    3: 
    4:   ShopifyApp.ready ->
  app/views/home/preferences.haml:1:in `_app_views_home_preferences_haml___428437609254674418_70276653223700'




Started GET "/preferences?hmac=2ab71dfd3ca11f7d8cc222c2563882dc542056c0be33d3e515ae06e43ebe041c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e4b149492167b6e171bd1814a75ee97c&timestamp=1443766979" for 113.22.144.177 at 2015-10-02 13:23:01 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ab71dfd3ca11f7d8cc222c2563882dc542056c0be33d3e515ae06e43ebe041c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e4b149492167b6e171bd1814a75ee97c", "timestamp"=>"1443766979"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (11.0ms)
Completed 500 Internal Server Error in 20ms (ActiveRecord: 0.2ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:20: syntax error, unexpected tSTRING_DEND, expecting keyword_then or ';' or '\n'
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:21: syntax error, unexpected $undefined, expecting ')'
    ShopifyApp.flashError(\"#{flash[:error]}\") if #{flash[:error]}
                           ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:22: syntax error, unexpected keyword_end
  #{end}
       ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:25: syntax error, unexpected ')', expecting tSTRING_DEND
));}\n", 0, false);haml_temp =  form_tag '/pref...
                  ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:46: syntax error, unexpected keyword_ensure, expecting tSTRING_DEND
...:Util.html_safe(_erbout);ensure;@haml_buffer = @haml_buffer....
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:46: syntax error, unexpected keyword_end, expecting tSTRING_DEND
...uffer.upper if @haml_buffer;end;
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:49: syntax error, unexpected keyword_end, expecting tSTRING_DEND):
  app/views/home/preferences.haml:20: syntax error, unexpected tSTRING_DEND, expecting keyword_then or ';' or '\n'
  app/views/home/preferences.haml:21: syntax error, unexpected $undefined, expecting ')'
  app/views/home/preferences.haml:22: syntax error, unexpected keyword_end
  app/views/home/preferences.haml:25: syntax error, unexpected ')', expecting tSTRING_DEND
  app/views/home/preferences.haml:46: syntax error, unexpected keyword_ensure, expecting tSTRING_DEND
  app/views/home/preferences.haml:46: syntax error, unexpected keyword_end, expecting tSTRING_DEND
  app/views/home/preferences.haml:49: syntax error, unexpected keyword_end, expecting tSTRING_DEND




Started GET "/preferences?hmac=b691c37016705b344242b7a63570da7c96219d862a39211ca13d0c9edc44e892&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3c21561d48ad1c580ac4834518f8ae5a&timestamp=1443767164" for 113.22.144.177 at 2015-10-02 13:26:06 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b691c37016705b344242b7a63570da7c96219d862a39211ca13d0c9edc44e892", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3c21561d48ad1c580ac4834518f8ae5a", "timestamp"=>"1443767164"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (34.5ms)
Completed 500 Internal Server Error in 40ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (SyntaxError: [stdin]:18:31: unexpected indentation):
    1: :coffeescript
    2:   window.mainPageTitle = 'Preferences'
    3: 
    4:   ShopifyApp.ready ->
  app/views/home/preferences.haml:1:in `_app_views_home_preferences_haml___428437609254674418_70276687788180'




Started GET "/preferences?hmac=16dfb9badc9960f44aed80195c87c5a4d2e46d70a9c18b093d66c6e990c3825c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=cebae93bd46b37b296ae6982628b0c79&timestamp=1443767218" for 113.22.144.177 at 2015-10-02 13:26:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"16dfb9badc9960f44aed80195c87c5a4d2e46d70a9c18b093d66c6e990c3825c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"cebae93bd46b37b296ae6982628b0c79", "timestamp"=>"1443767218"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.3ms)
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (SyntaxError: [stdin]:17:3: unexpected if):
    1: :coffeescript
    2:   window.mainPageTitle = 'Preferences'
    3: 
    4:   ShopifyApp.ready ->
  app/views/home/preferences.haml:1:in `_app_views_home_preferences_haml___428437609254674418_70276688248840'




Started GET "/preferences?hmac=0ca1c2fd11117c3a99d58f02eb6f4b07e21ef403bf853376e6e141fc076e5074&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=02b911be75bdefc7c8161d681fb2f967&timestamp=1443767243" for 113.22.144.177 at 2015-10-02 13:27:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0ca1c2fd11117c3a99d58f02eb6f4b07e21ef403bf853376e6e141fc076e5074", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"02b911be75bdefc7c8161d681fb2f967", "timestamp"=>"1443767243"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.7ms)
Completed 200 OK in 409ms (Views: 407.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=3a8d5b8fce83e96c56d3c69351a12f942f032a221e99048baa91f0197e23506a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=51d7bd85093c7d09763a917d58242ce2&timestamp=1443767334" for 113.22.144.177 at 2015-10-02 13:28:57 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3a8d5b8fce83e96c56d3c69351a12f942f032a221e99048baa91f0197e23506a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"51d7bd85093c7d09763a917d58242ce2", "timestamp"=>"1443767334"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (33.2ms)
Completed 200 OK in 581ms (Views: 578.4ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=3f4b9f539dfde45f9898b1e0624d5fa2a0f72f782ad23f852410f37f7d7576b2&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3b8004444524c33e243ca89b8994e649&timestamp=1443767425" for 113.22.144.177 at 2015-10-02 13:30:28 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3f4b9f539dfde45f9898b1e0624d5fa2a0f72f782ad23f852410f37f7d7576b2", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3b8004444524c33e243ca89b8994e649", "timestamp"=>"1443767425"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (11.0ms)
Completed 200 OK in 97ms (Views: 78.9ms | ActiveRecord: 1.4ms)


Started GET "/preferences?hmac=0f0976b846d7c6d30d487d8d3b8e9b00fa55bd0da58f25d65c68130efa09cebd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5e089a7fd229e3adfc4664f065c1496d&timestamp=1443767630" for 113.22.144.177 at 2015-10-02 13:33:52 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0f0976b846d7c6d30d487d8d3b8e9b00fa55bd0da58f25d65c68130efa09cebd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5e089a7fd229e3adfc4664f065c1496d", "timestamp"=>"1443767630"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (47.3ms)
Completed 200 OK in 108ms (Views: 105.6ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=0e308ffd2d6c346317e89fa458fe4ca5a6d603372b67e458786210f1ba30ff6f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=48813059fb083475cc113c37e0dad64b&timestamp=1443767650" for 113.22.144.177 at 2015-10-02 13:34:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0e308ffd2d6c346317e89fa458fe4ca5a6d603372b67e458786210f1ba30ff6f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"48813059fb083475cc113c37e0dad64b", "timestamp"=>"1443767650"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (88.4ms)
Completed 200 OK in 138ms (Views: 136.5ms | ActiveRecord: 0.1ms)


Started GET "/preferences?hmac=9b34e2ff7cfa3c12014cf29d285b14e2371bc0525e392099df408dae85f9422f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6285be9da1e00464fe71aa167c05176a&timestamp=1443767668" for 113.22.144.177 at 2015-10-02 13:34:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9b34e2ff7cfa3c12014cf29d285b14e2371bc0525e392099df408dae85f9422f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6285be9da1e00464fe71aa167c05176a", "timestamp"=>"1443767668"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (15.8ms)
Completed 200 OK in 80ms (Views: 77.3ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=da19496bf7f3e0de15be1a8dbeff1d6cff3c1acca8daca9b759e5438284f6944&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8c9ef9c952aa04ca67dfa00910ff37c6&timestamp=1443767687" for 113.22.144.177 at 2015-10-02 13:34:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"da19496bf7f3e0de15be1a8dbeff1d6cff3c1acca8daca9b759e5438284f6944", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8c9ef9c952aa04ca67dfa00910ff37c6", "timestamp"=>"1443767687"}
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (19.2ms)
Completed 200 OK in 73ms (Views: 70.4ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=4a12eeae5ca6cc2479ed4780f2827219329fa0d7b71dd4998074a2689002117c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=af1292d8393c175f4ac7e97c585455b3&timestamp=1443767725" for 113.22.144.177 at 2015-10-02 13:35:27 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4a12eeae5ca6cc2479ed4780f2827219329fa0d7b71dd4998074a2689002117c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"af1292d8393c175f4ac7e97c585455b3", "timestamp"=>"1443767725"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.3ms)
Completed 200 OK in 77ms (Views: 74.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=bf994868d0439c0f8f4b15f6e736ba36f2c75ae5a3e7e9312ec091c8cde90dd6&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=87691e577b4468cc3fd9c01a42dc22c3&timestamp=1443767757" for 113.22.144.177 at 2015-10-02 13:35:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"bf994868d0439c0f8f4b15f6e736ba36f2c75ae5a3e7e9312ec091c8cde90dd6", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"87691e577b4468cc3fd9c01a42dc22c3", "timestamp"=>"1443767757"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (13.9ms)
Completed 200 OK in 54ms (Views: 52.8ms | ActiveRecord: 0.1ms)


Started GET "/preferences?hmac=b3117320174f7b7e8cfbce89ca1bc2c61d34ca0f5e888d7d5806d940aadf6ed9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3559cf5cc9346d35457a8d11814aeb16&timestamp=1443767782" for 113.22.144.177 at 2015-10-02 13:36:24 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b3117320174f7b7e8cfbce89ca1bc2c61d34ca0f5e888d7d5806d940aadf6ed9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3559cf5cc9346d35457a8d11814aeb16", "timestamp"=>"1443767782"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.5ms)
Completed 200 OK in 85ms (Views: 82.7ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=af1d749dcff40395e86ce2cc5c8f1e842db2ad7a5e681a95f3d7be6e3aabd26b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6df4dd88dc8e402d1b335132557166ac&timestamp=1443768078" for 113.22.144.177 at 2015-10-02 13:41:20 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"af1d749dcff40395e86ce2cc5c8f1e842db2ad7a5e681a95f3d7be6e3aabd26b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6df4dd88dc8e402d1b335132557166ac", "timestamp"=>"1443768078"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.0ms)
Completed 200 OK in 240ms (Views: 237.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=76ce63e185b2ac21de01b08098ffa8daa226bf64f604dca2e2f915c1693a8d30&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=358f4f3df4cbd8ab62e379880a65eba4&timestamp=1443768143" for 113.22.144.177 at 2015-10-02 13:42:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"76ce63e185b2ac21de01b08098ffa8daa226bf64f604dca2e2f915c1693a8d30", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"358f4f3df4cbd8ab62e379880a65eba4", "timestamp"=>"1443768143"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.7ms)
Completed 200 OK in 293ms (Views: 290.6ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=15b4fb52c9b0a4554cbedbdd0166ef889da78647773c5df8f05a45e5b1b74b2a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=517b43468d2a2b8a325943d1ffa92d31&timestamp=1443768372" for 113.22.144.177 at 2015-10-02 13:46:14 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"15b4fb52c9b0a4554cbedbdd0166ef889da78647773c5df8f05a45e5b1b74b2a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"517b43468d2a2b8a325943d1ffa92d31", "timestamp"=>"1443768372"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.0ms)
Completed 200 OK in 240ms (Views: 238.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=5df84244b85ee4c8882ad952512b586758f9bda93140faccef62ab765012177d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2ee00052f2184036f285a05edfe6fa05&timestamp=1443768508" for 113.22.144.177 at 2015-10-02 13:48:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"5df84244b85ee4c8882ad952512b586758f9bda93140faccef62ab765012177d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2ee00052f2184036f285a05edfe6fa05", "timestamp"=>"1443768508"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (18.8ms)
Completed 200 OK in 251ms (Views: 249.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=17aa547cc25dc59838dd5748fdaf4939e0fbe28030770a264301df1132ac46ba&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4840faa17d5d799f39f34978f39ae946&timestamp=1443768588" for 113.22.144.177 at 2015-10-02 13:49:50 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"17aa547cc25dc59838dd5748fdaf4939e0fbe28030770a264301df1132ac46ba", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4840faa17d5d799f39f34978f39ae946", "timestamp"=>"1443768588"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (18.0ms)
Completed 200 OK in 133ms (Views: 131.1ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=97911a020fdf2288f010402c135c189532821c8295d534f46b00e5f1d0f74c82&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=755df78b04418f23a9144d514238944f&timestamp=1443768611" for 113.22.144.177 at 2015-10-02 13:50:13 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"97911a020fdf2288f010402c135c189532821c8295d534f46b00e5f1d0f74c82", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"755df78b04418f23a9144d514238944f", "timestamp"=>"1443768611"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.1ms)
Completed 200 OK in 118ms (Views: 116.5ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=60160c4112bb4e15f0ff3968d3d27c216ccfe42643af302ea07c05188da08fd6&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f73aa17fd6d4af91ea64af450c8274de&timestamp=1443768665" for 113.22.144.177 at 2015-10-02 13:51:07 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"60160c4112bb4e15f0ff3968d3d27c216ccfe42643af302ea07c05188da08fd6", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f73aa17fd6d4af91ea64af450c8274de", "timestamp"=>"1443768665"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (28.5ms)
Completed 200 OK in 85ms (Views: 82.8ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=284da42cc31fb6225dddb66af5a7a970f290014e32badf74d917d3482afd7e11&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8e0ce84bc8152d7b36107223a6df5879&timestamp=1443768726" for 113.22.144.177 at 2015-10-02 13:52:07 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"284da42cc31fb6225dddb66af5a7a970f290014e32badf74d917d3482afd7e11", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8e0ce84bc8152d7b36107223a6df5879", "timestamp"=>"1443768726"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (26.8ms)
Completed 200 OK in 104ms (Views: 102.1ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=47a039f7c563908b18e2a5ea21ad3e97f3ba56a8797cbe3696c06819399bb977&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a3a81f6773cf91b60c15e11ad5501721&timestamp=1443768731" for 113.22.144.177 at 2015-10-02 13:52:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"47a039f7c563908b18e2a5ea21ad3e97f3ba56a8797cbe3696c06819399bb977", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a3a81f6773cf91b60c15e11ad5501721", "timestamp"=>"1443768731"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (11.9ms)
Completed 200 OK in 84ms (Views: 81.8ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=ed4d779484b1d1b8de19c4a73acce1a8eb474c6b87c6693359984ad5913502d8&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=256933b242c4ac084304685db745b5f9&timestamp=1443768768" for 113.22.144.177 at 2015-10-02 13:52:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ed4d779484b1d1b8de19c4a73acce1a8eb474c6b87c6693359984ad5913502d8", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"256933b242c4ac084304685db745b5f9", "timestamp"=>"1443768768"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.5ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.4ms)

ActionView::Template::Error (The line was indented 2 levels deeper than the previous line.):
    43:     .col-sm-9.panel
    44:       .panel-body
    45:         .form-group
    46:             %a{href: "#", class: 'right'} Test login
    47:           = label_tag :username, 'Username'
    48:           = text_field_tag :username, nil, class: 'form-control input-sm'
    49:         .form-group
  app/views/home/preferences.haml:46




Started GET "/preferences?hmac=f6be1a0e4ee4082e2a93f1ad9aea08d677716eac20ed983dfab7c5f64e3d68ab&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=44751f716231b98b2a81765853f2fe77&timestamp=1443768783" for 113.22.144.177 at 2015-10-02 13:53:04 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f6be1a0e4ee4082e2a93f1ad9aea08d677716eac20ed983dfab7c5f64e3d68ab", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"44751f716231b98b2a81765853f2fe77", "timestamp"=>"1443768783"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (17.1ms)
Completed 200 OK in 75ms (Views: 72.8ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=92aab8bdc2e9a08448477aff5c7ee9ff2920876a9248e4b3706bd84503ec7276&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b196991d4385b107f9063e3f9ef44d74&timestamp=1443768870" for 113.22.144.177 at 2015-10-02 13:54:32 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"92aab8bdc2e9a08448477aff5c7ee9ff2920876a9248e4b3706bd84503ec7276", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b196991d4385b107f9063e3f9ef44d74", "timestamp"=>"1443768870"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.2ms)
Completed 200 OK in 147ms (Views: 145.1ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=a0596c3e357ad2ab5bf51e6e90522eac5470afa1f706facd59cf71572ddc70ed&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f19b429f71961f35b2406c7ed68c1132&timestamp=1443768946" for 113.22.144.177 at 2015-10-02 13:55:48 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a0596c3e357ad2ab5bf51e6e90522eac5470afa1f706facd59cf71572ddc70ed", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f19b429f71961f35b2406c7ed68c1132", "timestamp"=>"1443768946"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (15.2ms)
Completed 200 OK in 71ms (Views: 69.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=c4afc9b9ada8ad35da859c7defdc1b5c8e1b317fb7603060da09261cafabceef&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6623ef543b0821e6964df9bf5d3112cb&timestamp=1443768979" for 113.22.144.177 at 2015-10-02 13:56:21 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c4afc9b9ada8ad35da859c7defdc1b5c8e1b317fb7603060da09261cafabceef", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6623ef543b0821e6964df9bf5d3112cb", "timestamp"=>"1443768979"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (21.3ms)
Completed 200 OK in 92ms (Views: 89.5ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=a835ce0ccd8e5393953e5e24dbf833506ffc4418157c8201d6962f99da3b473a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b76dae3d12810384d9fd905d1dae9c83&timestamp=1443769005" for 113.22.144.177 at 2015-10-02 13:56:47 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a835ce0ccd8e5393953e5e24dbf833506ffc4418157c8201d6962f99da3b473a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b76dae3d12810384d9fd905d1dae9c83", "timestamp"=>"1443769005"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (22.5ms)
Completed 200 OK in 74ms (Views: 72.4ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=4affb36cc6ed82030ff10679844f0ef1590fec27983b9c2ef376dc75700d2d4b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=35c364ac1ccc6f85a97d3aa447381c69&timestamp=1443769030" for 113.22.144.177 at 2015-10-02 13:57:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4affb36cc6ed82030ff10679844f0ef1590fec27983b9c2ef376dc75700d2d4b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"35c364ac1ccc6f85a97d3aa447381c69", "timestamp"=>"1443769030"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (21.7ms)
Completed 200 OK in 133ms (Views: 130.9ms | ActiveRecord: 0.2ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 13:57:19 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MTgI8Rn6Xutm70v1GLzbemQVDLNOkHjiV/yazulYt+2+w6gpA9lwFWlIx6FMEdDyoXCwfuGMdAUEQUOc1sgauA==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 0.2ms)

ActionView::MissingTemplate (Missing template home/update_preferences, application/update_preferences with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:498:in `block (2 levels) in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `block (2 levels) in halting'
  shopify_app (6.0.6) lib/shopify_app/login_protection.rb:13:in `shopify_session'
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `block in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/preferences" for 113.22.144.177 at 2015-10-02 13:58:07 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MTgI8Rn6Xutm70v1GLzbemQVDLNOkHjiV/yazulYt+2+w6gpA9lwFWlIx6FMEdDyoXCwfuGMdAUEQUOc1sgauA==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.1ms)
Completed 200 OK in 126ms (Views: 114.8ms | ActiveRecord: 1.0ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 13:58:19 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iby5ZaZFRJUDnrSD/czY0ikt7Xvj+vWjDMEbMkN7TEQGRxm9vGZqaww5ONepYdNa7EhRtkzm+URffMJgfOvhEQ==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.7ms)
Completed 200 OK in 49ms (Views: 47.1ms | ActiveRecord: 0.2ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 13:58:26 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"781i8L8mQuwxTHpGZHmUuvK6ea+jfYD8NtS5P7vfQ0ZgNsIopQVsEj7r9hIw1J8yN9/FYgxhjBtlaWBthE/uEw==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.8ms)
Completed 200 OK in 44ms (Views: 42.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=d6c14c26bf307c2b8b9dc337ef4e770292e1a0b5447d745e238dc6f5cb5629aa&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=61c246f266cac25807bec0073c1c6f31&timestamp=1443769146" for 113.22.144.177 at 2015-10-02 13:59:08 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d6c14c26bf307c2b8b9dc337ef4e770292e1a0b5447d745e238dc6f5cb5629aa", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"61c246f266cac25807bec0073c1c6f31", "timestamp"=>"1443769146"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (18.1ms)
Completed 200 OK in 66ms (Views: 64.5ms | ActiveRecord: 0.2ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 14:01:08 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"V8Sbf2ID4a4g1tlLXCzgrZ5rAf4I9I8TAIsEALEBTwHYPzuneCDPUC9xVR8IgeslWw69M6fog/RTNt1SjpHiVA==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.1ms)
Completed 200 OK in 54ms (Views: 45.0ms | ActiveRecord: 1.1ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 14:01:59 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"t6FqXXzigWFRBmxI55RUoak/AJwCXB62SKzD8ukvQ8o4WsqFZsGvn16h4ByzOV8pbFq8Ua1AElEbERqg1r/unw==", "api_key"=>"", "api_secret"=>"", "username"=>"demo", "password"=>"[FILTERED]"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.2ms)
Completed 200 OK in 69ms (Views: 59.6ms | ActiveRecord: 0.8ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 14:02:06 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"YhgvEzVTWJWhi+MBDJuLx3AetUq3FiNbkHJGwYfSyI7t44/LL3B2a64sb1VYNoBPtXsJhxgKL7zDz5+TuEJl2w==", "api_key"=>"", "api_secret"=>"", "username"=>"asdad", "password"=>"[FILTERED]"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.3ms)
Completed 200 OK in 56ms (Views: 54.2ms | ActiveRecord: 0.2ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 14:02:30 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"8zLJVVPSHPv/5AEOmDYmT1SZ6bsD8P9zRK8HjjaouD18yWmNSfEyBfBDjVrMmy3HkfxVdqzs85QXEt7cCTgVaA==", "api_key"=>"", "api_secret"=>"", "username"=>"dsada", "password"=>"[FILTERED]"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.5ms)
Completed 200 OK in 60ms (Views: 49.4ms | ActiveRecord: 0.9ms)


Started GET "/preferences?hmac=96f6dfce9bbd7ca54ac12c09ae5c13641a636a10f38d1ea4c7b02852c68eea06&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=034e75d658d17b7e1c2feb652dc55c52&timestamp=1443785975" for 113.22.144.177 at 2015-10-02 18:39:39 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"96f6dfce9bbd7ca54ac12c09ae5c13641a636a10f38d1ea4c7b02852c68eea06", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"034e75d658d17b7e1c2feb652dc55c52", "timestamp"=>"1443785975"}
  [1m[35mShop Load (0.5ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (22.1ms)
Completed 200 OK in 314ms (Views: 274.8ms | ActiveRecord: 1.9ms)


Started POST "/preferences" for 113.22.144.177 at 2015-10-02 18:39:50 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Uyac8ZWRiYbphnB/cQyqJjlC8JoAqL8IQR2nxkO+QErc3Twpj7KneOYh/CsloaGu/CdMV6+0s+8SoH6UfC7tHw==", "api_key"=>"", "api_secret"=>"", "username"=>"", "password"=>"[FILTERED]"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (24.2ms)
Completed 200 OK in 75ms (Views: 73.2ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=97a38934fbd323b990f7d78b03fcfa7c0fe07ef6b0f6ecaa1847ef1feb0e2b3d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=024e3ae80b3ee237ce029c23f9d76a7b&timestamp=1443944214" for 1.52.234.97 at 2015-10-04 14:36:56 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"97a38934fbd323b990f7d78b03fcfa7c0fe07ef6b0f6ecaa1847ef1feb0e2b3d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"024e3ae80b3ee237ce029c23f9d76a7b", "timestamp"=>"1443944214"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 45ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 1.52.234.97 at 2015-10-04 14:36:58 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (3.5ms)
Completed 200 OK in 49ms (Views: 36.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 1.52.234.97 at 2015-10-04 14:36:59 +0700


Started GET "/auth/shopify/callback?code=950544e93ff35e6ee08d9d42614cbb16&hmac=78adae41150158b3b65feb37f682e357986e794152c1ed54c5e17d5a266896a8&shop=letranloc-2.myshopify.com&signature=485ca509eb3b7fb2a4e25cfc381f5452&state=058938d4e57b88a9b467da70b9aa639b887e6bb3241c0f06&timestamp=1443944220" for 1.52.234.97 at 2015-10-04 14:37:00 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"950544e93ff35e6ee08d9d42614cbb16", "hmac"=>"78adae41150158b3b65feb37f682e357986e794152c1ed54c5e17d5a266896a8", "shop"=>"letranloc-2.myshopify.com", "signature"=>"485ca509eb3b7fb2a4e25cfc381f5452", "state"=>"058938d4e57b88a9b467da70b9aa639b887e6bb3241c0f06", "timestamp"=>"1443944220"}
  [1m[36mShop Load (4.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=97a38934fbd323b990f7d78b03fcfa7c0fe07ef6b0f6ecaa1847ef1feb0e2b3d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=024e3ae80b3ee237ce029c23f9d76a7b&timestamp=1443944214
Completed 302 Found in 204ms (ActiveRecord: 7.5ms)


Started GET "/?hmac=97a38934fbd323b990f7d78b03fcfa7c0fe07ef6b0f6ecaa1847ef1feb0e2b3d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=024e3ae80b3ee237ce029c23f9d76a7b&timestamp=1443944214" for 1.52.234.97 at 2015-10-04 14:37:03 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"97a38934fbd323b990f7d78b03fcfa7c0fe07ef6b0f6ecaa1847ef1feb0e2b3d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"024e3ae80b3ee237ce029c23f9d76a7b", "timestamp"=>"1443944214"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (312.3ms)
Completed 200 OK in 2296ms (Views: 1173.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=92459c576cb53c74563bdf9757119ea7fc069fe35ded80d073d76a8448ff079f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=750ecbd956f3f7b865b1a65d8e5fd6e0&timestamp=1443944227" for 1.52.234.97 at 2015-10-04 14:37:09 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"92459c576cb53c74563bdf9757119ea7fc069fe35ded80d073d76a8448ff079f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"750ecbd956f3f7b865b1a65d8e5fd6e0", "timestamp"=>"1443944227"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 1151ms (Views: 93.9ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 1.52.234.97 at 2015-10-04 14:37:17 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (82.7ms)
Completed 200 OK in 182ms (Views: 180.4ms | ActiveRecord: 0.1ms)


Started GET "/preferences?hmac=4eac132582c165c8be37372a26bbc1c4b88bedc6714037990d8fb6bb583d4a3a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d7cb40285301122c16cd1b4b7c5af4bc&timestamp=1443944416" for 1.52.234.97 at 2015-10-04 14:40:18 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4eac132582c165c8be37372a26bbc1c4b88bedc6714037990d8fb6bb583d4a3a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d7cb40285301122c16cd1b4b7c5af4bc", "timestamp"=>"1443944416"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (27.3ms)
Completed 500 Internal Server Error in 37ms (ActiveRecord: 0.3ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/views/home/preferences.haml:64: syntax error, unexpected ':', expecting ')'
... label_tag :sms_order_creation: 'Order creation'
...                               ^):
  app/views/home/preferences.haml:64: syntax error, unexpected ':', expecting ')'




Started GET "/preferences?hmac=6d4509eac7996034bd9113a159b73cc21d97507ad2bb7e47ac80be282ffb6422&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=00b5b9c89d81e83f90031438908a0d62&timestamp=1443944457" for 1.52.234.97 at 2015-10-04 14:40:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6d4509eac7996034bd9113a159b73cc21d97507ad2bb7e47ac80be282ffb6422", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"00b5b9c89d81e83f90031438908a0d62", "timestamp"=>"1443944457"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (94.2ms)
Completed 500 Internal Server Error in 103ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (undefined local variable or method `nill' for #<#<Class:0x007f8780972188>:0x007f877d182750>):
    62:         .row
    63:           .form-group
    64:             = label_tag :sms_order_creation, 'Order creation'
    65:             = text_field_tag :sms_order_creation, nill, class: 'form-control'
  app/views/home/preferences.haml:65:in `block in _app_views_home_preferences_haml__1085269880284528612_70109948021380'
  app/views/home/preferences.haml:23:in `_app_views_home_preferences_haml__1085269880284528612_70109948021380'




Started GET "/preferences?hmac=1d7b850580e05959f4689d80e15039b6c098031fcd689756e825068edbd06b25&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c0568c7787d68bfcf14fa5eb7d906340&timestamp=1443944551" for 1.52.234.97 at 2015-10-04 14:42:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"1d7b850580e05959f4689d80e15039b6c098031fcd689756e825068edbd06b25", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c0568c7787d68bfcf14fa5eb7d906340", "timestamp"=>"1443944551"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (55.6ms)
Completed 200 OK in 211ms (Views: 209.2ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=61b63c3a3fdbb5795c431b35787625e1e43c62f8e7768bf9be2147276b6b3e7b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6adfb685df8e78a2fd14a3e0d95e8773&timestamp=1443944571" for 1.52.234.97 at 2015-10-04 14:42:53 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"61b63c3a3fdbb5795c431b35787625e1e43c62f8e7768bf9be2147276b6b3e7b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6adfb685df8e78a2fd14a3e0d95e8773", "timestamp"=>"1443944571"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (40.1ms)
Completed 200 OK in 165ms (Views: 162.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=4949ec99dd8f78827ce11695e3e592b8b70945d49f6fca07d707a1594d1ac530&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=12270a86e6dcf3f5303a1c43f984f290&timestamp=1443944591" for 1.52.234.97 at 2015-10-04 14:43:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4949ec99dd8f78827ce11695e3e592b8b70945d49f6fca07d707a1594d1ac530", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"12270a86e6dcf3f5303a1c43f984f290", "timestamp"=>"1443944591"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (24.1ms)
Completed 200 OK in 91ms (Views: 88.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=23976df6347200e0afa8d3ea9544f2ef1b36cf736df663b9d80f39da25c4fe53&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=92613cd14ae239bc8190d3852c588281&timestamp=1443944720" for 1.52.234.97 at 2015-10-04 14:45:22 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"23976df6347200e0afa8d3ea9544f2ef1b36cf736df663b9d80f39da25c4fe53", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"92613cd14ae239bc8190d3852c588281", "timestamp"=>"1443944720"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (44.9ms)
Completed 500 Internal Server Error in 52ms (ActiveRecord: 0.1ms)

ActionView::Template::Error (undefined local variable or method `nill' for #<#<Class:0x007f8780972188>:0x007f8783a502c8>):
    46:         .form-group
    47:           = label_tag :phonenumber, 'Phone number'
    48:           %abbr{title: 'required'} *
    49:           = text_field_tag :phonenumber, nill, class: 'form-control input-sm'
    50:         .form-group
    51:           .pull-right.help-block
    52:             %a{href: "#"} Test login
  app/views/home/preferences.haml:49:in `block in _app_views_home_preferences_haml__1085269880284528612_70109955501400'
  app/views/home/preferences.haml:23:in `_app_views_home_preferences_haml__1085269880284528612_70109955501400'




Started GET "/preferences?hmac=4cfe5670e7268d65a674cf35821b681fa839c8a497037895f6939fb669945bcd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=263761bf526ab2d62f7047364eaa497f&timestamp=1443944735" for 1.52.234.97 at 2015-10-04 14:45:36 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4cfe5670e7268d65a674cf35821b681fa839c8a497037895f6939fb669945bcd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"263761bf526ab2d62f7047364eaa497f", "timestamp"=>"1443944735"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (30.8ms)
Completed 200 OK in 176ms (Views: 173.8ms | ActiveRecord: 0.3ms)


Started POST "/preferences" for 1.52.234.97 at 2015-10-04 14:54:01 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"p/f6WfHwNLX2JflFbs/e7L+2WHCgbfySQzo2GVvKZiokmP63phO8zIvowdRaRm61mvT9YTMHnaEG3FyP6UjJbQ==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>""}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (30.8ms)
Completed 200 OK in 258ms (Views: 255.2ms | ActiveRecord: 0.2ms)


Started POST "/sms/order-creation" for 23.227.55.102 at 2015-10-04 15:22:05 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:22:04-04:00", "updated_at"=>"2015-10-04T04:22:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:22:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:22:04-04:00", "updated_at"=>"2015-10-04T04:22:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:22:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 30ms (ActiveRecord: 0.0ms)

NameError (undefined local variable or method `request' for WebhookService:Class):
  app/services/webhook_service.rb:2:in `<class:WebhookService>'
  app/services/webhook_service.rb:1:in `<top (required)>'
  app/controllers/sms_controller.rb:15:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.99 at 2015-10-04 15:22:06 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:22:06-04:00", "updated_at"=>"2015-10-04T04:22:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:22:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:22:06-04:00", "updated_at"=>"2015-10-04T04:22:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:22:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NameError (undefined local variable or method `request' for WebhookService:Class):
  app/services/webhook_service.rb:2:in `<class:WebhookService>'
  app/services/webhook_service.rb:1:in `<top (required)>'
  app/controllers/sms_controller.rb:15:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.109 at 2015-10-04 15:23:10 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:23:09-04:00", "updated_at"=>"2015-10-04T04:23:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:23:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:23:09-04:00", "updated_at"=>"2015-10-04T04:23:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:23:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NameError (undefined local variable or method `request' for WebhookService:Class):
  app/services/webhook_service.rb:2:in `<class:WebhookService>'
  app/services/webhook_service.rb:1:in `<top (required)>'
  app/controllers/sms_controller.rb:15:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.103 at 2015-10-04 15:25:13 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:25:12-04:00", "updated_at"=>"2015-10-04T04:25:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:25:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:25:12-04:00", "updated_at"=>"2015-10-04T04:25:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:25:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NameError (undefined local variable or method `request' for WebhookService:Class):
  app/services/webhook_service.rb:2:in `<class:WebhookService>'
  app/services/webhook_service.rb:1:in `<top (required)>'
  app/controllers/sms_controller.rb:15:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.109 at 2015-10-04 15:30:18 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:30:17-04:00", "updated_at"=>"2015-10-04T04:30:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:30:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:30:17-04:00", "updated_at"=>"2015-10-04T04:30:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:30:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 11ms (ActiveRecord: 1.3ms)

NameError (undefined local variable or method `request' for WebhookService:Class):
  app/services/webhook_service.rb:2:in `<class:WebhookService>'
  app/services/webhook_service.rb:1:in `<top (required)>'
  app/controllers/sms_controller.rb:15:in `order_creation'




Started POST "/sms/order-creation" for 23.227.55.105 at 2015-10-04 15:48:29 +0700
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:48:28-04:00", "updated_at"=>"2015-10-04T04:48:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:48:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:48:28-04:00", "updated_at"=>"2015-10-04T04:48:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:48:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 174ms (Views: 31.6ms | ActiveRecord: 4.4ms)


Started POST "/sms/order-creation" for 23.227.55.109 at 2015-10-04 15:52:20 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:52:19-04:00", "updated_at"=>"2015-10-04T04:52:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:52:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T04:52:19-04:00", "updated_at"=>"2015-10-04T04:52:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T04:52:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.5ms | ActiveRecord: 0.2ms)


Started POST "/sms/order-payment" for 23.227.55.111 at 2015-10-04 16:24:08 +0700
Processing by SmsController#order_payment as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:24:07-04:00", "updated_at"=>"2015-10-04T05:24:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:24:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:24:07-04:00", "updated_at"=>"2015-10-04T05:24:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:24:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 163ms (ActiveRecord: 0.0ms)

ActionView::MissingTemplate (Missing template sms/order_payment, application/order_payment with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-payment" for 23.227.55.111 at 2015-10-04 16:24:10 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_payment as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:24:09-04:00", "updated_at"=>"2015-10-04T05:24:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:24:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:24:09-04:00", "updated_at"=>"2015-10-04T05:24:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:24:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
Completed 500 Internal Server Error in 75ms (ActiveRecord: 0.0ms)

ActionView::MissingTemplate (Missing template sms/order_payment, application/order_payment with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-fulfillment" for 23.227.55.96 at 2015-10-04 16:25:35 +0700
Processing by SmsController#order_fulfillment as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:25:34-04:00", "updated_at"=>"2015-10-04T05:25:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:25:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:25:34-04:00", "updated_at"=>"2015-10-04T05:25:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:25:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Can't verify CSRF token authenticity
  Rendered text template (0.0ms)
Completed 200 OK in 29ms (Views: 28.5ms | ActiveRecord: 0.0ms)


Started POST "/sms/customer-creation" for 23.227.55.103 at 2015-10-04 16:26:12 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.6ms | ActiveRecord: 0.0ms)


Started POST "/sms/order-payment" for 23.227.55.99 at 2015-10-04 16:27:15 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_payment as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:27:14-04:00", "updated_at"=>"2015-10-04T05:27:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:27:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-04T05:27:14-04:00", "updated_at"=>"2015-10-04T05:27:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-04T05:27:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  Rendered text template (0.0ms)
Completed 200 OK in 1ms (Views: 0.3ms | ActiveRecord: 0.0ms)


Started GET "/?hmac=03383a6ab526011673130c222ef6e7ad0ddac5652fbe0af02b82124bfcd748a8&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0a9a1fd192c4284fa2fe0995b5aa327d&timestamp=1443951121" for 1.52.234.97 at 2015-10-04 16:32:04 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"03383a6ab526011673130c222ef6e7ad0ddac5652fbe0af02b82124bfcd748a8", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0a9a1fd192c4284fa2fe0995b5aa327d", "timestamp"=>"1443951121"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (126.0ms)
Completed 200 OK in 3027ms (Views: 1197.5ms | ActiveRecord: 15.5ms)


Started GET "/preferences" for 1.52.234.97 at 2015-10-04 16:32:14 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (32.6ms)
Completed 200 OK in 101ms (Views: 99.7ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=0ba6d68c089328745a054f03d5c71e6695fb7d3f5b847538c7027fbe559c3cdc&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f5b76fc3d36e8a0a9d357c5ff897f99c&timestamp=1444014168" for 113.173.207.242 at 2015-10-05 10:02:49 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"0ba6d68c089328745a054f03d5c71e6695fb7d3f5b847538c7027fbe559c3cdc", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f5b76fc3d36e8a0a9d357c5ff897f99c", "timestamp"=>"1444014168"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 24ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 10:02:50 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.1ms)
Completed 200 OK in 36ms (Views: 35.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 10:02:51 +0700


Started GET "/auth/shopify/callback?code=e059be45a873687b5630bff5f2acc71d&hmac=8d99cede5f3a4cb1875574df5ef4b6a7c0ecf04fb0a4504d7cc004dfc89e600e&shop=letranloc-2.myshopify.com&signature=ad952aa8f65b4e8ef98690c489536fdd&state=e50b8da7379402f10c0a5262bd3fa211665ecf1042d04d53&timestamp=1444014172" for 113.173.207.242 at 2015-10-05 10:02:52 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"e059be45a873687b5630bff5f2acc71d", "hmac"=>"8d99cede5f3a4cb1875574df5ef4b6a7c0ecf04fb0a4504d7cc004dfc89e600e", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ad952aa8f65b4e8ef98690c489536fdd", "state"=>"e50b8da7379402f10c0a5262bd3fa211665ecf1042d04d53", "timestamp"=>"1444014172"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=0ba6d68c089328745a054f03d5c71e6695fb7d3f5b847538c7027fbe559c3cdc&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f5b76fc3d36e8a0a9d357c5ff897f99c&timestamp=1444014168
Completed 302 Found in 120ms (ActiveRecord: 3.0ms)


Started GET "/?hmac=0ba6d68c089328745a054f03d5c71e6695fb7d3f5b847538c7027fbe559c3cdc&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f5b76fc3d36e8a0a9d357c5ff897f99c&timestamp=1444014168" for 113.173.207.242 at 2015-10-05 10:02:54 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"0ba6d68c089328745a054f03d5c71e6695fb7d3f5b847538c7027fbe559c3cdc", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f5b76fc3d36e8a0a9d357c5ff897f99c", "timestamp"=>"1444014168"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (126.8ms)
Completed 200 OK in 2106ms (Views: 935.1ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=fa29178499714e72a7a9fc7acf2922ef54fda7340c378930fa2f05b97c181887&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f34e8f58a37119dba900bc2343ebb0b8&timestamp=1444014178" for 113.173.207.242 at 2015-10-05 10:02:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"fa29178499714e72a7a9fc7acf2922ef54fda7340c378930fa2f05b97c181887", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f34e8f58a37119dba900bc2343ebb0b8", "timestamp"=>"1444014178"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1104ms (Views: 51.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 113.173.207.242 at 2015-10-05 10:03:16 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (27.0ms)
Completed 200 OK in 100ms (Views: 98.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=8098e6e42d038850eaa3aac29ddf3a8352e305e02509f927e0eb00610de6ed71&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=16268462d768dc70d0d2776cdfda33dd&timestamp=1444014407" for 113.173.207.242 at 2015-10-05 10:06:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"8098e6e42d038850eaa3aac29ddf3a8352e305e02509f927e0eb00610de6ed71", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"16268462d768dc70d0d2776cdfda33dd", "timestamp"=>"1444014407"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (65.2ms)
Completed 500 Internal Server Error in 124ms (ActiveRecord: 0.2ms)

ActionView::Template::Error (SyntaxError: [stdin]:5:1: unexpected if):
    3:   %head
    4:     %title Kandy Shopify App
    5:     %script{src: "//cdn.shopify.com/s/assets/external/app.js?#{Time.now.strftime('%Y%m%d%H')}"}
    6:     :coffeescript
    7:       ShopifyApp.init
    8:         apiKey: "#{ShopifyApp.configuration.api_key}"
    9:         shopOrigin: "https://#{@shop_session.url if @shop_session}"
  app/views/layouts/embedded_app.haml:6:in `_app_views_layouts_embedded_app_haml___1227833640027545716_70267924214900'




Started GET "/preferences?hmac=69157e3ee02904560bd379a7d00e86fe8244071b8a2339cf7c653508b72cf370&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=00971c137e283ea5d44817ad2837c11d&timestamp=1444014523" for 113.173.207.242 at 2015-10-05 10:08:45 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"69157e3ee02904560bd379a7d00e86fe8244071b8a2339cf7c653508b72cf370", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"00971c137e283ea5d44817ad2837c11d", "timestamp"=>"1444014523"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (3.1ms)
Completed 200 OK in 85ms (Views: 82.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences?hmac=4422fd5399987add974c5f6bf88681041d4e094b78ce09ae1ee15ca9b6a267bb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=07577eb221317caecaac3bfaa676df9f&timestamp=1444014551" for 113.173.207.242 at 2015-10-05 10:09:13 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4422fd5399987add974c5f6bf88681041d4e094b78ce09ae1ee15ca9b6a267bb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"07577eb221317caecaac3bfaa676df9f", "timestamp"=>"1444014551"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.3ms)
Completed 200 OK in 82ms (Views: 66.6ms | ActiveRecord: 1.6ms)


Started GET "/preferences?hmac=cd7c0cc61021d30f5573542988a515c678c1a73432d1dfc5f9436e96556b534c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7aa8fcd1eecb61646a2f3f37a6ac4ac4&timestamp=1444014639" for 113.173.207.242 at 2015-10-05 10:10:41 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"cd7c0cc61021d30f5573542988a515c678c1a73432d1dfc5f9436e96556b534c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7aa8fcd1eecb61646a2f3f37a6ac4ac4", "timestamp"=>"1444014639"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.3ms)
Completed 200 OK in 69ms (Views: 58.9ms | ActiveRecord: 0.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 10:11:57 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"yrbQUsL+QF4XYDXNaxxysCfo5Q246rAM4u12HAMspVnVcTQTD6KTIKY1TCtHMApsCt9AHnc0IzxKwLaqNMNbJg==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>""}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.0ms)
Completed 200 OK in 42ms (Views: 40.4ms | ActiveRecord: 0.1ms)
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (151.1ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_password" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_token" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "sms_order_template" varchar[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150930140112"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Migrating to CreateTemplates (20151005034134)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mCREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "content" varchar, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005034134"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Migrating to AddTemplateToShops (20151005034326)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "shops" ADD "template_id" integer[0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "index_shops_on_template_id" ON "shops" ("template_id")
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151005034326"]]
  [1m[35m (3.2ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_template_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_template_id' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m


Started GET "/preferences?hmac=a6b797d6c2e60c3b35d92c6da1ff150245f3effdaaa90ba1fc1c6852f33afb7e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ddefe5be0bdcc20e1dedbc098d9fdced&timestamp=1444018624" for 113.173.207.242 at 2015-10-05 11:17:07 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a6b797d6c2e60c3b35d92c6da1ff150245f3effdaaa90ba1fc1c6852f33afb7e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ddefe5be0bdcc20e1dedbc098d9fdced", "timestamp"=>"1444018624"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.6ms)[0m  [1mSELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?[0m  [[nil, 1]]
SQLite3::SQLException: no such column: templates.shop_id: SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?
  Rendered home/preferences.haml within layouts/embedded_app (174.7ms)
Completed 500 Internal Server Error in 325ms (ActiveRecord: 3.7ms)

ActionView::Template::Error (undefined method `order_creation' for #<Template::ActiveRecord_Associations_CollectionProxy:0x007fc63dad5330>):
    63:           .col-sm-4
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-4
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___3822648975514933465_70244744758760'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___3822648975514933465_70244744758760'




Started GET "/preferences?hmac=84e6f1ebe64ab8d0f20e97d3d7dd3d7c3161282b375d26f65bac30a67467a18a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c62bcc4802d97e35ee5fc12056918294&timestamp=1444018703" for 113.173.207.242 at 2015-10-05 11:18:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"84e6f1ebe64ab8d0f20e97d3d7dd3d7c3161282b375d26f65bac30a67467a18a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c62bcc4802d97e35ee5fc12056918294", "timestamp"=>"1444018703"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.8ms)[0m  SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?  [[nil, 1]]
SQLite3::SQLException: no such column: templates.shop_id: SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?
  Rendered home/preferences.haml within layouts/embedded_app (13.3ms)
Completed 500 Internal Server Error in 41ms (ActiveRecord: 2.4ms)

ActionView::Template::Error (undefined method `order_creation' for #<Template::ActiveRecord_Associations_CollectionProxy:0x007fc64147e780>):
    63:           .col-sm-4
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-4
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___3822648975514933465_70244744758760'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___3822648975514933465_70244744758760'


  [1m[36m (3.6ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.8ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_password" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_token" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "sms_order_template" varchar[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150930140112"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Migrating to CreateTemplates (20151005034134)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "name" varchar, "content" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005034134"]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m


Started GET "/preferences?hmac=e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0e0bdedbfe46048bcece0417afd2f48c&timestamp=1444018932" for 113.173.207.242 at 2015-10-05 11:22:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0e0bdedbfe46048bcece0417afd2f48c", "timestamp"=>"1444018932"}
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 119ms (ActiveRecord: 3.1ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 11:22:16 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.1ms)
Completed 200 OK in 37ms (Views: 36.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 11:22:17 +0700


Started GET "/auth/shopify/callback?code=204ff35ce23c0fe3e4a83c851a9eb2c4&hmac=f879fb9d6734dd7fa5bb47148ece0c7848b74a52fc80569cf5e2db1a5b1c4e30&shop=letranloc-2.myshopify.com&signature=d1f25b215e1b2417ad163641c41cbd6a&state=8885e46e19a3f4b712826e1c2a1a1579d34a60133725af35&timestamp=1444018937" for 113.173.207.242 at 2015-10-05 11:22:18 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"204ff35ce23c0fe3e4a83c851a9eb2c4", "hmac"=>"f879fb9d6734dd7fa5bb47148ece0c7848b74a52fc80569cf5e2db1a5b1c4e30", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d1f25b215e1b2417ad163641c41cbd6a", "state"=>"8885e46e19a3f4b712826e1c2a1a1579d34a60133725af35", "timestamp"=>"1444018937"}
  [1m[35mShop Load (12.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "affb69ed17d8c104ee66c188e7972854"], ["created_at", "2015-10-05 04:22:20.051067"], ["updated_at", "2015-10-05 04:22:20.051067"]]
  [1m[35m (1.5ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0e0bdedbfe46048bcece0417afd2f48c&timestamp=1444018932
Completed 302 Found in 84ms (ActiveRecord: 15.0ms)


Started GET "/preferences?hmac=e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0e0bdedbfe46048bcece0417afd2f48c&timestamp=1444018932" for 113.173.207.242 at 2015-10-05 11:22:20 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0e0bdedbfe46048bcece0417afd2f48c", "timestamp"=>"1444018932"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (16.8ms)[0m  [1mSELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (203.7ms)
Completed 500 Internal Server Error in 250ms (ActiveRecord: 17.3ms)

ActionView::Template::Error (undefined method `order_creation' for #<ActiveRecord::Associations::CollectionProxy []>):
    63:           .col-sm-4
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-4
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243911396040'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243911396040'




Started GET "/preferences?hmac=e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0e0bdedbfe46048bcece0417afd2f48c&timestamp=1444018932" for 113.173.207.242 at 2015-10-05 11:23:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e651aba7dab553f763be86a4868f1388f6bd488475e3b4afbb749890ac885562", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0e0bdedbfe46048bcece0417afd2f48c", "timestamp"=>"1444018932"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (22.2ms)
Completed 200 OK in 1031ms (Views: 1028.6ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=750e8a2ceecf1e8da28355555794ae854f919275f42e43b99227621d2b099e5a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1e518185b567fce5640d1aaa31ac80f1&timestamp=1444018996" for 113.173.207.242 at 2015-10-05 11:23:17 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"750e8a2ceecf1e8da28355555794ae854f919275f42e43b99227621d2b099e5a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1e518185b567fce5640d1aaa31ac80f1", "timestamp"=>"1444018996"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (3.5ms)
Completed 200 OK in 82ms (Views: 78.8ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=ea4a43c616797657e2e8845a4c74dd40305a685fd3221252f39615d071961fbf&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=bc55f8adf6798d941e15b2cf674a4bdf&timestamp=1444019036" for 113.173.207.242 at 2015-10-05 11:23:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ea4a43c616797657e2e8845a4c74dd40305a685fd3221252f39615d071961fbf", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bc55f8adf6798d941e15b2cf674a4bdf", "timestamp"=>"1444019036"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (37.7ms)
Completed 200 OK in 145ms (Views: 141.6ms | ActiveRecord: 0.3ms)


Started GET "/preferences?hmac=e2612d3afa0ab64b94a8e4e0719071cb2c087d5c2001fee5a72734054dc5617e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=37b2a01a29dce12213c70257ba79b86e&timestamp=1444019377" for 113.173.207.242 at 2015-10-05 11:29:40 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e2612d3afa0ab64b94a8e4e0719071cb2c087d5c2001fee5a72734054dc5617e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"37b2a01a29dce12213c70257ba79b86e", "timestamp"=>"1444019377"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (30.2ms)
Completed 500 Internal Server Error in 113ms (ActiveRecord: 2.0ms)

ActionView::Template::Error (undefined method `template' for #<Shop:0x007fc5dc555dd0>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.template.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243883662940'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243883662940'




Started GET "/preferences?hmac=e1795c3b6166181841d8503a96717861619cc87c65f208ab082f1c8f9c5b3e16&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=32f4346d432ca0ea372d17e3469c73f2&timestamp=1444019395" for 113.173.207.242 at 2015-10-05 11:29:57 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e1795c3b6166181841d8503a96717861619cc87c65f208ab082f1c8f9c5b3e16", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"32f4346d432ca0ea372d17e3469c73f2", "timestamp"=>"1444019395"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (13.1ms)[0m  SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (88.8ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 13.9ms)

ActionView::Template::Error (undefined method `order_creation' for #<ActiveRecord::Associations::CollectionProxy []>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243939057840'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243939057840'




Started GET "/preferences?hmac=fa691f84b153637574ddb811650cb6c5c90f2d61041ab1cdb567813755dfa01b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=fbecdc7063a8a0e47fc4483df39cf9f1&timestamp=1444019435" for 113.173.207.242 at 2015-10-05 11:30:37 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fa691f84b153637574ddb811650cb6c5c90f2d61041ab1cdb567813755dfa01b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"fbecdc7063a8a0e47fc4483df39cf9f1", "timestamp"=>"1444019435"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (18.9ms)
Completed 500 Internal Server Error in 67ms (ActiveRecord: 2.2ms)

ActionView::Template::Error (undefined method `attr_accessible' for #<Class:0x007fc5e21c9bc0>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/models/template.rb:4:in `<class:Template>'
  app/models/template.rb:1:in `<top (required)>'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243939057840'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243939057840'




Started GET "/preferences?hmac=7f635215fcd3e85932b78aaedc19d8145cfb93cfc53900e94a2b91a94d47edd7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d3d1f1318654ee29722c20ee721491a8&timestamp=1444019522" for 113.173.207.242 at 2015-10-05 11:32:04 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"7f635215fcd3e85932b78aaedc19d8145cfb93cfc53900e94a2b91a94d47edd7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d3d1f1318654ee29722c20ee721491a8", "timestamp"=>"1444019522"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (12.2ms)[0m  [1mSELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (26.3ms)
Completed 500 Internal Server Error in 91ms (ActiveRecord: 14.5ms)

ActionView::Template::Error (undefined method `order_creation' for #<ActiveRecord::Associations::CollectionProxy []>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243939057840'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243939057840'




Started GET "/preferences?hmac=594ee4b5fe096186f15b0fdac73eeaeff26d102f7b4927c8943f169849d496e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c1a97512bbc1584ad8bd1ee6ff442da9&timestamp=1444019611" for 113.173.207.242 at 2015-10-05 11:33:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"594ee4b5fe096186f15b0fdac73eeaeff26d102f7b4927c8943f169849d496e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c1a97512bbc1584ad8bd1ee6ff442da9", "timestamp"=>"1444019611"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (16.1ms)
Completed 500 Internal Server Error in 49ms (ActiveRecord: 2.4ms)

ActionView::Template::Error (undefined method `order_creation' for #<ActiveRecord::Associations::CollectionProxy []>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml___1639062541348077668_70243939057840'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___1639062541348077668_70243939057840'


  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT "templates".* FROM "templates" WHERE "templates"."shop_id" = ?  [["shop_id", 1]]
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.8ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.6ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_password" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_token" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "sms_order_template" varchar[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150930140112"]]
  [1m[36m (1.0ms)[0m  [1mcommit transaction[0m
Migrating to CreateTemplates (20151005045008)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.0ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTemplates (20151005045008)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
Migrating to CreateTemplates (20151005045008)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (23.5ms)[0m  [1mCREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (328.2ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 11:53:48 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[36mShop Load (30.9ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 259ms (ActiveRecord: 33.9ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 11:53:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.5ms)
Completed 200 OK in 41ms (Views: 40.2ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 11:53:52 +0700


Started GET "/auth/shopify/callback?code=5ce9aebf464e3995495f34945df73b9e&hmac=05a60e769a13ebf1aa1034063ddc1c7a3c8258ddba4f5b9d8e46e10ccd0ed565&shop=letranloc-2.myshopify.com&signature=db51e9333cfe6803bab757286ccbb645&state=e9cb9fd12c95ae2c22cdad5250a243583ddb2361dece5e40&timestamp=1444020833" for 113.173.207.242 at 2015-10-05 11:53:53 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"5ce9aebf464e3995495f34945df73b9e", "hmac"=>"05a60e769a13ebf1aa1034063ddc1c7a3c8258ddba4f5b9d8e46e10ccd0ed565", "shop"=>"letranloc-2.myshopify.com", "signature"=>"db51e9333cfe6803bab757286ccbb645", "state"=>"e9cb9fd12c95ae2c22cdad5250a243583ddb2361dece5e40", "timestamp"=>"1444020833"}
  [1m[35mShop Load (13.8ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (0.6ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "affb69ed17d8c104ee66c188e7972854"], ["created_at", "2015-10-05 04:53:55.271636"], ["updated_at", "2015-10-05 04:53:55.271636"]]
  [1m[35m (2.0ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826
Completed 302 Found in 99ms (ActiveRecord: 16.8ms)


Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 11:53:56 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (1.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (163.1ms)
Completed 500 Internal Server Error in 220ms (ActiveRecord: 1.3ms)

ActionView::Template::Error (undefined method `templates' for #<Shop:0x007ffe36ec7ed0>):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.templates.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml__1518712901847179753_70364909940460'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364909940460'




Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 11:54:12 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (16.5ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (89.1ms)
Completed 500 Internal Server Error in 101ms (ActiveRecord: 17.1ms)

ActionView::Template::Error (undefined method `order_creation' for nil:NilClass):
    63:           .col-sm-6
    64:             .form-group
    65:               = label_tag :sms_order_creation, 'Order creation'
    66:               = text_area_tag :sms_order_creation, @shop.template.order_creation, class: 'form-control', rows: 5
    67:           .col-sm-6
    68:             .form-group
    69:               = label_tag :sms_order_update, 'Order update'
  app/views/home/preferences.haml:66:in `block in _app_views_home_preferences_haml__1518712901847179753_70364910006700'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364910006700'




Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 11:56:54 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (11.4ms)
Completed 200 OK in 1442ms (Views: 1426.0ms | ActiveRecord: 1.6ms)


Started GET "/preferences?hmac=05dd5001caad3b1a18ac6473e1cedfdc993eab7cf636ed3edd7dda256c4685f9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=09e7c7a90cad3cf4b9f58928bdd9a209&timestamp=1444021018" for 113.173.207.242 at 2015-10-05 11:57:00 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"05dd5001caad3b1a18ac6473e1cedfdc993eab7cf636ed3edd7dda256c4685f9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"09e7c7a90cad3cf4b9f58928bdd9a209", "timestamp"=>"1444021018"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (3.1ms)
Completed 200 OK in 85ms (Views: 81.6ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=b8c61bdc5fa71b223c7ee0bc46f5197004201e31f47049be124c1e8cfcc653a5&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=190edaae530a78d08bd4c81c47b30446&timestamp=1444021076" for 113.173.207.242 at 2015-10-05 11:57:58 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b8c61bdc5fa71b223c7ee0bc46f5197004201e31f47049be124c1e8cfcc653a5", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"190edaae530a78d08bd4c81c47b30446", "timestamp"=>"1444021076"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (5.8ms)
Completed 200 OK in 146ms (Views: 93.0ms | ActiveRecord: 2.2ms)


Started GET "/preferences?hmac=f8a7f2904fad99b117c9511e8abe97ebc72a2906fd330355e3889b5cbf1ca3cf&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3c027b0b60409b70941b760ef62da25e&timestamp=1444021140" for 113.173.207.242 at 2015-10-05 11:59:02 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f8a7f2904fad99b117c9511e8abe97ebc72a2906fd330355e3889b5cbf1ca3cf", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3c027b0b60409b70941b760ef62da25e", "timestamp"=>"1444021140"}
  [1m[35mShop Load (0.6ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (97.4ms)
Completed 200 OK in 199ms (Views: 167.6ms | ActiveRecord: 3.1ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:04:58 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"bvA3+7onowpQtKa9XYlGHPEU4KFc5zf+EUrCNLBNFCFxN9O6d3twdOHh31txpT7A3CNFspM5pM65ZwKCh6LqXg==", "{:class=>\"form-control input-sm\"}"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1[0m
Completed 500 Internal Server Error in 29ms (ActiveRecord: 1.2ms)

NoMethodError (undefined method `template' for nil:NilClass):
  app/controllers/home_controller.rb:19:in `update_preferences'




Started GET "/preferences?hmac=d11105d9c283188b0408339a917ebdf05cc3cdf2b38de31f9e1e0d1559402e44&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=66f00cbe42f0c9992a9d2f92547f692d&timestamp=1444021708" for 113.173.207.242 at 2015-10-05 12:08:31 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d11105d9c283188b0408339a917ebdf05cc3cdf2b38de31f9e1e0d1559402e44", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"66f00cbe42f0c9992a9d2f92547f692d", "timestamp"=>"1444021708"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (40.9ms)
Completed 200 OK in 291ms (Views: 265.1ms | ActiveRecord: 1.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:08:37 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"QbBc59jtV2YzcE5Kk+TDNwFy+dxs2wNZ+/fLJ+ubc89ed7imFbGEGIIlN6y/yLvrLEVcz6MFkGlT2guR3HSNsA==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.1ms)

NoMethodError (undefined method `id' for #<ShopifyAPI::Session:0x007ffe39dcec10>):
  app/controllers/home_controller.rb:18:in `update_preferences'




Started GET "/preferences?hmac=62aa704f455ac7d3d04b2ee3081bfa046f030477a64027e39d3fa5ebe8b8e839&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8e70a0c9450673a1a2aee5165d69753f&timestamp=1444021812" for 113.173.207.242 at 2015-10-05 12:10:14 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"62aa704f455ac7d3d04b2ee3081bfa046f030477a64027e39d3fa5ebe8b8e839", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8e70a0c9450673a1a2aee5165d69753f", "timestamp"=>"1444021812"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (15.5ms)
Completed 200 OK in 94ms (Views: 70.5ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:10:55 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mn99INZNir9a0bAAxIuNoob3Iofvkx3nGjzVSMSrEU6FuJlhGxFZweuEyebop/V+q8CHlCBNjteyERX+80TvMQ==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (2.2ms)
Completed 200 OK in 76ms (Views: 46.1ms | ActiveRecord: 2.3ms)


Started GET "/preferences?hmac=1dc536443e2a5eb1c8bc2f7e94cf46963c7a032d72a46c71a3a046bc19158f7a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=861d94133a8f0131cbec4a1934c31ef2&timestamp=1444021867" for 113.173.207.242 at 2015-10-05 12:11:09 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"1dc536443e2a5eb1c8bc2f7e94cf46963c7a032d72a46c71a3a046bc19158f7a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"861d94133a8f0131cbec4a1934c31ef2", "timestamp"=>"1444021867"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (3.3ms)
Completed 200 OK in 60ms (Views: 57.0ms | ActiveRecord: 0.5ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:11:56 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Jr1aPb4+QNkGQqmnn9ARIYzW6quLPm3OZSGxPgv91rg5er58c2KTp7cX0EGz/Gn9oeFPuETg/v7NDHGIPBIoxw==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (2.9ms)
Completed 200 OK in 78ms (Views: 47.9ms | ActiveRecord: 2.3ms)


Started GET "/preferences?hmac=4e06352754beeac62be8ef7d6680bd67ed4010a1d41c602822713bb16797a82c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9c5dcdf42583dab7179cbe205ffca582&timestamp=1444021922" for 113.173.207.242 at 2015-10-05 12:12:04 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4e06352754beeac62be8ef7d6680bd67ed4010a1d41c602822713bb16797a82c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9c5dcdf42583dab7179cbe205ffca582", "timestamp"=>"1444021922"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (3.3ms)
Completed 200 OK in 61ms (Views: 59.0ms | ActiveRecord: 0.3ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:13:20 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"YdzmnS3DIOucKtcZ33UfbtiIkNxiYthZJt2Llt3s4ix+GwLc4J/zlS1/rv/zWWey9b81z628S2mO8Esg6gMcUw==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (8.0ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 05:13:20.967425"], ["updated_at", "2015-10-05 05:13:20.967425"]]
  [1m[35m (9.1ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (2.4ms)
Completed 500 Internal Server Error in 96ms (ActiveRecord: 19.9ms)

ActionView::Template::Error (undefined method `kandy_api_key' for nil:NilClass):
    28:         .form-group
    29:           = label_tag :api_key, 'Domain Key'
    30:           %abbr{title: 'required'} *
    31:           = text_field_tag :api_key, @shop.kandy_api_key, class: 'form-control input-sm'
    32:         .form-group
    33:           = label_tag :api_secret, 'Domain Secret Key'
    34:           %abbr{title: 'required'} *
  app/views/home/preferences.haml:31:in `block in _app_views_home_preferences_haml__1518712901847179753_70364888625940'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364888625940'
  app/controllers/home_controller.rb:22:in `update_preferences'




Started GET "/preferences?hmac=fc48290d1c7ab3454a10cbcba4e47188b04572eb2c5c79b4444a4862b946b10c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3fe9d374b16a4944ea226b15e302d731&timestamp=1444022043" for 113.173.207.242 at 2015-10-05 12:14:06 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fc48290d1c7ab3454a10cbcba4e47188b04572eb2c5c79b4444a4862b946b10c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3fe9d374b16a4944ea226b15e302d731", "timestamp"=>"1444022043"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (19.5ms)
Completed 200 OK in 94ms (Views: 72.6ms | ActiveRecord: 2.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:14:17 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jyq5agGE+rRIdNJeS1YECAhVeYvngtoeMeNKj4RFU5+Q7V0rzNgpyvkhq7hnenzUJWLcmChcSS6Zzoo5s6qt4A==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "templates" SET "shop_id" = ?, "updated_at" = ? WHERE "templates"."id" = ?  [["shop_id", nil], ["updated_at", "2015-10-05 05:14:17.458063"], ["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 05:14:17.460763"], ["updated_at", "2015-10-05 05:14:17.460763"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (2.3ms)
Completed 200 OK in 90ms (Views: 71.6ms | ActiveRecord: 3.4ms)


Started GET "/preferences?hmac=fb4837e1881c775fcd97e70a622c8c701204b98dba7587d37419838642a22159&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=bb54528d019e1d13da676003d96dcb3f&timestamp=1444022070" for 113.173.207.242 at 2015-10-05 12:14:32 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fb4837e1881c775fcd97e70a622c8c701204b98dba7587d37419838642a22159", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bb54528d019e1d13da676003d96dcb3f", "timestamp"=>"1444022070"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (4.2ms)
Completed 200 OK in 95ms (Views: 92.3ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=55b0a5e8ab0954f83cf9ac4486688bd5a993a437b0a7ae80afa78fd7ce308675&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=00804399d355cc5f2eb1c24074f8b30c&timestamp=1444022099" for 113.173.207.242 at 2015-10-05 12:15:01 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"55b0a5e8ab0954f83cf9ac4486688bd5a993a437b0a7ae80afa78fd7ce308675", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"00804399d355cc5f2eb1c24074f8b30c", "timestamp"=>"1444022099"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (45.7ms)
Completed 200 OK in 153ms (Views: 124.1ms | ActiveRecord: 2.2ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:15:31 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"R1EofYCnF9YNnHCeGxakss93LncixXXMMgD585FsYS9Ylsw8TfvEqLzJCXg3Otxu4kCLZO0b5vyaLTlFpoOfUA==", "api_key"=>"", "api_secret"=>"", "phonenumber"=>"", "username"=>"", "password"=>"[FILTERED]", "sms_order_creation"=>"demo", "sms_order_update"=>""}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "templates" SET "shop_id" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["shop_id", nil], ["updated_at", "2015-10-05 05:15:31.842551"], ["id", 2]]
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["shop_id", 1], ["created_at", "2015-10-05 05:15:31.844907"], ["updated_at", "2015-10-05 05:15:31.844907"]]
  [1m[36m (3.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (3.2ms)
Completed 200 OK in 74ms (Views: 55.6ms | ActiveRecord: 4.8ms)


Started GET "/preferences?hmac=f6ec65e0ca3d0a5c5935293c516f232259df39c336807422be597c65933e3df9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=51222618947ab7d46315b8251b4179e1&timestamp=1444022136" for 113.173.207.242 at 2015-10-05 12:15:38 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f6ec65e0ca3d0a5c5935293c516f232259df39c336807422be597c65933e3df9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"51222618947ab7d46315b8251b4179e1", "timestamp"=>"1444022136"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.8ms)
Completed 200 OK in 62ms (Views: 59.5ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=8fe0aeb743533a9e736f43877238c42fcfd96d04a6c430a8c28fc77d84bbb74b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ae403495972caba30adac7dee69ac2d0&timestamp=1444022208" for 113.173.207.242 at 2015-10-05 12:16:50 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"8fe0aeb743533a9e736f43877238c42fcfd96d04a6c430a8c28fc77d84bbb74b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ae403495972caba30adac7dee69ac2d0", "timestamp"=>"1444022208"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (34.5ms)
Completed 200 OK in 128ms (Views: 107.1ms | ActiveRecord: 2.0ms)


Started GET "/preferences?hmac=414855543245ebb9b35f14cd21a9761944e621423e8d1e1aae07450982a5c448&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=02f9ce2768d65945c2527ab963c9f8e4&timestamp=1444022292" for 113.173.207.242 at 2015-10-05 12:18:14 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"414855543245ebb9b35f14cd21a9761944e621423e8d1e1aae07450982a5c448", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"02f9ce2768d65945c2527ab963c9f8e4", "timestamp"=>"1444022292"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.1ms)
Completed 200 OK in 113ms (Views: 85.4ms | ActiveRecord: 3.5ms)


Started GET "/preferences?hmac=fa892be12594bc48d5ad65d5e77647cc719aced806a8c1dc65b4182fb46f636c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=658a13b892724bd6032d6729ba82df5d&timestamp=1444022382" for 113.173.207.242 at 2015-10-05 12:19:45 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fa892be12594bc48d5ad65d5e77647cc719aced806a8c1dc65b4182fb46f636c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"658a13b892724bd6032d6729ba82df5d", "timestamp"=>"1444022382"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (21.6ms)
Completed 200 OK in 81ms (Views: 78.2ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=e17498e72a0cef3abbd688adf152d8114a86ef5a5b64f2cdde8c21c8fe244313&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1d96bbd9590b49b89bea5d1f35b6ca58&timestamp=1444022419" for 113.173.207.242 at 2015-10-05 12:20:21 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e17498e72a0cef3abbd688adf152d8114a86ef5a5b64f2cdde8c21c8fe244313", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1d96bbd9590b49b89bea5d1f35b6ca58", "timestamp"=>"1444022419"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.8ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (21.3ms)
Completed 200 OK in 81ms (Views: 76.7ms | ActiveRecord: 1.3ms)


Started GET "/preferences?hmac=4c01d8871905aef5c37037a35c978eb7e9a51a2f8c0613abf1d099f328755498&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c321cd2b128b7de1616b3b43ca596c77&timestamp=1444022440" for 113.173.207.242 at 2015-10-05 12:20:42 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4c01d8871905aef5c37037a35c978eb7e9a51a2f8c0613abf1d099f328755498", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c321cd2b128b7de1616b3b43ca596c77", "timestamp"=>"1444022440"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (25.0ms)
Completed 200 OK in 84ms (Views: 80.9ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=7f232ee31f0139ffee1f9874c1740eff075f256f7baa5e792268e80071247fcf&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=01a4bc9056dd18c073a5c5dc8311f582&timestamp=1444022457" for 113.173.207.242 at 2015-10-05 12:20:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"7f232ee31f0139ffee1f9874c1740eff075f256f7baa5e792268e80071247fcf", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"01a4bc9056dd18c073a5c5dc8311f582", "timestamp"=>"1444022457"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.2ms)
Completed 200 OK in 77ms (Views: 73.9ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=9aaf6de1cdf88becab1c240a58cf9da3a62a9a02208df089611da6aba1a54ff7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5ea4dd27e74ce756e9a5233672351854&timestamp=1444022478" for 113.173.207.242 at 2015-10-05 12:21:21 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9aaf6de1cdf88becab1c240a58cf9da3a62a9a02208df089611da6aba1a54ff7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5ea4dd27e74ce756e9a5233672351854", "timestamp"=>"1444022478"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (24.8ms)
Completed 200 OK in 77ms (Views: 74.2ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=b035c4d06e71ec7349b5785a31ecd8b61de08d93f2df9109eea05c28a36c241a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e312cdfee34d3057eeb58645311b34ba&timestamp=1444022517" for 113.173.207.242 at 2015-10-05 12:21:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b035c4d06e71ec7349b5785a31ecd8b61de08d93f2df9109eea05c28a36c241a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e312cdfee34d3057eeb58645311b34ba", "timestamp"=>"1444022517"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (22.7ms)
Completed 200 OK in 97ms (Views: 93.9ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=6fbc8ed3c9937d31e3bc5a98f0c08ca84f99d235e2b53aeba1967dae4da20383&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f071a733ddbe900bb36069d4714d912c&timestamp=1444022548" for 113.173.207.242 at 2015-10-05 12:22:31 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6fbc8ed3c9937d31e3bc5a98f0c08ca84f99d235e2b53aeba1967dae4da20383", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f071a733ddbe900bb36069d4714d912c", "timestamp"=>"1444022548"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (36.8ms)
Completed 200 OK in 101ms (Views: 97.9ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=a0374cf2963a756ea502e496aae61f74c61e386b2f886f2d96fcb331ba0ee6b4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8180f76befc001c1034b334623caca6b&timestamp=1444022585" for 113.173.207.242 at 2015-10-05 12:23:07 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"a0374cf2963a756ea502e496aae61f74c61e386b2f886f2d96fcb331ba0ee6b4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8180f76befc001c1034b334623caca6b", "timestamp"=>"1444022585"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (31.0ms)
Completed 200 OK in 87ms (Views: 84.8ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=3184f1d8419ee32718f687055d0bcb4feae7f40f84961c5e952b5e763c260dca&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=68b52d9601f5f87bf787425d063e980c&timestamp=1444022674" for 113.173.207.242 at 2015-10-05 12:24:36 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3184f1d8419ee32718f687055d0bcb4feae7f40f84961c5e952b5e763c260dca", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"68b52d9601f5f87bf787425d063e980c", "timestamp"=>"1444022674"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (38.6ms)
Completed 500 Internal Server Error in 45ms (ActiveRecord: 0.7ms)

ActionView::Template::Error (undefined method `api_key' for #<Shop:0x007ffe34747428>):
    28:         .form-group
    29:           = label_tag :api_key, 'Domain Key'
    30:           %abbr{title: 'required'} *
    31:           = f.text_field :api_key, class: 'form-control input-sm'
    32:         .form-group
    33:           = label_tag :api_secret, 'Domain Secret Key'
    34:           %abbr{title: 'required'} *
  app/views/home/preferences.haml:31:in `block in _app_views_home_preferences_haml__1518712901847179753_70364889230840'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364889230840'




Started GET "/preferences?hmac=b97c41b21064206799fdc215cfc4d05d1b533e9d74c08322464f45318664f08d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=cb79619a5d6710309ab248b68ea25e2a&timestamp=1444022723" for 113.173.207.242 at 2015-10-05 12:25:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b97c41b21064206799fdc215cfc4d05d1b533e9d74c08322464f45318664f08d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"cb79619a5d6710309ab248b68ea25e2a", "timestamp"=>"1444022723"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.9ms)
Completed 200 OK in 164ms (Views: 159.8ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=c6abf3f78dbc9eaa58095b8fdc7a55251cef29e9d740bb56e8fa70af4b0e6d2b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3a6c3952a53eb674c2470a5c444f4d3c&timestamp=1444022937" for 113.173.207.242 at 2015-10-05 12:29:00 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c6abf3f78dbc9eaa58095b8fdc7a55251cef29e9d740bb56e8fa70af4b0e6d2b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3a6c3952a53eb674c2470a5c444f4d3c", "timestamp"=>"1444022937"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.5ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (38.7ms)
Completed 500 Internal Server Error in 90ms (ActiveRecord: 1.0ms)

ActionView::Template::Error (wrong number of arguments (3 for 1..2)):
    73:           .col-sm-6
    74:             .form-group
    75:               = label_tag :order_payment, 'Order payment (owner)'
    76:               = t.text_area :order_payment, nil, class: 'form-control', rows: 5
    77:           .col-sm-6
    78:             .form-group
    79:               = label_tag :customer_creation, 'Customer creation (owner)'
  app/views/home/preferences.haml:76:in `block (2 levels) in _app_views_home_preferences_haml__1518712901847179753_70364887937820'
  app/views/home/preferences.haml:62:in `block in _app_views_home_preferences_haml__1518712901847179753_70364887937820'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364887937820'




Started GET "/preferences?hmac=c3dc708bc2124daa4dc8e3e5e3fbc0cc941d4a00b0383fadcda14ea59b33e674&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=608841ff6af38894a2f12840a5c9c176&timestamp=1444022963" for 113.173.207.242 at 2015-10-05 12:29:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c3dc708bc2124daa4dc8e3e5e3fbc0cc941d4a00b0383fadcda14ea59b33e674", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"608841ff6af38894a2f12840a5c9c176", "timestamp"=>"1444022963"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (30.4ms)
Completed 200 OK in 1009ms (Views: 1006.0ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=637bd664974f393274f892d2a79868bf74a488ae91e3a37ebff2a4e810ae2907&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=279a5ca8d1770325a6ece119b8685a64&timestamp=1444023111" for 113.173.207.242 at 2015-10-05 12:31:53 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"637bd664974f393274f892d2a79868bf74a488ae91e3a37ebff2a4e810ae2907", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"279a5ca8d1770325a6ece119b8685a64", "timestamp"=>"1444023111"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (26.8ms)
Completed 200 OK in 161ms (Views: 158.2ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:32:07 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1N5tUWhqa13jNbxWJBSBaYwY3C3o0jg+/tZ0iN+SibTLGYkQpTa4I1JgxbAIOPm1oS95PicMqw5W+7Q+6H13yw==", "shop"=>{"kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (2.1ms)
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.1ms)

ActionView::Template::Error (First argument in form cannot contain nil or be empty):
    15:           target: 'app'
    16:     ShopifyApp.Bar.loadingOff()
    17: 
    18: = form_for @shop, url: '/preferences', method: :post, html: {'data-shopify-app-submit': 'save-preferences-form-message', class: 'jumbotron'} do |f|
    19:   .row
    20:     .col-sm-3
    21:       %h5 Kandy Domain Key
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364911617360'
  app/controllers/home_controller.rb:18:in `update_preferences'




Started GET "/preferences?hmac=0a35acb3716a19d2a422d6cb1d0664df64e82453dc02ec658e38d7fa799e8a3f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7924b80f8149871659b889a788f06bae&timestamp=1444023176" for 113.173.207.242 at 2015-10-05 12:32:58 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0a35acb3716a19d2a422d6cb1d0664df64e82453dc02ec658e38d7fa799e8a3f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7924b80f8149871659b889a788f06bae", "timestamp"=>"1444023176"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (52.6ms)
Completed 200 OK in 192ms (Views: 158.3ms | ActiveRecord: 3.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:33:07 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"p1/lVzRYCXP3aYRjie1i58eBMwdQwq5CVsTodDRoIqy4mAEW+QTaDUY8/YWlwRo76raWFJ8cPXL+6SjCA4fc0w==", "shop"=>{"kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Redirected to https://kandy-shopify.ngrok.io/preferences
Completed 302 Found in 3ms (ActiveRecord: 0.2ms)


Started GET "/preferences" for 113.173.207.242 at 2015-10-05 12:33:08 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1
  Rendered home/preferences.haml within layouts/embedded_app (2.0ms)
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.5ms)

ActionView::Template::Error (First argument in form cannot contain nil or be empty):
    15:           target: 'app'
    16:     ShopifyApp.Bar.loadingOff()
    17: 
    18: = form_for @shop, url: '/preferences', method: :post, html: {'data-shopify-app-submit': 'save-preferences-form-message', class: 'jumbotron'} do |f|
    19:   .row
    20:     .col-sm-3
    21:       %h5 Kandy Domain Key
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml__1518712901847179753_70364911617360'




Started GET "/preferences?hmac=fa54b440821889f467e57f94e9d0cea0c0038be71510d47b331290bb52d23b30&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1d1296e9d84bf3ead6dc9d93961e4de3&timestamp=1444023717" for 113.173.207.242 at 2015-10-05 12:42:00 +0700

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/controllers/home_controller.rb:31: syntax error, unexpected ')', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END):
  app/controllers/home_controller.rb:31: syntax error, unexpected ')', expecting tSTRING_CONTENT or tSTRING_DBEG or tSTRING_DVAR or tSTRING_END




Started GET "/preferences?hmac=246de7e240e4550026dad0beb97d8ae5466bbd17a6e5de8454526e180126a352&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=31dcce1e9622059ff0ea185b41843fdb&timestamp=1444023810" for 113.173.207.242 at 2015-10-05 12:43:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"246de7e240e4550026dad0beb97d8ae5466bbd17a6e5de8454526e180126a352", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"31dcce1e9622059ff0ea185b41843fdb", "timestamp"=>"1444023810"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (83.8ms)
Completed 200 OK in 389ms (Views: 359.5ms | ActiveRecord: 2.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:54:11 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"I3eSmp/wTEOOfLb8b9O85GCxp52fJNk2bNDtmux4WBc8sHbbUqyfPT8pzxpD/8Q4TYYCjlD6SgbE/S0s25emaA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"demo", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[35mShop Load (0.6ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", nil]]
Completed 404 Not Found in 74ms (ActiveRecord: 3.2ms)

ActiveRecord::RecordNotFound (Couldn't find Shop with 'id'=):
  app/controllers/home_controller.rb:18:in `update_preferences'




Started GET "/preferences?hmac=325d3b7765bf38a8f783c3d4639d666ba199a524eec225e650d9782f115be10b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=62d00f3f55ed0017546915b69c54c871&timestamp=1444024543" for 113.173.207.242 at 2015-10-05 12:55:46 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"325d3b7765bf38a8f783c3d4639d666ba199a524eec225e650d9782f115be10b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"62d00f3f55ed0017546915b69c54c871", "timestamp"=>"1444024543"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.6ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (64.4ms)
Completed 200 OK in 419ms (Views: 391.2ms | ActiveRecord: 3.2ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:55:52 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Bi2XjbcltrEuLBZR24KwKmzFHKJSPiqj0t6gpVkAWxkZ6nPMenllz595b7f3rsj2QfK5sZ3guZN682ATbu+lZg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", nil]]
Completed 404 Not Found in 3ms (ActiveRecord: 0.3ms)

ActiveRecord::RecordNotFound (Couldn't find Shop with 'id'=):
  app/controllers/home_controller.rb:18:in `update_preferences'




Started GET "/preferences?hmac=49575c972f4a5ad7d21658255335fb9cf6a49fac25840ac4ae8c3ffdbfff470e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1a406caefea78c68210dae419509f599&timestamp=1444024631" for 113.173.207.242 at 2015-10-05 12:57:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"49575c972f4a5ad7d21658255335fb9cf6a49fac25840ac4ae8c3ffdbfff470e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1a406caefea78c68210dae419509f599", "timestamp"=>"1444024631"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.5ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (37.1ms)
Completed 200 OK in 155ms (Views: 132.9ms | ActiveRecord: 2.5ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:57:21 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Clxd/whn8wVJ+cI1xigSAq2yq8XEnzwYTlD/KSk/ZxgVm7m+xTsge/isu9PqBGregIUO1gtBryjmfT+fHtCZZw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.6ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "shops" SET "kandy_api_key" = ?, "kandy_api_secret" = ?, "kandy_phonenumber" = ?, "kandy_username" = ?, "kandy_password" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_api_key", ""], ["kandy_api_secret", ""], ["kandy_phonenumber", ""], ["kandy_username", ""], ["kandy_password", ""], ["updated_at", "2015-10-05 05:57:21.101911"], ["id", 1]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (13.3ms)
Completed 200 OK in 109ms (Views: 75.8ms | ActiveRecord: 4.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:58:47 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"ZgCaPg2OrSz3dd5xNePjDnqrZv0QTcD0qw/7nWKkorN5x35/wNJ+UkYgp5cZz5vSV5zD7t+TU8QDIjsrVUtczA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.3ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.5ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.2ms)
Completed 200 OK in 104ms (Views: 77.4ms | ActiveRecord: 2.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:58:58 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eJTji8TqAWTuS7YR2VFfNFkB7hIX5t72c1o88CCvUcNnUwfKCbbSGl8ez/f1fSfodDZLAdg4Tcbbd/xGF0CvvA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[36mShop Load (0.9ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.9ms)
Completed 200 OK in 63ms (Views: 56.0ms | ActiveRecord: 1.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 12:59:28 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"LuO4JtlBpLWhnEVJq+wJtm/RArfTu7cRp2Qi7+ychQIxJFxnFB13yxDJPK+HwHFqQuanpBxlJCEPSeJZ23N7fQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"demo", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]"}, "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "shops" SET "kandy_api_key" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["kandy_api_key", "demo"], ["updated_at", "2015-10-05 05:59:28.827248"], ["id", 1]]
  [1m[35m (2.4ms)[0m  commit transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.9ms)
Completed 200 OK in 61ms (Views: 50.6ms | ActiveRecord: 3.5ms)


Started GET "/preferences?hmac=e68b92d4c8a1cf883e0da5f5f5dce45b63eb2c560cca96040688ee363354a501&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=dd4e4a50635590bc32452f3b44f7acad&timestamp=1444024773" for 113.173.207.242 at 2015-10-05 12:59:36 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e68b92d4c8a1cf883e0da5f5f5dce45b63eb2c560cca96040688ee363354a501", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"dd4e4a50635590bc32452f3b44f7acad", "timestamp"=>"1444024773"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.7ms)
Completed 200 OK in 71ms (Views: 66.2ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=61a77d709f77a422c1800d797206803349f70c51bddd4ac3ff8df13eeb5c3661&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d65d50cf75d6cab29dde5c1e642ec6a9&timestamp=1444024972" for 113.173.207.242 at 2015-10-05 13:02:54 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"61a77d709f77a422c1800d797206803349f70c51bddd4ac3ff8df13eeb5c3661", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d65d50cf75d6cab29dde5c1e642ec6a9", "timestamp"=>"1444024972"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.7ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (69.1ms)
Completed 200 OK in 257ms (Views: 196.8ms | ActiveRecord: 3.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:03:07 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c/14i3+jf7EzjRjkS6N9euIn0Xyqc9LF4iaFwTi3VvBsOpzKsv+sz4LYYQJnjwWmzxB0b2WtQfVKC0V3D1iojw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"demo", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.5ms)
Completed 200 OK in 91ms (Views: 81.9ms | ActiveRecord: 0.8ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:04:14 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TjTAeaTV05t1Ch5gKOOebFYJWkxs8ThaOq3FIix22DNR8yQ4aYkA5cRfZ4YEz+awez7/X6Mvq2qSgAWUG5kmTA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"demo", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.6ms)
Completed 200 OK in 90ms (Views: 83.4ms | ActiveRecord: 0.8ms)
  [1m[36m (2.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.8ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.6ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_password" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_token" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "sms_order_template" varchar[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150930140112"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Migrating to CreateTemplates (20151005045008)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.4ms)[0m  [1mCREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151005045008"]]
  [1m[35m (1.6ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.2ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'

  [1m[36m (0.1ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'
[0m


Started GET "/login?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 13:10:12 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.2ms)
Completed 200 OK in 25ms (Views: 24.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 113.173.207.242 at 2015-10-05 13:10:13 +0700


Started GET "/auth/shopify/callback?code=6bd7abc235d5433f7381564a15422a5c&hmac=7721f91a16a3052ff20b2ddd0c7633760094ed08d4b1c45e433b08dfb00fba6c&shop=letranloc-2.myshopify.com&signature=b712754334d58627fd4613e145c434ba&state=6474dc1f7439cb8d2cbac5ad392bdd2c5351725b84734a50&timestamp=1444025472" for 113.173.207.242 at 2015-10-05 13:11:12 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"6bd7abc235d5433f7381564a15422a5c", "hmac"=>"7721f91a16a3052ff20b2ddd0c7633760094ed08d4b1c45e433b08dfb00fba6c", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b712754334d58627fd4613e145c434ba", "state"=>"6474dc1f7439cb8d2cbac5ad392bdd2c5351725b84734a50", "timestamp"=>"1444025472"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "5f27f2cfc61ad38f16b2ac63174f0355"], ["created_at", "2015-10-05 06:11:14.544760"], ["updated_at", "2015-10-05 06:11:14.544760"]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826
Completed 302 Found in 154ms (ActiveRecord: 5.4ms)


Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 13:11:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (176.6ms)
Completed 500 Internal Server Error in 186ms (ActiveRecord: 0.8ms)

ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    60:       %h5 SMS templates
    61:     .col-sm-9.panel
    62:       .panel-body
    63:       = f.fields_for @shop.template do |t|
    64:         .row
    65:           .col-sm-6
    66:             .form-group
  app/views/home/preferences.haml:63:in `block in _app_views_home_preferences_haml___3609103003254489116_70094202645140'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___3609103003254489116_70094202645140'




Started GET "/preferences?hmac=2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ca8e71a5aa627c1447d02e340405c1c&timestamp=1444020826" for 113.173.207.242 at 2015-10-05 13:15:18 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2ef8cf7878da027ec9977a28b83595d3aaa1536becb6cdfdab74ab5c15e7ed4d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ca8e71a5aa627c1447d02e340405c1c", "timestamp"=>"1444020826"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (23.1ms)
Completed 200 OK in 824ms (Views: 805.3ms | ActiveRecord: 2.3ms)


Started GET "/preferences?hmac=3576ad1d60e10a9666751b45d7de32410635d570984f0ef3ed28a2dc97a24d80&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=35123f4459271367d8c967adb1ed728f&timestamp=1444025722" for 113.173.207.242 at 2015-10-05 13:15:24 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3576ad1d60e10a9666751b45d7de32410635d570984f0ef3ed28a2dc97a24d80", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"35123f4459271367d8c967adb1ed728f", "timestamp"=>"1444025722"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (14.8ms)
Completed 200 OK in 90ms (Views: 85.4ms | ActiveRecord: 1.2ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:15:53 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zjOHfv7xazgIsy1jWcEiMDrXIG1k9nwsuYEPbMcQz0bR9GM/M624RrnmVIV17VrsF+CFfqso7xwRrM/a8P8xOQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.6ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "shops" SET "kandy_api_key" = ?, "kandy_api_secret" = ?, "kandy_phonenumber" = ?, "kandy_username" = ?, "kandy_password" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["kandy_api_key", ""], ["kandy_api_secret", ""], ["kandy_phonenumber", ""], ["kandy_username", ""], ["kandy_password", ""], ["updated_at", "2015-10-05 06:15:53.540574"], ["id", 1]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (12.2ms)
Completed 200 OK in 92ms (Views: 80.0ms | ActiveRecord: 3.6ms)


Started GET "/preferences?hmac=2357c34047ab4bf148e36725c0302a47fbc25590d31eeaac8a8f583634826a18&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=030b4f0598c8a531100d22521cbbcd05&timestamp=1444025858" for 113.173.207.242 at 2015-10-05 13:17:39 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"2357c34047ab4bf148e36725c0302a47fbc25590d31eeaac8a8f583634826a18", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"030b4f0598c8a531100d22521cbbcd05", "timestamp"=>"1444025858"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (27.1ms)
Completed 200 OK in 128ms (Views: 90.7ms | ActiveRecord: 2.7ms)


Started GET "/preferences?hmac=f3dd816c0bccd1bf862102cd0ea17287fd86b9581c3a740fe79398bfa2f00b84&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4aa558e31ec97ae9a70a80574bfb00c1&timestamp=1444025867" for 113.173.207.242 at 2015-10-05 13:17:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f3dd816c0bccd1bf862102cd0ea17287fd86b9581c3a740fe79398bfa2f00b84", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4aa558e31ec97ae9a70a80574bfb00c1", "timestamp"=>"1444025867"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.2ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (12.2ms)
Completed 200 OK in 97ms (Views: 91.9ms | ActiveRecord: 1.3ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:17:58 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zn6idi39wVphswsaTwQy+3WeaxAkbFlL68MocEwfp0rRuUY34KESJNDmcvxjKEonWKnOA+uyyntD7ujGe/BZNQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mCACHE (0.0ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (7.4ms)
Completed 200 OK in 64ms (Views: 58.6ms | ActiveRecord: 1.0ms)


Started GET "/preferences?hmac=f6655bce67fc1fd20acda7935c4e0cb83e0dc9c4d8de167227b002bbeeff615e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4cd245e0f25859025f28373656fc7ffd&timestamp=1444025922" for 113.173.207.242 at 2015-10-05 13:18:44 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f6655bce67fc1fd20acda7935c4e0cb83e0dc9c4d8de167227b002bbeeff615e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4cd245e0f25859025f28373656fc7ffd", "timestamp"=>"1444025922"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (49.8ms)
Completed 200 OK in 122ms (Views: 118.5ms | ActiveRecord: 1.2ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:18:57 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"PBYxl+XtVR1mHIsj7yozjsf3mAdqb9Lm9cujqcCjtowj0dXWKLGGY9dJ8sXDBktS6sA9FKWxQdZd5mMf90xI8w==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"", "order_creation"=>"Hi", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (8.4ms)
Completed 200 OK in 60ms (Views: 53.6ms | ActiveRecord: 1.0ms)


Started GET "/preferences?hmac=b0ffc3206b6846fb9cae0e322d4928067a13e13bae69212d2d4e0af31d1c7f73&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4e4fb118395cd26e5da74216cf3705f4&timestamp=1444026156" for 113.173.207.242 at 2015-10-05 13:22:38 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"b0ffc3206b6846fb9cae0e322d4928067a13e13bae69212d2d4e0af31d1c7f73", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4e4fb118395cd26e5da74216cf3705f4", "timestamp"=>"1444026156"}
  [1m[36mShop Load (0.8ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (36.3ms)
Completed 500 Internal Server Error in 73ms (ActiveRecord: 3.3ms)

ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    60:       %h5 SMS templates
    61:     .col-sm-9.panel
    62:       .panel-body
    63:       = f.fields_for @shop.template do |t|
    64:         .row
    65:           .col-sm-6
    66:             .form-group
  app/views/home/preferences.haml:63:in `block in _app_views_home_preferences_haml___3609103003254489116_70094157903900'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___3609103003254489116_70094157903900'




Started GET "/preferences?hmac=87ee4f508ff45877ec41af025428841d7870128a098a88a991caecb704cdb59c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1bbf4a4c1dda1465428c30551c5545e5&timestamp=1444026166" for 113.173.207.242 at 2015-10-05 13:22:48 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"87ee4f508ff45877ec41af025428841d7870128a098a88a991caecb704cdb59c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1bbf4a4c1dda1465428c30551c5545e5", "timestamp"=>"1444026166"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.7ms)
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.6ms)

ActionView::Template::Error (undefined method `model_name' for nil:NilClass):
    60:       %h5 SMS templates
    61:     .col-sm-9.panel
    62:       .panel-body
    63:       = f.fields_for @shop.template do |t|
    64:         .row
    65:           .col-sm-6
    66:             .form-group
  app/views/home/preferences.haml:63:in `block in _app_views_home_preferences_haml___3609103003254489116_70094157903900'
  app/views/home/preferences.haml:18:in `_app_views_home_preferences_haml___3609103003254489116_70094157903900'




Started GET "/preferences?hmac=af36ec0c0ab672ba0a086c5ce69c68d7d490e01a1d3241335fea0173ef645070&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=da81e216bfe357df41e6d9e17a274c78&timestamp=1444026215" for 113.173.207.242 at 2015-10-05 13:23:37 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"af36ec0c0ab672ba0a086c5ce69c68d7d490e01a1d3241335fea0173ef645070", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"da81e216bfe357df41e6d9e17a274c78", "timestamp"=>"1444026215"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 06:23:37.786859"], ["updated_at", "2015-10-05 06:23:37.786859"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.4ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.9ms)
Completed 200 OK in 101ms (Views: 56.9ms | ActiveRecord: 5.2ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:23:57 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"oSAB17PbugHtINLTbv+NftFScIqyVZgFxT4UsG4XfiG+5+WWfodpf1x1qzVC0/Wi/GXVmX2LCzVtE9QGWfiAXg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.0ms)
Completed 200 OK in 54ms (Views: 47.8ms | ActiveRecord: 0.9ms)


Started GET "/preferences?hmac=fd2331fc2a7939fa491897f91233817ca6a8a1303051e8ddf82537d1be4c2aaa&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7a986c45d4d06d37b867cd5ac88ccea4&timestamp=1444026273" for 113.173.207.242 at 2015-10-05 13:24:35 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"fd2331fc2a7939fa491897f91233817ca6a8a1303051e8ddf82537d1be4c2aaa", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7a986c45d4d06d37b867cd5ac88ccea4", "timestamp"=>"1444026273"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (32.4ms)
Completed 200 OK in 110ms (Views: 104.9ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:24:42 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"FuDR8rquHoF32vo4AiSkQpbvQ61HeFfjALo2C88KKO0JJzWzd/LN/8aPg94uCNyeu9jmvoimxNOol/a9+OXWkg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.6ms)
Completed 200 OK in 68ms (Views: 61.4ms | ActiveRecord: 0.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:24:52 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eMjoHQeTWIXDiPh/QV+Tb6BeVNwSYBsnyy0IckjGvK1nDwxcys+L+3LdgZltc+uzjWnxz92+iBdjAMjEfylC0g==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.5ms)
Completed 200 OK in 52ms (Views: 46.8ms | ActiveRecord: 0.8ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:29:11 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"o9E/ZZCLCZu9ZzEbBNYI8mUH1a7i0vRtNy3ZfN8H3Ju8FtskXdfa5QwySP0o+nAuSDBwvS0MZ12fABnK6Ogi5A==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"demo", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.9ms)
Completed 200 OK in 95ms (Views: 88.8ms | ActiveRecord: 0.9ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:29:35 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"n7nyVwCDhFJDASkp9o6IFBborjpiGDMDoJYntEAX45iAfhYWzd9XLPJUUM/aovDIO98LKa3GoDMIu+cCd/gd5w==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.5ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (19.0ms)
Completed 200 OK in 98ms (Views: 75.2ms | ActiveRecord: 2.4ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:31:15 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"E4nqMwufFKf8S/WjGZbGyBh8nLkgj7fTiU0e9wCmFMUMTg5yxsPH2U0ejEU1ur4UNUs5qu9RJOMhYN5BN0nqug==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: template
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (34.7ms)
Completed 200 OK in 244ms (Views: 190.8ms | ActiveRecord: 2.6ms)


Started GET "/preferences?hmac=09c8f27f35521dbf508945b6ae9d5bc01583e2d67a93f8308e2e09df10c214a2&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4bdebd6cf6f166220f7727f3ff704da0&timestamp=1444026696" for 113.173.207.242 at 2015-10-05 13:31:38 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"09c8f27f35521dbf508945b6ae9d5bc01583e2d67a93f8308e2e09df10c214a2", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4bdebd6cf6f166220f7727f3ff704da0", "timestamp"=>"1444026696"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.5ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (30.9ms)
Completed 200 OK in 152ms (Views: 107.0ms | ActiveRecord: 2.5ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:31:47 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SM6phniRUTMxkKIGxfqVnuwxqMdMMcGZbiHyTtzRMuJXCU3Htc2CTYDF2+Dp1u1CwQYN1IPvUqnGDDL46z7MnQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"shop_id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.4ms)
Completed 200 OK in 63ms (Views: 54.8ms | ActiveRecord: 0.8ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:32:38 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"sWcmHeC9en5wY5uK4RIpVLRV2rFLFefFizk7QoRRwwmuoMJcLeGpAME24mzNPlGImWJ/ooTLdPUjFPv0s749dg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"shop_id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (32.8ms)
Completed 200 OK in 107ms (Views: 78.0ms | ActiveRecord: 2.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:32:48 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"m43TUZ5rz88QLqXMpu4/pbysCM8DIUAoE3/SliuIa8GESjcQUzccsaF73CqKwkd5kZut3Mz/0xi7UhIgHGeVvg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.0ms)
Completed 200 OK in 50ms (Views: 44.8ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:35:05 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lCaKS6zWS6eZ+i3S6VGMJnXNsa9wc/zmEePHheh4u6SL4W4KYYqY2SivVDTFffT6WPoUvL+tb9a5zgcz35dF2w==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (29.8ms)
Completed 200 OK in 87ms (Views: 67.6ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:35:13 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NsGSR0abOxKiPCrd7bavF82YcUWvr3FOiPCVjpAT9wgpBnYGi8fobBNpUzvBmtfL4K/UVmBx4n4g3VU4p/wJdw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.7ms)
Completed 200 OK in 51ms (Views: 45.7ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:38:12 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"4KgcWTZF1B+cSUaOjqsulDR8Qoaom6QBcvsVd1i3dCv/b/gY+xkHYS0cP2iih1ZIGUvnlWdFNzHa1tXBb1iKVA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: id
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 22ms (ActiveRecord: 1.2ms)

ActiveRecord::AssociationTypeMismatch (Template(#70094158563960) expected, got ActionController::Parameters(#70094161337760)):
  app/controllers/home_controller.rb:23:in `update_preferences'




Started GET "/preferences?hmac=d28b267b0b2a950cb902c73c38a22ed473848f403504ae1e702115a40f1c34cf&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5ba385e71ef1ec3cb77b39fdd42a43c7&timestamp=1444027102" for 113.173.207.242 at 2015-10-05 13:38:24 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d28b267b0b2a950cb902c73c38a22ed473848f403504ae1e702115a40f1c34cf", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5ba385e71ef1ec3cb77b39fdd42a43c7", "timestamp"=>"1444027102"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.7ms)
Completed 200 OK in 293ms (Views: 274.5ms | ActiveRecord: 1.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:38:34 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"nf3cagRWVf/xf+OOs7YIXlUCMA5gyQYpe5JX2UQMnSuCOjgryQqGgUAqmmifmnCCeDWVHa8XlRnTv5dvc+NjVA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.1ms)[0m  rollback transaction
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms)

ActiveRecord::AssociationTypeMismatch (Template(#70094158563960) expected, got ActionController::Parameters(#70094161337760)):
  app/controllers/home_controller.rb:23:in `update_preferences'




Started GET "/preferences?hmac=870b24a326f83b1b00d223eed870d14d0a671318fbc1e2c358e769ef64413fe3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=98c1b3a30f461d27429a46852a5902ba&timestamp=1444027168" for 113.173.207.242 at 2015-10-05 13:39:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"870b24a326f83b1b00d223eed870d14d0a671318fbc1e2c358e769ef64413fe3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"98c1b3a30f461d27429a46852a5902ba", "timestamp"=>"1444027168"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (37.6ms)
Completed 200 OK in 225ms (Views: 167.5ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:39:39 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"lPgMXhXBPu8uPP47W1i8t8rsVgg32VPW5U5k6gKDAaqLP+gf2J3tkZ9ph913dMRr59vzG/gHwOZNY6RcNWz/1Q==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template"=>{"id"=>"1", "order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.4ms)

ActiveRecord::AssociationTypeMismatch (Template(#70094153049420) expected, got ActionController::Parameters(#70094161337760)):
  app/controllers/home_controller.rb:23:in `update_preferences'




Started GET "/preferences?hmac=9f1ba01212b8181e5e1cb555659567bc694b841e618b628d4cf7b15614872c9c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=618240a4a827698eb9e23b02d03ba459&timestamp=1444027243" for 113.173.207.242 at 2015-10-05 13:40:45 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9f1ba01212b8181e5e1cb555659567bc694b841e618b628d4cf7b15614872c9c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"618240a4a827698eb9e23b02d03ba459", "timestamp"=>"1444027243"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (1.6ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (45.3ms)
Completed 200 OK in 215ms (Views: 208.9ms | ActiveRecord: 2.0ms)


Started GET "/preferences?hmac=f910d0e7b894035caa0b4fde58b1f4b47a2c1d312ad29129e98dc8612dbaa0fe&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=710d61c4b0e534cb7d7549f6fcb1026c&timestamp=1444027256" for 113.173.207.242 at 2015-10-05 13:40:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f910d0e7b894035caa0b4fde58b1f4b47a2c1d312ad29129e98dc8612dbaa0fe", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"710d61c4b0e534cb7d7549f6fcb1026c", "timestamp"=>"1444027256"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (36.9ms)
Completed 200 OK in 263ms (Views: 196.5ms | ActiveRecord: 2.7ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:41:07 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"c7DLvkQeo/r/e0BcZpNBKXKiOxzq7cD9rz9HcQvkUPZsdy//iUJwhE4uObpKvzn1X5WeDyUzU80HEofHPAuuiQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>"", "id"=>"1"}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: template_attributes
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.3ms)
Completed 200 OK in 62ms (Views: 53.9ms | ActiveRecord: 0.8ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:41:33 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iXpZJtaugepLnk+fr+qlYdm4yGe0njqdBFIQ7b0FjtCWvb1nG/JSlPrLNnmDxt299I9tdHtAqa2sf9Bbiupwrw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"order_creation"=>"demo", "order_update"=>"", "order_payment"=>"", "customer_creation"=>"", "id"=>"1"}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: id
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mSQL (0.4ms)[0m  UPDATE "templates" SET "shop_id" = ?, "updated_at" = ? WHERE "templates"."id" = ?  [["shop_id", nil], ["updated_at", "2015-10-05 06:41:33.323483"], ["id", 1]]
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "templates" ("order_creation", "order_update", "order_payment", "customer_creation", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)  [["order_creation", "demo"], ["order_update", ""], ["order_payment", ""], ["customer_creation", ""], ["shop_id", 1], ["created_at", "2015-10-05 06:41:33.329347"], ["updated_at", "2015-10-05 06:41:33.329347"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.7ms)
Completed 200 OK in 91ms (Views: 50.6ms | ActiveRecord: 4.4ms)


Started GET "/preferences?hmac=817e5c1996b4b8224fe9c24140cffd40880eceea8c43c0fa67fd4c442c76734b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d2e1460bda05c20c87498379df8094a4&timestamp=1444027307" for 113.173.207.242 at 2015-10-05 13:41:50 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"817e5c1996b4b8224fe9c24140cffd40880eceea8c43c0fa67fd4c442c76734b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d2e1460bda05c20c87498379df8094a4", "timestamp"=>"1444027307"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.1ms)
Completed 200 OK in 66ms (Views: 61.8ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:42:02 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"heQXDXXO7zLh1viDiZGga4LTbrwTG7/AKIotsxEmX0qaI/NMuJI8TFCDgWWlvdi3r+TLr9zFLPCAp+0FJsmhNQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"order_creation"=>"de ", "order_update"=>"", "order_payment"=>"", "customer_creation"=>"", "id"=>"2"}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Unpermitted parameter: id
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mSQL (0.3ms)[0m  [1mUPDATE "templates" SET "shop_id" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["shop_id", nil], ["updated_at", "2015-10-05 06:42:02.930322"], ["id", 2]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.1ms)[0m  [1mINSERT INTO "templates" ("order_creation", "order_update", "order_payment", "customer_creation", "shop_id", "created_at", "updated_at") VALUES (?, ?, ?, ?, ?, ?, ?)[0m  [["order_creation", "de "], ["order_update", ""], ["order_payment", ""], ["customer_creation", ""], ["shop_id", 1], ["created_at", "2015-10-05 06:42:02.933516"], ["updated_at", "2015-10-05 06:42:02.933516"]]
  [1m[35m (2.6ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.2ms)
Completed 200 OK in 56ms (Views: 43.1ms | ActiveRecord: 3.7ms)


Started GET "/preferences?hmac=6778b27872fc83927a9647ab105a344e577b74d460fb6341fde7dd53a33c9ebb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=053624cc0e1a03a606d7c42c7c05d6c9&timestamp=1444027343" for 113.173.207.242 at 2015-10-05 13:42:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6778b27872fc83927a9647ab105a344e577b74d460fb6341fde7dd53a33c9ebb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"053624cc0e1a03a606d7c42c7c05d6c9", "timestamp"=>"1444027343"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (53.3ms)
Completed 200 OK in 232ms (Views: 175.9ms | ActiveRecord: 2.8ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:42:35 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1T/4YqwoVjlODVlWPIkmYG1Wy7LxURzpo0G9si+QRrjK+BwjYXSFR/9YILAQpV68QGFuoT6Pj9kLbH0EGH+4xw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hi", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", "Hi"], ["updated_at", "2015-10-05 06:42:35.754749"], ["id", 3]]
  [1m[35m (2.4ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.0ms)
Completed 200 OK in 58ms (Views: 44.1ms | ActiveRecord: 3.5ms)


Started POST "/preferences" for 113.173.207.242 at 2015-10-05 13:45:03 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cDYmplqK8ScbLH8vEgDFD1X+8wU1F0d9wCxA9+X8PUFv8cLnl9YiWap5Bsk+LL3TeMlWFvrJ1E1oAYBB0hPDPg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"", "kandy_api_secret"=>"", "kandy_phonenumber"=>"", "kandy_username"=>"", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?  [["order_creation", ""], ["updated_at", "2015-10-05 06:45:03.776135"], ["id", 3]]
  [1m[36m (2.6ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.3ms)
Completed 200 OK in 54ms (Views: 43.4ms | ActiveRecord: 3.6ms)


Started GET "/?hmac=7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84cbe96aea0851256fb1f19fd3bc4874&timestamp=1444030239" for 42.118.134.227 at 2015-10-05 14:30:41 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"84cbe96aea0851256fb1f19fd3bc4874", "timestamp"=>"1444030239"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 34ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:30:42 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (19.4ms)
Completed 200 OK in 149ms (Views: 125.1ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:30:43 +0700


Started GET "/auth/shopify/callback?code=4a5bc18a10acc79f6d59ba1a4aefede6&hmac=696ca5173c3590628c5be482bc1d28dbcee7cb5f403fb303f94f0d38b7e53a52&shop=letranloc-2.myshopify.com&signature=a7f99eca9c0b88958891f32df7469e8c&state=5d8eb917ae29a26d3ee8ba6636aba066b47d5e8ac8b8cca7&timestamp=1444030244" for 42.118.134.227 at 2015-10-05 14:30:44 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"4a5bc18a10acc79f6d59ba1a4aefede6", "hmac"=>"696ca5173c3590628c5be482bc1d28dbcee7cb5f403fb303f94f0d38b7e53a52", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a7f99eca9c0b88958891f32df7469e8c", "state"=>"5d8eb917ae29a26d3ee8ba6636aba066b47d5e8ac8b8cca7", "timestamp"=>"1444030244"}
  [1m[36mShop Load (10.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84cbe96aea0851256fb1f19fd3bc4874&timestamp=1444030239
Completed 302 Found in 308ms (ActiveRecord: 13.1ms)


Started GET "/?hmac=7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84cbe96aea0851256fb1f19fd3bc4874&timestamp=1444030239" for 42.118.134.227 at 2015-10-05 14:30:46 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"84cbe96aea0851256fb1f19fd3bc4874", "timestamp"=>"1444030239"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (146.2ms)
Completed 200 OK in 3555ms (Views: 2462.8ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=a5cf8516b4cbc8a7c56163980ffcbfa99e93146306b221656c771e7f28e3739e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1dafbdd8786c10796db2e6e662e7dd9c&timestamp=1444030251" for 42.118.134.227 at 2015-10-05 14:30:53 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"a5cf8516b4cbc8a7c56163980ffcbfa99e93146306b221656c771e7f28e3739e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1dafbdd8786c10796db2e6e662e7dd9c", "timestamp"=>"1444030251"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 1109ms (Views: 61.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 14:31:03 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)

NoMethodError (undefined method `template' for nil:NilClass):
  app/controllers/home_controller.rb:15:in `preferences'




Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:31:57 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 1ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:31:57 +0700
  [1m[36m (1.7ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (17.0ms)[0m  select sqlite_version(*)
  [1m[36m (1.3ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.3ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.8ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.8ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (1.4ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_password" varchar[0m
  [1m[35m (0.8ms)[0m  ALTER TABLE "shops" ADD "kandy_token" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "sms_order_template" varchar[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150930140112"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Migrating to CreateTemplates (20151005045008)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mCREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) [0m
  [1m[35m (0.2ms)[0m  CREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20151005045008"]]
  [1m[35m (1.7ms)[0m  commit transaction
  [1m[36mActiveRecord::SchemaMigration Load (0.1ms)[0m  [1mSELECT "schema_migrations".* FROM "schema_migrations"[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'

  [1m[36m (0.3ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'
[0m


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:33:46 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.5ms)
Completed 200 OK in 9ms (Views: 8.4ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 14:33:47 +0700


Started GET "/auth/shopify/callback?code=755c89a75333de26ce245c843398dc91&hmac=606dc4fb156ec3e31a7204729eb052d7be8041c8d8acc104463906e70187eb99&shop=letranloc-2.myshopify.com&signature=4c1bb5774ef01cf5e40af5d3e74d3be9&state=0241384508bf921aa068b90c600f70cfefadac6859f7c472&timestamp=1444030470" for 42.118.134.227 at 2015-10-05 14:34:31 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"755c89a75333de26ce245c843398dc91", "hmac"=>"606dc4fb156ec3e31a7204729eb052d7be8041c8d8acc104463906e70187eb99", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4c1bb5774ef01cf5e40af5d3e74d3be9", "state"=>"0241384508bf921aa068b90c600f70cfefadac6859f7c472", "timestamp"=>"1444030470"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "05e339c0b0e6f0007998bf2d073642c6"], ["created_at", "2015-10-05 07:34:32.428230"], ["updated_at", "2015-10-05 07:34:32.428230"]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84cbe96aea0851256fb1f19fd3bc4874&timestamp=1444030239
Completed 302 Found in 86ms (ActiveRecord: 5.7ms)


Started GET "/?hmac=7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84cbe96aea0851256fb1f19fd3bc4874&timestamp=1444030239" for 42.118.134.227 at 2015-10-05 14:34:32 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7a382b5505cb472eb9cede1fbbdb953a9dfb1264a3d59deafae927b93a646b22", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"84cbe96aea0851256fb1f19fd3bc4874", "timestamp"=>"1444030239"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (67.1ms)
Completed 200 OK in 1541ms (Views: 503.0ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=3185b801f1c8c636e4ddf47ceb26322ddcc27564913d459b8894639b1053da61&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d61ef361ae3b1db3408a9d1d57ecfa45&timestamp=1444030475" for 42.118.134.227 at 2015-10-05 14:34:36 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"3185b801f1c8c636e4ddf47ceb26322ddcc27564913d459b8894639b1053da61", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d61ef361ae3b1db3408a9d1d57ecfa45", "timestamp"=>"1444030475"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1081ms (Views: 51.1ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 14:34:45 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.4ms)

NoMethodError (undefined method `template' for nil:NilClass):
  app/controllers/home_controller.rb:15:in `preferences'




Started GET "/?hmac=44d3dee661bf33457461fbf76e9478d86cc235cd12643eb58d63b77190d89ae4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=98f389982ab7060f7d1c8a8268f538d9&timestamp=1444030566" for 42.118.134.227 at 2015-10-05 14:36:08 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"44d3dee661bf33457461fbf76e9478d86cc235cd12643eb58d63b77190d89ae4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"98f389982ab7060f7d1c8a8268f538d9", "timestamp"=>"1444030566"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1537ms (Views: 61.7ms | ActiveRecord: 2.1ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 14:36:15 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.4ms)

NoMethodError (undefined method `template' for nil:NilClass):
  app/controllers/home_controller.rb:15:in `preferences'




Started GET "/?hmac=f1d1a97bbebc97e24608009b40344d66881a0194fc3bc17ec3a1c2ac6b2b96d9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a34771cee1891720c148e348dfde77c8&timestamp=1444030610" for 42.118.134.227 at 2015-10-05 14:36:52 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f1d1a97bbebc97e24608009b40344d66881a0194fc3bc17ec3a1c2ac6b2b96d9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a34771cee1891720c148e348dfde77c8", "timestamp"=>"1444030610"}
  [1m[36mShop Load (0.6ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1179ms (Views: 69.9ms | ActiveRecord: 2.0ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 14:36:58 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" IS NULL LIMIT 1[0m
Completed 500 Internal Server Error in 3ms (ActiveRecord: 0.3ms)

NoMethodError (undefined method `template' for nil:NilClass):
  app/controllers/home_controller.rb:15:in `preferences'




Started GET "/?hmac=152ad7f51b2a5cd7ce883470dcb501260dbdc9147980e1a57d6372b77165de37&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=03eb5e7e801095e89d255dd770ca63bc&timestamp=1444030668" for 42.118.134.227 at 2015-10-05 14:37:49 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"152ad7f51b2a5cd7ce883470dcb501260dbdc9147980e1a57d6372b77165de37", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"03eb5e7e801095e89d255dd770ca63bc", "timestamp"=>"1444030668"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 2037ms (Views: 40.2ms | ActiveRecord: 1.6ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 14:37:56 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 07:37:56.537157"], ["updated_at", "2015-10-05 07:37:56.537157"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (45.9ms)
Completed 200 OK in 193ms (Views: 101.4ms | ActiveRecord: 3.6ms)


Started GET "/preferences?hmac=ed5eafe1fb64a5fffd450da907a9dc62a707b99a3b710c45efaaef5359f4b8e7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ba9c737f20c8d857de3d4baa8469f2ec&timestamp=1444030688" for 42.118.134.227 at 2015-10-05 14:38:10 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ed5eafe1fb64a5fffd450da907a9dc62a707b99a3b710c45efaaef5359f4b8e7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ba9c737f20c8d857de3d4baa8469f2ec", "timestamp"=>"1444030688"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.7ms)
Completed 200 OK in 72ms (Views: 67.7ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=5f70212856d62708c7c28c3a6dd47f4a0b5f3cefab05472cfecc7e39a5ca522c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=10e5c0af0add612db347da9aec1dceac&timestamp=1444033200" for 42.118.134.227 at 2015-10-05 15:20:02 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"5f70212856d62708c7c28c3a6dd47f4a0b5f3cefab05472cfecc7e39a5ca522c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"10e5c0af0add612db347da9aec1dceac", "timestamp"=>"1444033200"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (1.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.9ms)
Completed 200 OK in 123ms (Views: 75.8ms | ActiveRecord: 3.5ms)


Started GET "/preferences?hmac=6788df3d8a893af96a0122af0ac5b71f45adb52883c57082100e31e98716270f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=80ac0b35e052fbedaaee32594dde20fc&timestamp=1444033260" for 42.118.134.227 at 2015-10-05 15:21:02 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6788df3d8a893af96a0122af0ac5b71f45adb52883c57082100e31e98716270f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"80ac0b35e052fbedaaee32594dde20fc", "timestamp"=>"1444033260"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 31ms (ActiveRecord: 1.8ms)

NoMethodError (undefined method `debug' for #<HomeController:0x007fac0cc23660>):
  app/controllers/home_controller.rb:14:in `preferences'




Started GET "/preferences?hmac=7e3a65f0e1acc674b0cec4cec8572192f58a6784683e1011409cbc2fd4ee13e7&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9d0cf60daca44a6b8d110a7fc1a4fc31&timestamp=1444033468" for 42.118.134.227 at 2015-10-05 15:24:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"7e3a65f0e1acc674b0cec4cec8572192f58a6784683e1011409cbc2fd4ee13e7", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9d0cf60daca44a6b8d110a7fc1a4fc31", "timestamp"=>"1444033468"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 8ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `debug' for #<HomeController:0x007fac13831b18>):
  app/controllers/home_controller.rb:14:in `preferences'




Started GET "/preferences?hmac=618dceaa57c1fe199c2fc38f0b4c21d8de0b1f50a4d5f1890cc058fbd797847d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2e894d8066588ade5559525f7548b057&timestamp=1444033570" for 42.118.134.227 at 2015-10-05 15:26:13 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"618dceaa57c1fe199c2fc38f0b4c21d8de0b1f50a4d5f1890cc058fbd797847d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2e894d8066588ade5559525f7548b057", "timestamp"=>"1444033570"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.8ms)
Completed 200 OK in 105ms (Views: 63.5ms | ActiveRecord: 2.5ms)
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.2ms)[0m  select sqlite_version(*)
  [1m[36m (1.6ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.6ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.5ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.5ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.2ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_token" varchar[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "shops" ADD "sms_order_template" varchar
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150930140112"]]
  [1m[35m (1.4ms)[0m  commit transaction
Migrating to CreateTemplates (20151005045008)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.9ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.2ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 16:33:24 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[36mShop Load (6.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 185ms (ActiveRecord: 16.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 16:33:25 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.3ms)
Completed 200 OK in 51ms (Views: 34.5ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 16:33:26 +0700


Started GET "/auth/shopify/callback?code=5ee9aa5f25e148a66bb9c1ab7f1b04e4&hmac=7070ddd7f22d94a18f87922bec25023af19762a937ab570c32ca2c326869878c&shop=letranloc-2.myshopify.com&signature=d872fd72850548d3230dc104979e8407&state=43f45f1fe086e5b017bf89376119cfd390e43f1e169cdac8&timestamp=1444037606" for 42.118.134.227 at 2015-10-05 16:33:27 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"5ee9aa5f25e148a66bb9c1ab7f1b04e4", "hmac"=>"7070ddd7f22d94a18f87922bec25023af19762a937ab570c32ca2c326869878c", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d872fd72850548d3230dc104979e8407", "state"=>"43f45f1fe086e5b017bf89376119cfd390e43f1e169cdac8", "timestamp"=>"1444037606"}
  [1m[35mShop Load (17.8ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (0.8ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "05e339c0b0e6f0007998bf2d073642c6"], ["created_at", "2015-10-05 09:33:29.004244"], ["updated_at", "2015-10-05 09:33:29.004244"]]
  [1m[35m (1.5ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602
Completed 302 Found in 109ms (ActiveRecord: 20.5ms)


Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 16:33:29 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (12.6ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 09:33:29.517232"], ["updated_at", "2015-10-05 09:33:29.517232"]]
  [1m[35m (1.8ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (290.7ms)
Completed 200 OK in 1368ms (Views: 1309.8ms | ActiveRecord: 16.4ms)


Started GET "/preferences?hmac=6e0b8a4ea6444918f44781906275833f57cf48bdd1f12eae4427d57af7c9fd7e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=01b5f292390748d392798f89b16bc318&timestamp=1444037612" for 42.118.134.227 at 2015-10-05 16:33:34 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6e0b8a4ea6444918f44781906275833f57cf48bdd1f12eae4427d57af7c9fd7e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"01b5f292390748d392798f89b16bc318", "timestamp"=>"1444037612"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (10.4ms)
Completed 200 OK in 103ms (Views: 98.2ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:34:42 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"zd803Ia/upgzjiuawV1+1so4Zulx9yqv66LPceYIK+1qrogH3ULAX+0yfxtD66DvdPH46vJzbIVJzZmzw5tjBQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (1.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "shops" SET "kandy_api_key" = ?, "kandy_api_secret" = ?, "kandy_phonenumber" = ?, "kandy_username" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_api_key", "DAK81e603cf961e4c0295aa8e665828913d"], ["kandy_api_secret", "DAS89933b8fc32949dc84eeebfabadfddee"], ["kandy_phonenumber", ""], ["kandy_username", "user2@jupiter.kodeplus.net"], ["updated_at", "2015-10-05 09:34:42.357806"], ["id", 1]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "order_update" = ?, "order_payment" = ?, "customer_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", ""], ["order_update", ""], ["order_payment", ""], ["customer_creation", ""], ["updated_at", "2015-10-05 09:34:42.360880"], ["id", 1]]
  [1m[35m (1.9ms)[0m  commit transaction
Completed 500 Internal Server Error in 70ms (ActiveRecord: 4.1ms)

ArgumentError (wrong number of arguments (1 for 2)):
  app/services/kandy.rb:16:in `get_user_access_token'
  app/controllers/home_controller.rb:25:in `update_preferences'




Started GET "/preferences?hmac=10d86911e1dc8b7fc78a27dae273f7e206ec3e44e5352cb2bfcd09803f9fc2c9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=14d25cc9a514562572d089d5cbe76a48&timestamp=1444037709" for 42.118.134.227 at 2015-10-05 16:35:11 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"10d86911e1dc8b7fc78a27dae273f7e206ec3e44e5352cb2bfcd09803f9fc2c9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"14d25cc9a514562572d089d5cbe76a48", "timestamp"=>"1444037709"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (14.6ms)
Completed 200 OK in 189ms (Views: 100.9ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:35:25 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TudfeHVAD9F412zBP7fbV05R192fzUTBJzPUfzAP1jLpluOjLr11FqZrOEC9AQVu8JhJ3hxJAuuFXIK9FZye2g==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 24ms (ActiveRecord: 0.7ms)

NoMethodError (undefined method `+' for nil:NilClass):
  app/services/kandy.rb:13:in `url'
  app/services/kandy.rb:17:in `get_user_access_token'
  app/controllers/home_controller.rb:25:in `update_preferences'




Started GET "/preferences?hmac=25638f8f46436ff2116fd392243c398a1cd0f2cb3b891411822257e89f939f65&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=71a3114e2bdffb98f25e5ef4c77c6341&timestamp=1444037797" for 42.118.134.227 at 2015-10-05 16:36:39 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"25638f8f46436ff2116fd392243c398a1cd0f2cb3b891411822257e89f939f65", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"71a3114e2bdffb98f25e5ef4c77c6341", "timestamp"=>"1444037797"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.8ms)
Completed 200 OK in 240ms (Views: 176.9ms | ActiveRecord: 3.0ms)


Started GET "/preferences?hmac=bad4e248c2cc18b46f9b6de40dcfbb28a50f917784effa85a1f2a94dbe41acef&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4b9e1fbaf710bcacb3d7959f876f4786&timestamp=1444037858" for 42.118.134.227 at 2015-10-05 16:37:39 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"bad4e248c2cc18b46f9b6de40dcfbb28a50f917784effa85a1f2a94dbe41acef", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4b9e1fbaf710bcacb3d7959f876f4786", "timestamp"=>"1444037858"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.5ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (47.2ms)
Completed 200 OK in 188ms (Views: 142.1ms | ActiveRecord: 2.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:37:58 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Wtfx+3crEw4XeotvffW5BY/IXgqJex20ts7NfFaVu3b9pk0gLNZpycnG3+7/Q2c8MQHACQr/W54UoZu+cwbzng==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 1363ms (ActiveRecord: 0.6ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:18:in `get_user_access_token'
  app/controllers/home_controller.rb:26:in `update_preferences'




Started GET "/preferences?hmac=1d24279a8421d6d5b02da57415cfafa5c05100d67074d665b17b3acdd282586d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9cbaaa02421ce53e3a65c9ee23ae1f15&timestamp=1444037971" for 42.118.134.227 at 2015-10-05 16:39:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"1d24279a8421d6d5b02da57415cfafa5c05100d67074d665b17b3acdd282586d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9cbaaa02421ce53e3a65c9ee23ae1f15", "timestamp"=>"1444037971"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.5ms)
Completed 200 OK in 108ms (Views: 72.2ms | ActiveRecord: 2.4ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:39:43 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DI6qfJauQZUGQaAx+7uscLz7OHeXOSQw0ytkRoyB5AKr/xanzVM7Utj99LB5DXJJAjKmdBS9YhpxRDKEqRKs6g==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (5.5ms)
Completed 200 OK in 1143ms (Views: 47.6ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=e53ba6c8f465dc5ba89e9bbd1ddb86b362b14575ed13163fc5ac7623db6ca4d1&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=8fb8f1d574d3577ef931d92a048c58e5&timestamp=1444038195" for 42.118.134.227 at 2015-10-05 16:43:17 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e53ba6c8f465dc5ba89e9bbd1ddb86b362b14575ed13163fc5ac7623db6ca4d1", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"8fb8f1d574d3577ef931d92a048c58e5", "timestamp"=>"1444038195"}
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.3ms)
Completed 200 OK in 251ms (Views: 177.0ms | ActiveRecord: 3.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:43:26 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kMihcuBTl1P2ZR06OoTNrq24TXnirEMxdQVj/qR6Wxo3uR2pu67tlCjZSbu4MhOXE3HTemEoBRvXajU8gekT8g==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.0ms)
Completed 200 OK in 1041ms (Views: 43.1ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:44:52 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"fElJ4zbUIxtVm5SRP3r5TVY6pNtNZSeYHcg9Dfl/yqbbOPU4bSlZ3IsnwBC9zCd06PM62M7hYbK/p2vP3OyCTg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.7ms)
Completed 200 OK in 1171ms (Views: 47.2ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:45:39 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"NHmfQfG6H7zyTDqNew4cThVoUHiHuC2pGXhmxq2ivnqTCCOaqkdleyzwbgz5uMJ3q6HOewQ8a4O7FzAEiDH2kg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.1ms)
Completed 200 OK in 1010ms (Views: 48.6ms | ActiveRecord: 3.3ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:47:28 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gcPPzA850yPpZ3Mgcdbp0R1fJ6IPn9kmQKy1J2KgPOYmsnMXVMSp5DfbJ6HzYDfoo5a5oYwbnwziw+PlRzN0Dg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.1ms)
Completed 200 OK in 1162ms (Views: 50.1ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:47:48 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"DZaGQP5/sgpFh8LKWqyLJrzGVit1o5UXSVLuG3L9NLSq5zqbpYLIzZs7lkvYGlUfAg/IKPYn0z3rPbjZV258XA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.3ms)
Completed 200 OK in 1692ms (Views: 66.0ms | ActiveRecord: 2.2ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:48:14 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"61832JOkShh90TTilLGv/FZjHOYHcV+iplrbd/NJ6wZMLosDyFkw36NtYGMWB3HF6KqC5YT1GYgENY211tqj7g==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (4.9ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (6.4ms)
Completed 200 OK in 1094ms (Views: 87.3ms | ActiveRecord: 7.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:48:29 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"UTbIRqR+/X78SadLkitYkGbFKBlNuOJeXV/D5j44z1L2R3Sd/4OHuSL188oQnYap2Ay2Gs48pHT/MJUkG6uHug==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.7ms)
Completed 200 OK in 1573ms (Views: 48.7ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:49:47 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"BaHEXS3RO8BX7jNEGulrd1uwX7nsYLFMC9lvQxkJ0yei0HiGdixBB4lSZ8WYX7VO5XnBum/k92aptjmBPJqbzw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.9ms)
Completed 200 OK in 1036ms (Views: 46.6ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:50:39 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"TwFaxEPfNH04WsPTNydJxYSEeT/J1u2fbiYMZwRoooDocOYfGCJOuubml1K1kZf8Ok3nPEpSq7XMSVqlIfvqaA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (6.3ms)
Completed 200 OK in 1175ms (Views: 45.5ms | ActiveRecord: 2.2ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:50:51 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"SK0nYIm2o8IGbcOiEry2MfuqhHul3JI+Pnzl92/8J8fv3Ju70kvZBdjRlyOQCmgIRWMaeCZY1BScE7M1Sm9vLw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.4ms)
Completed 200 OK in 1641ms (Views: 44.9ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:51:23 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kioDlgaNm4mTqu6LjfwISc/keosgQVhm/3L2FUP3yZo1W79NXXDhTk0WugoPStZwcS3kiKPFHkxdHaDXZmSBcg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.3ms)
Completed 200 OK in 1072ms (Views: 45.8ms | ActiveRecord: 1.9ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:52:57 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"B3j7YCaBuB8CX+UDtDtdCVzs31gXYdEDTSsCGsdApuSgCUe7fXzC2NzjsYI2jYMw4iVBW5TllynvRFTY4tPuDA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.8ms)
Completed 200 OK in 1255ms (Views: 45.0ms | ActiveRecord: 1.8ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:53:27 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"XeQV4k8BxnQEI8LMmbzzOH692JQ2Jd4QKXHkBGjV5XP6lak5FPy8s9qflk0bCi0BwHRGl7WhmDqLHrLGTUatmw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.5ms)
Completed 200 OK in 1148ms (Views: 58.0ms | ActiveRecord: 1.9ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:53:43 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KaUcBKKfdYo/TUQ34dhWS3LN7e8Ah1LWXGo6YZV02ZKO1KDf+WIPTeHxELZjbohyzARz7IMDFPz+BWyjsOeReg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 1103ms (ActiveRecord: 2.4ms)

NoMethodError (undefined method `message' for "{\"message\":\"Invalid User\",\"status\":1}":String):
  app/services/kandy.rb:19:in `get_user_access_token'
  app/controllers/home_controller.rb:26:in `update_preferences'




Started GET "/preferences?hmac=85ce1e0c714cc7fec72e8ad328099e9635f419925142b2afcdf838e327f321b9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=386bd5b3f2d27813809a752068fba011&timestamp=1444039132" for 42.118.134.227 at 2015-10-05 16:58:54 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"85ce1e0c714cc7fec72e8ad328099e9635f419925142b2afcdf838e327f321b9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"386bd5b3f2d27813809a752068fba011", "timestamp"=>"1444039132"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (10.2ms)
Completed 200 OK in 401ms (Views: 319.7ms | ActiveRecord: 3.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 16:59:03 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gLRgmA0eWLtEHJ9C/WH9IXo815PLNlQTRdPwKaABHbwnxdxDVuMifJqgy8N/1yMYxPVJkEiyEjnnvKbrhZJVVA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Completed 500 Internal Server Error in 1318ms (ActiveRecord: 0.7ms)

TypeError (no implicit conversion of Symbol into Integer):
  app/controllers/home_controller.rb:27:in `[]'
  app/controllers/home_controller.rb:27:in `update_preferences'




Started GET "/preferences?hmac=cb830c5a64ac5204684f53c6a64e9afcc8dc8d39516c1730eaa9fd177a3ababc&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ab8a743f949f26dbd324ba23ef7a07de&timestamp=1444039258" for 42.118.134.227 at 2015-10-05 17:00:59 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"cb830c5a64ac5204684f53c6a64e9afcc8dc8d39516c1730eaa9fd177a3ababc", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ab8a743f949f26dbd324ba23ef7a07de", "timestamp"=>"1444039258"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (14.7ms)
Completed 200 OK in 133ms (Views: 76.9ms | ActiveRecord: 3.3ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:01:06 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"7DXJ4pfJZ+mjqk8uO17VFLQD0zF1b7yaGUMHA/JftJtLRHU5zDQdLn0WG6+56AstCspNMvbr+rC7LFHB18z8cw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 1059ms (ActiveRecord: 0.7ms)

ArgumentError (wrong number of arguments (1 for 0)):
  app/services/kandy.rb:19:in `get_user_access_token'
  app/controllers/home_controller.rb:26:in `update_preferences'




Started GET "/preferences?hmac=bff0d5b9b3e355f110c0928d163d9ed26e5e8d7dac939d924eb718cdf33f20f0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7c5c55eb45d8c71106536a6a4419bb99&timestamp=1444039304" for 42.118.134.227 at 2015-10-05 17:01:45 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"bff0d5b9b3e355f110c0928d163d9ed26e5e8d7dac939d924eb718cdf33f20f0", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7c5c55eb45d8c71106536a6a4419bb99", "timestamp"=>"1444039304"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.5ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.8ms)
Completed 200 OK in 113ms (Views: 65.7ms | ActiveRecord: 3.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:01:51 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"VQbMndqDIHHfvEDbdApTEFry/AYaC97SL9cLV2eGKezyd3BGgX5atgEAFFr2vI0p5DtiBZmPmPiNuF2VQhVhBA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Completed 500 Internal Server Error in 1075ms (ActiveRecord: 0.7ms)

ArgumentError (wrong number of arguments (1 for 0)):
  app/services/kandy.rb:19:in `get_user_access_token'
  app/controllers/home_controller.rb:26:in `update_preferences'




Started GET "/preferences?hmac=9e0bd431222cbfab98052d6492e2ac2d6515a477403933d79b66f89d22caf887&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=057207024554eec09b8009079aa35600&timestamp=1444039392" for 42.118.134.227 at 2015-10-05 17:03:14 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9e0bd431222cbfab98052d6492e2ac2d6515a477403933d79b66f89d22caf887", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"057207024554eec09b8009079aa35600", "timestamp"=>"1444039392"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.7ms)
Completed 200 OK in 115ms (Views: 72.2ms | ActiveRecord: 2.6ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:03:19 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"kNmD9UP59BADMB/JuDOzxSC+2+IXEb2Eqf/d1Ka47g03qD8uGASO192MS0g6hW38nndF4ZSV+64LkIsWgyum5Q==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 1046ms (ActiveRecord: 0.6ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/home_controller.rb:30:in `update_preferences'




Started GET "/preferences?hmac=53d1ada33d77695df329baed71959028d99ece7ba996567b57fba7be783d1159&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ac65919c153caa850eb8f0f199f75db3&timestamp=1444039553" for 42.118.134.227 at 2015-10-05 17:05:55 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"53d1ada33d77695df329baed71959028d99ece7ba996567b57fba7be783d1159", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ac65919c153caa850eb8f0f199f75db3", "timestamp"=>"1444039553"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (15.4ms)
Completed 200 OK in 146ms (Views: 108.7ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:06:00 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"wEQ7LQ+8/GnS6ZdlP5IzckMSAdu2TY1TURxd/pU6rhVnNYf2VEGGrgxVw+S9JO1L/duf2DXJy3nzcws8sKnm/Q==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Completed 500 Internal Server Error in 1047ms (ActiveRecord: 0.7ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/home_controller.rb:30:in `update_preferences'




Started GET "/preferences?hmac=0ad22f7e2dc7a5ec446ec96e98db60b8f019924e1237f6cbdd66f84303a2a56a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f402909b128869dd8387d4fb62d733d8&timestamp=1444039633" for 42.118.134.227 at 2015-10-05 17:07:14 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0ad22f7e2dc7a5ec446ec96e98db60b8f019924e1237f6cbdd66f84303a2a56a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f402909b128869dd8387d4fb62d733d8", "timestamp"=>"1444039633"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (7.4ms)
Completed 200 OK in 107ms (Views: 71.5ms | ActiveRecord: 2.8ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:07:20 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"k+OajDRh9+IkFcZeHW9CGdDNJwnKWDW9h98hWUl9eXQ0kiZXb5yNJfqpkt+f2ZwgbgS5Ckncc5clsHebbO4xnA==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 1042ms (ActiveRecord: 0.7ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/home_controller.rb:31:in `update_preferences'




Started GET "/preferences?hmac=bef2b518452ed7c83b7c8abe2541e5bd9b99f28d05cfbd79d0ba1d7a7e15dc91&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b1cb6af5c422fa16727f9735d03f0bcd&timestamp=1444039683" for 42.118.134.227 at 2015-10-05 17:08:05 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"bef2b518452ed7c83b7c8abe2541e5bd9b99f28d05cfbd79d0ba1d7a7e15dc91", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b1cb6af5c422fa16727f9735d03f0bcd", "timestamp"=>"1444039683"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.1ms)
Completed 200 OK in 108ms (Views: 71.8ms | ActiveRecord: 2.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:08:15 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"gKDm5F3XD4i62S7T6kyjd+NNGV7Zyg47Y4CZpDQkitIn0Vo/Bip1T2RlelJo+n1OXYSHXVpOSBHB789mEbfCOg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.0ms)
Completed 200 OK in 1510ms (Views: 60.0ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:08:44 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"mGg+PxjFm0NGIWtSU2dKrVElB7QIsxVvY8NrFcE/g24/GYLkQzjhhJidP9PR0ZSU7+yZt4s3U0XBrD3X5KzLhg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (8.1ms)
Completed 200 OK in 1571ms (Views: 67.1ms | ActiveRecord: 2.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:11:36 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"5+gZz6q33HP/T1K2fcz5W5UzbCIZ5KXp73bsyEIGQXdAmaUU8UqmtCHzBjf/eidiK/ryIZpg48NNGboKZ5UJnw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2@jupiter.kodeplus.net", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.6ms)
Completed 200 OK in 2170ms (Views: 53.2ms | ActiveRecord: 1.8ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 17:15:54 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1MR/jKYf2ydOkAr36V/6vMm6n9CWVIsPnM9kf6oshmdztcNX/eKh4JAsXnZr6SSFd3MB0xXQzSU+oDK9j7/Ojw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (6.4ms)[0m  UPDATE "shops" SET "kandy_username" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_username", "user2"], ["updated_at", "2015-10-05 10:15:55.056070"], ["id", 1]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "shops" SET "kandy_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_token", "UAT41db77993f0643febafb9d59351949ec"], ["updated_at", "2015-10-05 10:15:56.143377"], ["id", 1]]
  [1m[36m (2.6ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 1452ms (Views: 353.7ms | ActiveRecord: 12.2ms)


Started GET "/preferences?hmac=d762c8e7349e0779a10625b6823d28743c25a1da4dfe1feab0d943f482065aca&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c06f4ee2d9f6093d10644cbab4554b58&timestamp=1444040186" for 42.118.134.227 at 2015-10-05 17:16:28 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d762c8e7349e0779a10625b6823d28743c25a1da4dfe1feab0d943f482065aca", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c06f4ee2d9f6093d10644cbab4554b58", "timestamp"=>"1444040186"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (6.8ms)
Completed 200 OK in 146ms (Views: 141.3ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=09e0a60cdf5d9f4bbe90c42fd9d5732b90f03baa095fc494907e58a71ea03ecb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9616ffe613d53a02daf7292de7fba44f&timestamp=1444040279" for 42.118.134.227 at 2015-10-05 17:18:01 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"09e0a60cdf5d9f4bbe90c42fd9d5732b90f03baa095fc494907e58a71ea03ecb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9616ffe613d53a02daf7292de7fba44f", "timestamp"=>"1444040279"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (45.1ms)
Completed 200 OK in 350ms (Views: 345.5ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=3a7cb448a481466da962b86d44cbc53eb5c12e57cee063e83e35c944caf5db81&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5a265b66c06255317ecf5f98cb34574d&timestamp=1444044272" for 42.118.134.227 at 2015-10-05 18:24:34 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3a7cb448a481466da962b86d44cbc53eb5c12e57cee063e83e35c944caf5db81", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5a265b66c06255317ecf5f98cb34574d", "timestamp"=>"1444044272"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (19.8ms)
Completed 200 OK in 327ms (Views: 246.3ms | ActiveRecord: 2.6ms)


Started GET "/preferences?hmac=ebc95c9f87e61aa82e175557008361c609d530077ad0456b17177d14cdfacb53&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6ae56e440c2fa7fb4e546d52ab8d9c43&timestamp=1444044286" for 42.118.134.227 at 2015-10-05 18:24:48 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ebc95c9f87e61aa82e175557008361c609d530077ad0456b17177d14cdfacb53", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6ae56e440c2fa7fb4e546d52ab8d9c43", "timestamp"=>"1444044286"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.8ms)
Completed 200 OK in 142ms (Views: 139.4ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=75ebeef3fbe6e8f717b0b0be8019090c513f3e46b6ddb2df709dd0ef90a9f470&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=84c002d69140bddfabc7d9ced0844901&timestamp=1444044301" for 42.118.134.227 at 2015-10-05 18:25:02 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"75ebeef3fbe6e8f717b0b0be8019090c513f3e46b6ddb2df709dd0ef90a9f470", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"84c002d69140bddfabc7d9ced0844901", "timestamp"=>"1444044301"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (22.2ms)
Completed 200 OK in 79ms (Views: 75.0ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=075792d9300ed22bca734830c4595b63a2ce17167e49db5f262c5540d7d4773b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b33dc289f031898b178f4089cad9860a&timestamp=1444044350" for 42.118.134.227 at 2015-10-05 18:25:51 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"075792d9300ed22bca734830c4595b63a2ce17167e49db5f262c5540d7d4773b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b33dc289f031898b178f4089cad9860a", "timestamp"=>"1444044350"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (27.5ms)
Completed 200 OK in 73ms (Views: 70.0ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=3b7e1eca44eee596e1427340cd6ab140f9534b6711fc7d5e272ef191b3cde020&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3188ffcdffa6d969b67b494cc4727d67&timestamp=1444044366" for 42.118.134.227 at 2015-10-05 18:26:08 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"3b7e1eca44eee596e1427340cd6ab140f9534b6711fc7d5e272ef191b3cde020", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3188ffcdffa6d969b67b494cc4727d67", "timestamp"=>"1444044366"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (23.2ms)
Completed 200 OK in 68ms (Views: 65.3ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=19090179ced60c163066e38a8faf7ebe43ad23ae951d6ddac3bc30efbbf86904&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=85d20cb233ffce99483fb42a275bedb9&timestamp=1444044380" for 42.118.134.227 at 2015-10-05 18:26:22 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"19090179ced60c163066e38a8faf7ebe43ad23ae951d6ddac3bc30efbbf86904", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"85d20cb233ffce99483fb42a275bedb9", "timestamp"=>"1444044380"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (49.8ms)
Completed 200 OK in 122ms (Views: 117.9ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=e5e90677325df3a7a721d1a2020891fa74f0dfcde7b5a94235b12b3480af9500&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a38ff15938fe4731e5fd89617afc33de&timestamp=1444044400" for 42.118.134.227 at 2015-10-05 18:26:42 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e5e90677325df3a7a721d1a2020891fa74f0dfcde7b5a94235b12b3480af9500", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a38ff15938fe4731e5fd89617afc33de", "timestamp"=>"1444044400"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (30.9ms)
Completed 200 OK in 94ms (Views: 90.2ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=ff89fbc98855ad21347b3f55e2fbba16d8a6fd7ac00e25e52325062729b56fb9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=85be65a64ccde8791d558e4b5779d9f5&timestamp=1444044423" for 42.118.134.227 at 2015-10-05 18:27:05 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"ff89fbc98855ad21347b3f55e2fbba16d8a6fd7ac00e25e52325062729b56fb9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"85be65a64ccde8791d558e4b5779d9f5", "timestamp"=>"1444044423"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (38.7ms)
Completed 200 OK in 92ms (Views: 89.1ms | ActiveRecord: 0.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:30:41 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"57aWbxMqO4xrqqZoSkZCgE2QvkzDkJOlc3BaK/Gxh+1Axyq0SNdBS7UW8unI8Jy581kgT0AU1Y/RHwzp1CLPBQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 293ms (Views: 47.1ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:32:43 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"h16izhjHbhUWMJyy4ozdL05XfFYE7fC1ZCYcH096teYgLx4VQzoU0siMyDNgOgMW8J7iVYdptp/GSUrdaun9Dg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.5ms)
Completed 200 OK in 86ms (Views: 49.6ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:32:49 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"qlIQN/XL6oB2rMUf83WCYV8RwzAXOBsT0J4SQ2CV2coNI6zsrjaQR6gQkZ5xw1xY4dhdM5S8XTly8USBRQaRIg==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.6ms)
Completed 200 OK in 51ms (Views: 43.5ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:34:57 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AtHNOXheGVklPsCgarVZjEA1AjOUIceqoppHvbD/7fOloHHiI6NjnvuClCHoA4e1/vycMBelgYAA9RF/lWylGw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.6ms)
Completed 200 OK in 226ms (Views: 173.9ms | ActiveRecord: 2.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:36:49 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"KwScH7UU6YCkF33K09hZ4/+OMlhVefi9Z/Un+x1OfRyMdSDE7umTR3qrKUtRbofaQUesW9b9vpfFmnE5ON019A==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (3.7ms)
Completed 200 OK in 75ms (Views: 38.0ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:37:44 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"eEe6RY8OLL7P3VdCyRg95ZEcpa9OpYOtBARgHPgXzkHfNgae1PNWeRFhA8NLruPcL9U7rM0hxYemazbe3YSGqQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.6ms)
Completed 200 OK in 81ms (Views: 47.1ms | ActiveRecord: 2.1ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:37:52 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"HxDt1nd6r9i407IdXx1C4amC8JEwePS6YFzuiRAcsvm4YVENLIfVH2Zv5pzdq5zYF0tukrP8spDCM7hLNY/6EQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.4ms)
Completed 200 OK in 63ms (Views: 56.2ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:38:00 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"EsEWcvbDD4k100Sw4jWz88ufmCoSGArhxHrjGjw3Q/u1sKqprT51TutvEDFgg23KdVYGKZGcTMtmFbXYGaQLEw==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 53ms (Views: 44.4ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:39:12 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"8eioXeTRlZSPRz+nnsdxeyEX0KWtWB36pEqUoOOwbxVWmRSGvyzvU1H7ayYcca9Cn95Opi7cW9AGJcJixiMn/Q==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"asdas", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.5ms)[0m  [1mrollback transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (26.9ms)
Completed 200 OK in 83ms (Views: 74.9ms | ActiveRecord: 1.2ms)


Started GET "/preferences?hmac=041d3a3aae6021e3a2fd6afa0c5215d79999677744282be38711aa68e5e3bf82&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=37b8ef8a8baf44b9d1bb1aa5824a72d3&timestamp=1444045187" for 42.118.134.227 at 2015-10-05 18:39:49 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"041d3a3aae6021e3a2fd6afa0c5215d79999677744282be38711aa68e5e3bf82", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"37b8ef8a8baf44b9d1bb1aa5824a72d3", "timestamp"=>"1444045187"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (31.6ms)
Completed 200 OK in 94ms (Views: 89.0ms | ActiveRecord: 0.8ms)


Started GET "/preferences?hmac=f7f304914ff4c352524dd91679cfaf586e610e050d5467164ba1083d5c0e1b18&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7dd74ca12cc82519a2cab6422a40e446&timestamp=1444045212" for 42.118.134.227 at 2015-10-05 18:40:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f7f304914ff4c352524dd91679cfaf586e610e050d5467164ba1083d5c0e1b18", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7dd74ca12cc82519a2cab6422a40e446", "timestamp"=>"1444045212"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (35.2ms)
Completed 200 OK in 89ms (Views: 85.3ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-05 18:40:41 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"rInwlPHhefRIo8lGyWVmQGF1TLcB103oRQnhg3QBkCEL+ExPqhwDM5YfncdL07h537zStIJTC8LnZrdBUZLYyQ==", "shop"=>{"id"=>"1", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_phonenumber"=>"", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT41db77993f0643febafb9d59351949ec", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
Completed 500 Internal Server Error in 2199ms (ActiveRecord: 2.2ms)

RestClient::BadRequest (400 Bad Request):
  app/services/kandy.rb:18:in `get_user_access_token'
  app/controllers/home_controller.rb:26:in `update_preferences'




Started GET "/preferences?hmac=40dc30829b59729724fd5181ad5d87e05e77c794f89c61fed6d0f95628ca1ee2&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ae3d794961c86a93351845d5f00bfc19&timestamp=1444045254" for 42.118.134.227 at 2015-10-05 18:40:55 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"40dc30829b59729724fd5181ad5d87e05e77c794f89c61fed6d0f95628ca1ee2", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ae3d794961c86a93351845d5f00bfc19", "timestamp"=>"1444045254"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (50.3ms)
Completed 200 OK in 120ms (Views: 113.6ms | ActiveRecord: 0.8ms)


Started GET "/?hmac=4dd0426431945eaa2f92076b99ad6be53c54458d918df1d597f6cd15c0477b29&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0ffe8b867771243b6ba91ac4439312f9&timestamp=1444045271" for 42.118.134.227 at 2015-10-05 18:41:12 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4dd0426431945eaa2f92076b99ad6be53c54458d918df1d597f6cd15c0477b29", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0ffe8b867771243b6ba91ac4439312f9", "timestamp"=>"1444045271"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (7.7ms)
Completed 200 OK in 1726ms (Views: 72.0ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=7aab5f0a760518dec4a6d9a8630f4400d6bf2d2d306628d466b072b05b32be2a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a3f6fd72df116303994da94d52b2e5fc&timestamp=1444045835" for 42.118.134.227 at 2015-10-05 18:50:37 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7aab5f0a760518dec4a6d9a8630f4400d6bf2d2d306628d466b072b05b32be2a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a3f6fd72df116303994da94d52b2e5fc", "timestamp"=>"1444045835"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (84.3ms)
Completed 200 OK in 2464ms (Views: 860.1ms | ActiveRecord: 2.8ms)


Started GET "/?hmac=ec9cc5653b7b4c7732914941848a6e273d2f6cb1d4608e109031e3e5285a629c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=9ea9549e9357de09f74a71527f7c214e&timestamp=1444045853" for 42.118.134.227 at 2015-10-05 18:50:54 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"ec9cc5653b7b4c7732914941848a6e273d2f6cb1d4608e109031e3e5285a629c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9ea9549e9357de09f74a71527f7c214e", "timestamp"=>"1444045853"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 1120ms (Views: 62.7ms | ActiveRecord: 1.1ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 19:11:37 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (1.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (60.5ms)
Completed 200 OK in 226ms (Views: 118.5ms | ActiveRecord: 3.6ms)


Started GET "/active?hmac=f6a6c967c27af468774ab630832ecfa6c62b5b4f9f2f1682c30ebfc1e11666cd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=022f19d497e798dc4bb2b4ff5f400b62&timestamp=1444047139" for 42.118.134.227 at 2015-10-05 19:12:20 +0700
Processing by HomeController#active as HTML
  Parameters: {"hmac"=>"f6a6c967c27af468774ab630832ecfa6c62b5b4f9f2f1682c30ebfc1e11666cd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"022f19d497e798dc4bb2b4ff5f400b62", "timestamp"=>"1444047139"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/active.haml within layouts/embedded_app (1.1ms)
Completed 200 OK in 68ms (Views: 65.6ms | ActiveRecord: 0.2ms)


Started GET "/active?hmac=dde93417b07ed25b3dca1736622dd011940f1bf29faef9d22c50d0b5cb36dd36&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b9b632d5f6ad0a4dc144e08a967a335c&timestamp=1444047253" for 42.118.134.227 at 2015-10-05 19:14:15 +0700
Processing by HomeController#active as HTML
  Parameters: {"hmac"=>"dde93417b07ed25b3dca1736622dd011940f1bf29faef9d22c50d0b5cb36dd36", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b9b632d5f6ad0a4dc144e08a967a335c", "timestamp"=>"1444047253"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/active.haml within layouts/embedded_app (1.5ms)
Completed 200 OK in 57ms (Views: 55.2ms | ActiveRecord: 0.2ms)


Started GET "/active?hmac=9f01cfeb7b3d5b4a8f8186ce22303d4b6d277699b57e1510dfbd6efe002e3bff&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=77a85ef6c5cb5accd50fc648df24c10a&timestamp=1444047384" for 42.118.134.227 at 2015-10-05 19:16:25 +0700
Processing by HomeController#active as HTML
  Parameters: {"hmac"=>"9f01cfeb7b3d5b4a8f8186ce22303d4b6d277699b57e1510dfbd6efe002e3bff", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"77a85ef6c5cb5accd50fc648df24c10a", "timestamp"=>"1444047384"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/active.haml within layouts/embedded_app (1.7ms)
Completed 200 OK in 60ms (Views: 58.1ms | ActiveRecord: 0.2ms)


Started GET "/active?hmac=93e000617a0ac668a19cb109adb9df3d42c43cf90fe2d73e69b7649230837572&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d3448fc5623e261604aa8aaee8afaa1f&timestamp=1444047400" for 42.118.134.227 at 2015-10-05 19:16:42 +0700
Processing by HomeController#active as HTML
  Parameters: {"hmac"=>"93e000617a0ac668a19cb109adb9df3d42c43cf90fe2d73e69b7649230837572", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d3448fc5623e261604aa8aaee8afaa1f", "timestamp"=>"1444047400"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/active.haml within layouts/embedded_app (2.6ms)
Completed 200 OK in 60ms (Views: 58.6ms | ActiveRecord: 0.2ms)


Started GET "/install?hmac=df0d62aa10e9f9d38ed48db3a2c418dfb690c3654a8629fa47b64d1e5d361ef0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=cc191d81f20bbc5d320c6f79e6fcd52b&timestamp=1444048023" for 42.118.134.227 at 2015-10-05 19:27:04 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"df0d62aa10e9f9d38ed48db3a2c418dfb690c3654a8629fa47b64d1e5d361ef0", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"cc191d81f20bbc5d320c6f79e6fcd52b", "timestamp"=>"1444048023"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Completed 500 Internal Server Error in 47ms (ActiveRecord: 0.9ms)

NameError (undefined local variable or method `root_path' for ShopifyIntegration:Class):
  app/services/shopify_integration.rb:3:in `setup_webhooks'
  app/controllers/home_controller.rb:7:in `install'




Started GET "/install?hmac=6c10f9ea7eb1e240f8004a7b334b42a7dbf6ff92be97cca764e3dc266ece614c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=5825e42b11d0f0d9b05bcf794bcf0968&timestamp=1444048194" for 42.118.134.227 at 2015-10-05 19:29:56 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"6c10f9ea7eb1e240f8004a7b334b42a7dbf6ff92be97cca764e3dc266ece614c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"5825e42b11d0f0d9b05bcf794bcf0968", "timestamp"=>"1444048194"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 500 Internal Server Error in 115ms (ActiveRecord: 1.6ms)

ActionView::MissingTemplate (Missing template home/install, application/install with {:locale=>[:en], :formats=>[:html], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:498:in `block (2 levels) in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:313:in `block (2 levels) in halting'
  shopify_app (6.0.6) lib/shopify_app/login_protection.rb:13:in `shopify_session'
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:312:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:497:in `block in around'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:25:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/install?hmac=fc41b8825739725103d4661ebc5b7e556792d4206f2a6985f7fd2f7b92325c3a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ae6790076b53ef5867ec22703d85537b&timestamp=1444048223" for 42.118.134.227 at 2015-10-05 19:30:25 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"fc41b8825739725103d4661ebc5b7e556792d4206f2a6985f7fd2f7b92325c3a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ae6790076b53ef5867ec22703d85537b", "timestamp"=>"1444048223"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 72ms (Views: 49.6ms | ActiveRecord: 1.4ms)


Started GET "/install?hmac=e306d0c83bab92aa9098e27e39ec8dc948ae45f4ac47d16a494dbf66b08a485b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=822126d70a39f1190b8fad3af6d3681d&timestamp=1444048312" for 42.118.134.227 at 2015-10-05 19:31:54 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"e306d0c83bab92aa9098e27e39ec8dc948ae45f4ac47d16a494dbf66b08a485b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"822126d70a39f1190b8fad3af6d3681d", "timestamp"=>"1444048312"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 23ms (Views: 0.7ms | ActiveRecord: 1.3ms)


Started GET "/install?hmac=af621cfb64369f544a095faff54a11ff5b96d385727e00590d774c5223c32e0b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a1958c47a4dc54916195a48facaad49d&timestamp=1444048328" for 42.118.134.227 at 2015-10-05 19:32:09 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"af621cfb64369f544a095faff54a11ff5b96d385727e00590d774c5223c32e0b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a1958c47a4dc54916195a48facaad49d", "timestamp"=>"1444048328"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 1.2ms | ActiveRecord: 1.1ms)


Started GET "/install?hmac=84d04a4a733f9f2c4662d3b3da5d24f612f93a264c23c6817e3620cf872e4915&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2cede5503003c63c8102a7d924638bda&timestamp=1444049309" for 42.118.134.227 at 2015-10-05 19:48:31 +0700
Processing by HomeController#install as HTML
  Parameters: {"hmac"=>"84d04a4a733f9f2c4662d3b3da5d24f612f93a264c23c6817e3620cf872e4915", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2cede5503003c63c8102a7d924638bda", "timestamp"=>"1444049309"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
Completed 200 OK in 19ms (ActiveRecord: 1.5ms)
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.5ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.8ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (1.1ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.4ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.4ms)[0m  [1mALTER TABLE "shops" ADD "kandy_token" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "sms_order_template" varchar
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150930140112"]]
  [1m[35m (12.2ms)[0m  commit transaction
Migrating to CreateTemplates (20151005045008)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 19:54:09 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.0ms)
Completed 200 OK in 28ms (Views: 27.6ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 19:54:10 +0700


Started GET "/auth/shopify/callback?code=4c8b0cc84b171ba22ef9fa0966baa4d2&hmac=6b4a8b58f51c2ba0d196e20df068b5dfcff9b93cd6eace699e076b97d9afbab6&shop=letranloc-2.myshopify.com&signature=bbbb16ed10bb770a418d5451ba506d44&state=565eacdac38092d61fbd631e03c1ce89081bd6ff3dcf6270&timestamp=1444049656" for 42.118.134.227 at 2015-10-05 19:54:16 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"4c8b0cc84b171ba22ef9fa0966baa4d2", "hmac"=>"6b4a8b58f51c2ba0d196e20df068b5dfcff9b93cd6eace699e076b97d9afbab6", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bbbb16ed10bb770a418d5451ba506d44", "state"=>"565eacdac38092d61fbd631e03c1ce89081bd6ff3dcf6270", "timestamp"=>"1444049656"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "c4da209270aeda309d4847f4c384db59"], ["created_at", "2015-10-05 12:54:18.152453"], ["updated_at", "2015-10-05 12:54:18.152453"]]
  [1m[36m (1.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602
Completed 302 Found in 131ms (ActiveRecord: 4.5ms)


Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 19:54:19 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (149.2ms)
Completed 200 OK in 998ms (Views: 992.0ms | ActiveRecord: 1.0ms)


Started GET "/preferences?hmac=47245566169e322de37790377c23723a2032c19b4809ffa25cdfe5849b8f9bd3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=37602b882746384eac6053c2b71e0472&timestamp=1444049661" for 42.118.134.227 at 2015-10-05 19:54:23 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"47245566169e322de37790377c23723a2032c19b4809ffa25cdfe5849b8f9bd3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"37602b882746384eac6053c2b71e0472", "timestamp"=>"1444049661"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 92ms (Views: 89.7ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=d6bba37691ba6ce188642709f13a5f60f363b769700d66e56bca69ee26afc149&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e1ee0aca2f3154c7f595d6092cb35335&timestamp=1444049723" for 42.118.134.227 at 2015-10-05 19:55:25 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"d6bba37691ba6ce188642709f13a5f60f363b769700d66e56bca69ee26afc149", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e1ee0aca2f3154c7f595d6092cb35335", "timestamp"=>"1444049723"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (8.6ms)
Completed 200 OK in 126ms (Views: 121.7ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=c1849148f9f74c0d83f3888c33ffbac40b8bc1525b20b8ac36e4aea572739c7f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=17163a9e63abdc23087e1abda1283a95&timestamp=1444049761" for 42.118.134.227 at 2015-10-05 19:56:03 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c1849148f9f74c0d83f3888c33ffbac40b8bc1525b20b8ac36e4aea572739c7f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"17163a9e63abdc23087e1abda1283a95", "timestamp"=>"1444049761"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (20.7ms)
Completed 200 OK in 165ms (Views: 124.2ms | ActiveRecord: 2.5ms)


Started GET "/preferences?hmac=4847716861748749541e5ff6e2f6aa341ce99490b6a183c87fdae834fa0f561d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ef2fb7e1254c9211f6fd982b02c40a18&timestamp=1444049953" for 42.118.134.227 at 2015-10-05 19:59:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4847716861748749541e5ff6e2f6aa341ce99490b6a183c87fdae834fa0f561d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ef2fb7e1254c9211f6fd982b02c40a18", "timestamp"=>"1444049953"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (4.5ms)
Completed 200 OK in 52ms (Views: 49.8ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=6bfe0ee34980844473c52bbd4f4449bdc695dc093781594e5dc71554c1c4b1cb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=102e54266331427095dce7dc842bf6ab&timestamp=1444050098" for 42.118.134.227 at 2015-10-05 20:01:40 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"6bfe0ee34980844473c52bbd4f4449bdc695dc093781594e5dc71554c1c4b1cb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"102e54266331427095dce7dc842bf6ab", "timestamp"=>"1444050098"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (12.0ms)
Completed 200 OK in 100ms (Views: 78.3ms | ActiveRecord: 1.9ms)


Started GET "/preferences?hmac=c19a26c453b1b1e9a01349af3ebf08d9a29c738bbd4ba2352cc0811a7e62f078&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ecceb07369d26560e784aeeba2a962a5&timestamp=1444050211" for 42.118.134.227 at 2015-10-05 20:03:33 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"c19a26c453b1b1e9a01349af3ebf08d9a29c738bbd4ba2352cc0811a7e62f078", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ecceb07369d26560e784aeeba2a962a5", "timestamp"=>"1444050211"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (12.5ms)
Completed 200 OK in 88ms (Views: 60.0ms | ActiveRecord: 6.2ms)


Started GET "/preferences?hmac=032723a737f44dcdfa9fdf2662d9a38e0aa0ee498b87e19516fc81ac5e8dccdb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6fa5816e500c3a908f2de62d2a28d2ff&timestamp=1444050228" for 42.118.134.227 at 2015-10-05 20:03:51 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"032723a737f44dcdfa9fdf2662d9a38e0aa0ee498b87e19516fc81ac5e8dccdb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6fa5816e500c3a908f2de62d2a28d2ff", "timestamp"=>"1444050228"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (9.1ms)
Completed 200 OK in 76ms (Views: 58.5ms | ActiveRecord: 1.7ms)


Started GET "/preferences?hmac=4498baae489237b9a3c4d21bc1d969ed4f9b149b7871966878b892e559447f4a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c46f42385c9893616f248a8e04cd57a9&timestamp=1444050258" for 42.118.134.227 at 2015-10-05 20:04:19 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4498baae489237b9a3c4d21bc1d969ed4f9b149b7871966878b892e559447f4a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c46f42385c9893616f248a8e04cd57a9", "timestamp"=>"1444050258"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (9.3ms)
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
Redirected to 
Completed 500 Internal Server Error in 81ms (Views: 59.3ms | ActiveRecord: 2.2ms)

AbstractController::DoubleRenderError (Render and/or redirect were called multiple times in this action. Please note that you may only call render OR redirect, and at most once per action. Also note that neither redirect nor render terminate execution of the action, so if you want to exit an action after redirecting, you need to do something like "redirect_to(...) and return".):
  app/controllers/home_controller.rb:63:in `shopify_session'




Started GET "/preferences?hmac=7461df49603b8af27e5dc25fe674e9088c8fc412e896b76cea0693936887806c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=db8576741a7d3a2fa84a745b527cf839&timestamp=1444050325" for 42.118.134.227 at 2015-10-05 20:05:26 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"7461df49603b8af27e5dc25fe674e9088c8fc412e896b76cea0693936887806c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"db8576741a7d3a2fa84a745b527cf839", "timestamp"=>"1444050325"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 2.0ms)


Started GET "/install" for 42.118.134.227 at 2015-10-05 20:05:27 +0700
Processing by HomeController#install as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["shop_id", 1], ["created_at", "2015-10-05 13:05:27.598929"], ["updated_at", "2015-10-05 13:05:27.598929"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 2032ms (ActiveRecord: 3.5ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:05:30 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (9.3ms)
Completed 200 OK in 73ms (Views: 70.5ms | ActiveRecord: 0.4ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 20:05:37 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (5.9ms)
Completed 200 OK in 50ms (Views: 46.6ms | ActiveRecord: 0.4ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:05:48 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 47ms (Views: 44.1ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=e6c820ab77edbda8937078cd5189c8b70d138c05051fdb0d479d2bcaa8aebd10&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=722923f63c6c0bcff3afe4b00b63a407&timestamp=1444050362" for 42.118.134.227 at 2015-10-05 20:06:04 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e6c820ab77edbda8937078cd5189c8b70d138c05051fdb0d479d2bcaa8aebd10", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"722923f63c6c0bcff3afe4b00b63a407", "timestamp"=>"1444050362"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1471ms (Views: 43.8ms | ActiveRecord: 2.1ms)


Started GET "/?hmac=63812c21df1c019d7f4025dd2715573e5b94cf4882a006e6ccb6b572639bc6f5&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3a5ccb4aaead9e0113e52fd189b087c0&timestamp=1444050512" for 42.118.134.227 at 2015-10-05 20:08:34 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"63812c21df1c019d7f4025dd2715573e5b94cf4882a006e6ccb6b572639bc6f5", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3a5ccb4aaead9e0113e52fd189b087c0", "timestamp"=>"1444050512"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 3458ms (Views: 41.7ms | ActiveRecord: 1.8ms)


Started GET "/?hmac=a1ee7e065324ec32a554931fc5f0d8cb29053e13b160dbedce4991d0903ea129&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6b1193c40ee3b709c767f8165e204fe3&timestamp=1444050537" for 42.118.134.227 at 2015-10-05 20:08:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"a1ee7e065324ec32a554931fc5f0d8cb29053e13b160dbedce4991d0903ea129", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6b1193c40ee3b709c767f8165e204fe3", "timestamp"=>"1444050537"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.4ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 4190ms (Views: 55.5ms | ActiveRecord: 2.5ms)


Started GET "/?hmac=b096bd393401a730c14b2a78bf287a769cd6b4af7c8ee4397ee7853ab585c9d8&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0d5e8239b2920d81fb8465b921753059&timestamp=1444050578" for 42.118.134.227 at 2015-10-05 20:09:40 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"b096bd393401a730c14b2a78bf287a769cd6b4af7c8ee4397ee7853ab585c9d8", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0d5e8239b2920d81fb8465b921753059", "timestamp"=>"1444050578"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.6ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1927ms (Views: 58.5ms | ActiveRecord: 2.9ms)
  [1m[36m (3.0ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.9ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.5ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36m (0.8ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.5ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_token" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "sms_order_template" varchar
  [1m[36mSQL (0.3ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150930140112"]]
  [1m[35m (2.0ms)[0m  commit transaction
Migrating to CreateTemplates (20151005045008)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.1ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:12:53 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.5ms)
Completed 200 OK in 8ms (Views: 7.7ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:12:53 +0700


Started GET "/auth/shopify/callback?code=90945fabbaac315a39150ea4c66ea2cb&hmac=028c664b750ea56d6e1af2d7b6bfb72378f12f94e4fb1937138edfec92d9991d&shop=letranloc-2.myshopify.com&signature=19e5baef15bf2abed9aa47b3794159c1&state=1eae86b24418f73f1206e03b98dd6bb32e4f036d0b56ad2d&timestamp=1444050793" for 42.118.134.227 at 2015-10-05 20:13:13 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"90945fabbaac315a39150ea4c66ea2cb", "hmac"=>"028c664b750ea56d6e1af2d7b6bfb72378f12f94e4fb1937138edfec92d9991d", "shop"=>"letranloc-2.myshopify.com", "signature"=>"19e5baef15bf2abed9aa47b3794159c1", "state"=>"1eae86b24418f73f1206e03b98dd6bb32e4f036d0b56ad2d", "timestamp"=>"1444050793"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "32e3d565a53750c98dfa0d0494f455c6"], ["created_at", "2015-10-05 13:13:15.208754"], ["updated_at", "2015-10-05 13:13:15.208754"]]
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602
Completed 302 Found in 80ms (ActiveRecord: 7.0ms)


Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 20:13:15 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 23ms (ActiveRecord: 0.9ms)


Started GET "/install" for 42.118.134.227 at 2015-10-05 20:13:16 +0700
Processing by HomeController#install as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 13:13:16.158807"], ["updated_at", "2015-10-05 13:13:16.158807"]]
  [1m[35m (1.3ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 9582ms (ActiveRecord: 3.0ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:13:26 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (67.8ms)
Completed 200 OK in 1915ms (Views: 526.7ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=e546baf22aba0d0586facbd9d3f1e86a676049da1a5ad370bcc00b654a6715db&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e4e704e5f4be3c2dc12f659b4a1add69&timestamp=1444050808" for 42.118.134.227 at 2015-10-05 20:13:34 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e546baf22aba0d0586facbd9d3f1e86a676049da1a5ad370bcc00b654a6715db", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e4e704e5f4be3c2dc12f659b4a1add69", "timestamp"=>"1444050808"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1409ms (Views: 53.5ms | ActiveRecord: 0.6ms)


Started GET "/?hmac=21e4cfc33fda20699aa5b7156f658b7bbff33aed4156af77e38e6d923c0fb58a&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=db4c9ac63668f63d3bf9edff5691560b&timestamp=1444050873" for 42.118.134.227 at 2015-10-05 20:14:35 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"21e4cfc33fda20699aa5b7156f658b7bbff33aed4156af77e38e6d923c0fb58a", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"db4c9ac63668f63d3bf9edff5691560b", "timestamp"=>"1444050873"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.9ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 13604ms (Views: 58.4ms | ActiveRecord: 3.7ms)


Started GET "/?hmac=d539e793a32c737513467873e2d8e6a5ce1ce1b064ab46d2f42967ef57b9b606&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=68b658419672e1cc9e362e75e2a73b2d&timestamp=1444050919" for 42.118.134.227 at 2015-10-05 20:15:20 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"d539e793a32c737513467873e2d8e6a5ce1ce1b064ab46d2f42967ef57b9b606", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"68b658419672e1cc9e362e75e2a73b2d", "timestamp"=>"1444050919"}
  [1m[36mShop Load (0.5ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 12437ms (Views: 51.2ms | ActiveRecord: 2.8ms)


Started GET "/?hmac=877d98c1992fc25047e9f1272ec90c85d577129b31ef154c7a9a68ac9fa5eb65&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=47e0e0b7b571599c5dab34dd6fb914f4&timestamp=1444051231" for 42.118.134.227 at 2015-10-05 20:20:33 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"877d98c1992fc25047e9f1272ec90c85d577129b31ef154c7a9a68ac9fa5eb65", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"47e0e0b7b571599c5dab34dd6fb914f4", "timestamp"=>"1444051231"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.4ms)
Completed 200 OK in 11758ms (Views: 47.6ms | ActiveRecord: 2.7ms)


Started POST "/app/uninstalled" for 23.227.37.122 at 2015-10-05 20:22:11 +0700
Processing by HomeController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "home"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)
  [1m[36m (1.4ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (0.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.5ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.5ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.9ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phonenumber" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_token" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "sms_order_template" varchar
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150930140112"]]
  [1m[35m (1.1ms)[0m  commit transaction
Migrating to CreateTemplates (20151005045008)
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.6ms)[0m  CREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.3ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.1ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.3ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:33:36 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (2.0ms)
Completed 200 OK in 29ms (Views: 28.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:33:37 +0700


Started GET "/auth/shopify/callback?code=aaf920eddff9b443aa16e0ba10602ad6&hmac=0b91434e194e3fc4f64aa2435f82561ea61df3be5a091c1a33630b1003e9d862&shop=letranloc-2.myshopify.com&signature=46f692e207d3cfb829111a6692694a7b&state=1e9303e023fba0ac49658e9a96cf9d257d76e4a98a3b43ce&timestamp=1444052022" for 42.118.134.227 at 2015-10-05 20:33:42 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"aaf920eddff9b443aa16e0ba10602ad6", "hmac"=>"0b91434e194e3fc4f64aa2435f82561ea61df3be5a091c1a33630b1003e9d862", "shop"=>"letranloc-2.myshopify.com", "signature"=>"46f692e207d3cfb829111a6692694a7b", "state"=>"1e9303e023fba0ac49658e9a96cf9d257d76e4a98a3b43ce", "timestamp"=>"1444052022"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.6ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "2449190144cc10e9c66d3f052e1f5c6a"], ["created_at", "2015-10-05 13:33:44.766881"], ["updated_at", "2015-10-05 13:33:44.766881"]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602
Completed 302 Found in 155ms (ActiveRecord: 4.7ms)


Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 20:33:45 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[35mShop Load (0.6ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 39ms (ActiveRecord: 1.2ms)


Started GET "/install" for 42.118.134.227 at 2015-10-05 20:33:45 +0700
Processing by HomeController#install as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 1], ["created_at", "2015-10-05 13:33:45.735369"], ["updated_at", "2015-10-05 13:33:45.735369"]]
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 1) LIMIT 1
  [1m[36m (0.2ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 15771ms (ActiveRecord: 4.1ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:34:02 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (78.7ms)
Completed 200 OK in 2278ms (Views: 865.6ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=c62deed3ddd4647a8bdb89949faa5864347a0f3a8ca9ab2eee397d23fa2d9e18&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ff958f3b74e6ad49a1322d87a2392b81&timestamp=1444052046" for 42.118.134.227 at 2015-10-05 20:34:07 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"c62deed3ddd4647a8bdb89949faa5864347a0f3a8ca9ab2eee397d23fa2d9e18", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ff958f3b74e6ad49a1322d87a2392b81", "timestamp"=>"1444052046"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1451ms (Views: 52.5ms | ActiveRecord: 0.7ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 20:37:59 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mCACHE (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (78.9ms)
Completed 200 OK in 169ms (Views: 164.2ms | ActiveRecord: 0.7ms)


Started POST "/app/uninstalled" for 23.227.37.123 at 2015-10-05 20:39:42 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "shops" WHERE "shops"."id" = ?[0m  [["id", 1]]
  [1m[35m (2.9ms)[0m  commit transaction
Completed 500 Internal Server Error in 147ms (ActiveRecord: 3.6ms)

ActionView::MissingTemplate (Missing template shopify/uninstalled, webhooks/uninstalled, application/uninstalled with {:locale=>[:en], :formats=>[:html, :text, :js, :css, :ics, :csv, :vcf, :png, :jpeg, :gif, :bmp, :tiff, :mpeg, :xml, :rss, :atom, :yaml, :multipart_form, :url_encoded_form, :json, :pdf, :zip], :variants=>[], :handlers=>[:erb, :builder, :raw, :ruby, :coffee, :haml]}. Searched in:
  * "/Users/letranloc/Documents/Shopify/kandy-shopify/app/views"
  * "/Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/gems/2.2.0/gems/shopify_app-6.0.6/app/views"
):
  actionview (4.2.2) lib/action_view/path_set.rb:46:in `find'
  actionview (4.2.2) lib/action_view/lookup_context.rb:121:in `find'
  actionview (4.2.2) lib/action_view/renderer/abstract_renderer.rb:18:in `find_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:40:in `determine_template'
  actionview (4.2.2) lib/action_view/renderer/template_renderer.rb:8:in `render'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:42:in `render_template'
  actionview (4.2.2) lib/action_view/renderer/renderer.rb:23:in `render'
  actionview (4.2.2) lib/action_view/rendering.rb:100:in `_render_template'
  actionpack (4.2.2) lib/action_controller/metal/streaming.rb:217:in `_render_template'
  actionview (4.2.2) lib/action_view/rendering.rb:83:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:32:in `render_to_body'
  actionpack (4.2.2) lib/action_controller/metal/renderers.rb:37:in `render_to_body'
  actionpack (4.2.2) lib/abstract_controller/rendering.rb:25:in `render'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:16:in `render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block (2 levels) in render'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `block in ms'
  /Users/letranloc/.rbenv/versions/2.2.2/lib/ruby/2.2.0/benchmark.rb:303:in `realtime'
  activesupport (4.2.2) lib/active_support/core_ext/benchmark.rb:12:in `ms'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:44:in `block in render'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:87:in `cleanup_view_runtime'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:25:in `cleanup_view_runtime'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:43:in `render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:10:in `default_render'
  actionpack (4.2.2) lib/action_controller/metal/implicit_render.rb:5:in `send_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:198:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rendering.rb:10:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:20:in `block in process_action'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:117:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:555:in `block (2 levels) in compile'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:505:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/app/uninstalled" for 23.227.37.122 at 2015-10-05 20:39:43 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `destroy!' for nil:NilClass):
  app/controllers/shopify_controller.rb:4:in `uninstalled'




Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:40:18 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:40:19 +0700


Started GET "/auth/shopify/callback?code=579f0139dfcea8b3c82be45a8af943e8&hmac=6e4c607e39a3b1f391b9c82f79be101582740ca388258b3d044c0408c40a3e8f&shop=letranloc-2.myshopify.com&signature=9e8794036ab5f2a3dcc576e4c0329755&state=be8d2fb7d912946043322da23c17eedb35ebbe6a01a97052&timestamp=1444052424" for 42.118.134.227 at 2015-10-05 20:40:25 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"579f0139dfcea8b3c82be45a8af943e8", "hmac"=>"6e4c607e39a3b1f391b9c82f79be101582740ca388258b3d044c0408c40a3e8f", "shop"=>"letranloc-2.myshopify.com", "signature"=>"9e8794036ab5f2a3dcc576e4c0329755", "state"=>"be8d2fb7d912946043322da23c17eedb35ebbe6a01a97052", "timestamp"=>"1444052424"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "ccd4f6270a51e35c63c44647d3345937"], ["created_at", "2015-10-05 13:40:27.053189"], ["updated_at", "2015-10-05 13:40:27.053189"]]
  [1m[35m (1.2ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602
Completed 302 Found in 40ms (ActiveRecord: 2.9ms)


Started GET "/preferences?hmac=4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=847dfc352533ca3883404480a3a792c0&timestamp=1444037602" for 42.118.134.227 at 2015-10-05 20:40:27 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"4fd8b4d38f5e4c5b1c72b797ae782296cd7e01012faea9707f71cdd3db4684e4", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"847dfc352533ca3883404480a3a792c0", "timestamp"=>"1444037602"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 2]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 24ms (ActiveRecord: 0.9ms)


Started GET "/install" for 42.118.134.227 at 2015-10-05 20:40:28 +0700
Processing by HomeController#install as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 2]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["shop_id", 2], ["created_at", "2015-10-05 13:40:28.104473"], ["updated_at", "2015-10-05 13:40:28.104473"]]
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 2) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 10727ms (ActiveRecord: 4.1ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:40:39 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 2584ms (Views: 138.5ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=b2cb476793a17dd72bfa32dd01530f3d40a5421c173f62c68c0e146e5e24e4b3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7a61eed15bcf5b0800c4eda44dcd455e&timestamp=1444052442" for 42.118.134.227 at 2015-10-05 20:40:44 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"b2cb476793a17dd72bfa32dd01530f3d40a5421c173f62c68c0e146e5e24e4b3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7a61eed15bcf5b0800c4eda44dcd455e", "timestamp"=>"1444052442"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1489ms (Views: 48.7ms | ActiveRecord: 0.4ms)


Started POST "/app/uninstalled" for 23.227.37.115 at 2015-10-05 20:40:46 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mDELETE FROM "shops" WHERE "shops"."id" = ?[0m  [["id", 2]]
  [1m[35m (2.2ms)[0m  commit transaction
Completed 200 OK in 5ms (ActiveRecord: 2.9ms)


Started GET "/?hmac=1045ea98c48b1f4d528e8ff5a2a389aef1692d313bf502698b20934cfa41d731&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=85a5ce3b78ce4839076c31fc8f7753e0&timestamp=1444052480" for 42.118.134.227 at 2015-10-05 20:41:21 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"1045ea98c48b1f4d528e8ff5a2a389aef1692d313bf502698b20934cfa41d731", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"85a5ce3b78ce4839076c31fc8f7753e0", "timestamp"=>"1444052480"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:41:22 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-05 20:41:23 +0700


Started GET "/auth/shopify/callback?code=e1656ba69e72b349190d58b84e84f843&hmac=473935c23f79eff9621addec5c17319cf9ec5ecf8f20af5e8ea1cb10a76a712d&shop=letranloc-2.myshopify.com&signature=0d09f7cc2b018102ce2d349dc38fe8ae&state=3bc10eb855d2131e959c6369762c2055e29e09cafb09b85b&timestamp=1444052483" for 42.118.134.227 at 2015-10-05 20:41:24 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"e1656ba69e72b349190d58b84e84f843", "hmac"=>"473935c23f79eff9621addec5c17319cf9ec5ecf8f20af5e8ea1cb10a76a712d", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0d09f7cc2b018102ce2d349dc38fe8ae", "state"=>"3bc10eb855d2131e959c6369762c2055e29e09cafb09b85b", "timestamp"=>"1444052483"}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "ccd4f6270a51e35c63c44647d3345937"], ["created_at", "2015-10-05 13:41:25.539615"], ["updated_at", "2015-10-05 13:41:25.539615"]]
  [1m[35m (1.7ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=1045ea98c48b1f4d528e8ff5a2a389aef1692d313bf502698b20934cfa41d731&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=85a5ce3b78ce4839076c31fc8f7753e0&timestamp=1444052480
Completed 302 Found in 8ms (ActiveRecord: 2.6ms)


Started GET "/?hmac=1045ea98c48b1f4d528e8ff5a2a389aef1692d313bf502698b20934cfa41d731&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=85a5ce3b78ce4839076c31fc8f7753e0&timestamp=1444052480" for 42.118.134.227 at 2015-10-05 20:41:26 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"1045ea98c48b1f4d528e8ff5a2a389aef1692d313bf502698b20934cfa41d731", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"85a5ce3b78ce4839076c31fc8f7753e0", "timestamp"=>"1444052480"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 4ms (ActiveRecord: 0.4ms)


Started GET "/install" for 42.118.134.227 at 2015-10-05 20:41:26 +0700
Processing by HomeController#install as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["shop_id", 3], ["created_at", "2015-10-05 13:41:26.508643"], ["updated_at", "2015-10-05 13:41:26.508643"]]
  [1m[36m (2.0ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 18368ms (ActiveRecord: 3.3ms)


Started GET "/" for 42.118.134.227 at 2015-10-05 20:41:45 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.3ms)
Completed 200 OK in 2319ms (Views: 177.9ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=8ba3711b1c27e016ac6b64d5a3ffc92318188794c8572bce798cb165f48dcb82&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4ab76336000aaf615562a32fac583c28&timestamp=1444052509" for 42.118.134.227 at 2015-10-05 20:41:50 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"8ba3711b1c27e016ac6b64d5a3ffc92318188794c8572bce798cb165f48dcb82", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4ab76336000aaf615562a32fac583c28", "timestamp"=>"1444052509"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1438ms (Views: 41.8ms | ActiveRecord: 0.5ms)


Started GET "/?hmac=ffd730ea0f14221dc215fde49f17fe77de49bf3c77e411219ca8da11dbe81d6e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c3f76776ddb2321c3a6ad1525cf9243d&timestamp=1444052519" for 42.118.134.227 at 2015-10-05 20:42:01 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"ffd730ea0f14221dc215fde49f17fe77de49bf3c77e411219ca8da11dbe81d6e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c3f76776ddb2321c3a6ad1525cf9243d", "timestamp"=>"1444052519"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 1539ms (Views: 82.1ms | ActiveRecord: 0.5ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-05 20:42:43 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (8.4ms)
Completed 200 OK in 73ms (Views: 69.5ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4997032a35e5fd108fb52bf7aa13525f&timestamp=1444098158" for 42.118.134.227 at 2015-10-06 09:22:40 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4997032a35e5fd108fb52bf7aa13525f", "timestamp"=>"1444098158"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 41ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 09:22:41 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.9ms)
Completed 200 OK in 37ms (Views: 35.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 09:22:42 +0700


Started GET "/auth/shopify/callback?code=dcb577e3d71f4b4b7d5d32bf31a619e5&hmac=42c08e1d8fc16f12f0455216aa7e46bd8344038c322cf820bf36fbbeb7ee5f82&shop=letranloc-2.myshopify.com&signature=a9bc082457baf59289ae415d32f890b9&state=d5638e19ec009e12f96937e3fccd4ef663dbc31df965e974&timestamp=1444098163" for 42.118.134.227 at 2015-10-06 09:22:43 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"dcb577e3d71f4b4b7d5d32bf31a619e5", "hmac"=>"42c08e1d8fc16f12f0455216aa7e46bd8344038c322cf820bf36fbbeb7ee5f82", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a9bc082457baf59289ae415d32f890b9", "state"=>"d5638e19ec009e12f96937e3fccd4ef663dbc31df965e974", "timestamp"=>"1444098163"}
  [1m[36mShop Load (4.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4997032a35e5fd108fb52bf7aa13525f&timestamp=1444098158
Completed 302 Found in 161ms (ActiveRecord: 7.3ms)


Started GET "/?hmac=cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4997032a35e5fd108fb52bf7aa13525f&timestamp=1444098158" for 42.118.134.227 at 2015-10-06 09:22:45 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4997032a35e5fd108fb52bf7aa13525f", "timestamp"=>"1444098158"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (87.1ms)
Completed 200 OK in 2081ms (Views: 963.1ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=58f5f60de2cbdc38427041387405bd99775864e44716734a6c29fbe36b38df5e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=6f638c79b5b656d5f236951300edaf7d&timestamp=1444098168" for 42.118.134.227 at 2015-10-06 09:22:50 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"58f5f60de2cbdc38427041387405bd99775864e44716734a6c29fbe36b38df5e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"6f638c79b5b656d5f236951300edaf7d", "timestamp"=>"1444098168"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 1092ms (Views: 57.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=a96c8e301309491e5bbc1fc6d6eba0ae9689b7e6bca67bcada17b3d3f36f3cf9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3f564f902de4846f8ab5afedf0c02f5b&timestamp=1444098246" for 42.118.134.227 at 2015-10-06 09:24:08 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"a96c8e301309491e5bbc1fc6d6eba0ae9689b7e6bca67bcada17b3d3f36f3cf9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3f564f902de4846f8ab5afedf0c02f5b", "timestamp"=>"1444098246"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 150ms (Views: 109.4ms | ActiveRecord: 1.5ms)


Started GET "/?hmac=7707f2ddc656ae778f9c917c3be23c53d694fa03aeb3885641a3fcd635d8e86f&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=3c1d99a8373a673047ccf28c85c31303&timestamp=1444098313" for 42.118.134.227 at 2015-10-06 09:25:15 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"7707f2ddc656ae778f9c917c3be23c53d694fa03aeb3885641a3fcd635d8e86f", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3c1d99a8373a673047ccf28c85c31303", "timestamp"=>"1444098313"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 90ms (Views: 82.0ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 09:26:27 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (13.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (116.4ms)
Completed 200 OK in 180ms (Views: 162.8ms | ActiveRecord: 14.1ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 09:26:37 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 48ms (Views: 43.4ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 09:30:11 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (15.7ms)
Completed 200 OK in 75ms (Views: 58.6ms | ActiveRecord: 1.8ms)


Started GET "/?hmac=55b387b65b8e8d4131adc8da0b5f26827866a16372d75a04bc398c780dd3409d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=74e439bf7f72d9c21debd3ab723f2e23&timestamp=1444098619" for 42.118.134.227 at 2015-10-06 09:30:20 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"55b387b65b8e8d4131adc8da0b5f26827866a16372d75a04bc398c780dd3409d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"74e439bf7f72d9c21debd3ab723f2e23", "timestamp"=>"1444098619"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 67ms (Views: 65.6ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 09:30:39 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (5.5ms)
Completed 200 OK in 46ms (Views: 43.6ms | ActiveRecord: 0.4ms)


Started GET "/preferences?hmac=bf8fe61ff96f12899f5098592b698ad447d070c7561bf85427a919cc26a92c32&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=39b45a603ec7aa60754e2ed70160c420&timestamp=1444098676" for 42.118.134.227 at 2015-10-06 09:31:18 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"bf8fe61ff96f12899f5098592b698ad447d070c7561bf85427a919cc26a92c32", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"39b45a603ec7aa60754e2ed70160c420", "timestamp"=>"1444098676"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (22.3ms)
Completed 200 OK in 82ms (Views: 79.4ms | ActiveRecord: 0.4ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 09:31:56 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"iVEpaqUTXBMFvjPVGbQijRXisGZgBFJNto15iovDauPRu2fs0L0VG0Os98LghqoGOqAi+pUORg9SvAzfYlFyYA==", "shop"=>{"id"=>"3", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"", "kandy_phonenumber"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
Unpermitted parameter: kandy_token
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  UPDATE "shops" SET "kandy_api_key" = ?, "kandy_api_secret" = ?, "kandy_phonenumber" = ?, "kandy_username" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_api_key", "DAK81e603cf961e4c0295aa8e665828913d"], ["kandy_api_secret", "DAS89933b8fc32949dc84eeebfabadfddee"], ["kandy_phonenumber", "+841234905207"], ["kandy_username", "user2"], ["updated_at", "2015-10-06 02:31:56.860014"], ["id", 3]]
  [1m[36mSQL (0.2ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "order_update" = ?, "order_payment" = ?, "customer_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", ""], ["order_update", ""], ["order_payment", ""], ["customer_creation", ""], ["updated_at", "2015-10-06 02:31:56.862928"], ["id", 3]]
  [1m[35m (2.0ms)[0m  commit transaction
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.4ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mUPDATE "shops" SET "kandy_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["kandy_token", "UAT864374c5d19f47268862b57e5cc6e98c"], ["updated_at", "2015-10-06 02:31:58.955847"], ["id", 3]]
  [1m[35m (3.2ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.9ms)
Completed 200 OK in 2154ms (Views: 42.9ms | ActiveRecord: 7.7ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 09:40:09 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T22:40:09-04:00", "updated_at"=>"2015-10-05T22:40:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T22:40:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T22:40:09-04:00", "updated_at"=>"2015-10-05T22:40:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T22:40:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 40ms (ActiveRecord: 0.0ms)


Started GET "/preferences?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 09:43:09 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (34.2ms)
Completed 200 OK in 123ms (Views: 107.0ms | ActiveRecord: 2.0ms)


Started GET "/preferences?hmac=9c04f4b63091d14892d7d3d1c52df5b734953ea76539488bdd644d2fa8efbdfe&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=abb094329af60aa8e216140063f4df46&timestamp=1444099390" for 42.118.134.227 at 2015-10-06 09:43:11 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"9c04f4b63091d14892d7d3d1c52df5b734953ea76539488bdd644d2fa8efbdfe", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"abb094329af60aa8e216140063f4df46", "timestamp"=>"1444099390"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (12.6ms)
Completed 200 OK in 87ms (Views: 83.5ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=0e36cb236711dcbc9974d43d4de0a92543a9e6a396bafb50b9769aedb3b6ea48&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ca12304afe5d9c65477f302f5c2ad57c&timestamp=1444099408" for 42.118.134.227 at 2015-10-06 09:43:30 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"0e36cb236711dcbc9974d43d4de0a92543a9e6a396bafb50b9769aedb3b6ea48", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ca12304afe5d9c65477f302f5c2ad57c", "timestamp"=>"1444099408"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (29.6ms)
Completed 200 OK in 109ms (Views: 105.0ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=24a6b02ea9578ba0cc531d99c9e36bd547373befe662349399c58b635adf526b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=eb2557662933023ca00302504f8fd887&timestamp=1444099570" for 42.118.134.227 at 2015-10-06 09:46:11 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"24a6b02ea9578ba0cc531d99c9e36bd547373befe662349399c58b635adf526b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"eb2557662933023ca00302504f8fd887", "timestamp"=>"1444099570"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (30.0ms)
Completed 200 OK in 115ms (Views: 111.7ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=868f9738f317345f12d497bacb1c8293f0c836d005f0b87155a68cd541979ad3&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d04199578a827ccecdf26f307bab8d4b&timestamp=1444099770" for 42.118.134.227 at 2015-10-06 09:49:32 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"868f9738f317345f12d497bacb1c8293f0c836d005f0b87155a68cd541979ad3", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d04199578a827ccecdf26f307bab8d4b", "timestamp"=>"1444099770"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (31.2ms)
Completed 200 OK in 96ms (Views: 91.4ms | ActiveRecord: 0.6ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 09:51:58 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"o2h5UcQS5wFGE6mCU+OPioAqKVUBxYeqxVHUxDiBwGv7gjfXsbyuCQABbZWq0QcBr2i7yfTPk+ghYKGR0RPY6A==", "shop"=>{"id"=>"3", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT864374c5d19f47268862b57e5cc6e98c", "kandy_phonenumber"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hi %{firstname} %{lastname}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", "Hi %{firstname} %{lastname}"], ["updated_at", "2015-10-06 02:51:58.289095"], ["id", 3]]
  [1m[35m (2.5ms)[0m  commit transaction
Completed 500 Internal Server Error in 1008ms (ActiveRecord: 3.5ms)

RestClient::BadRequest (400 Bad Request):
  app/services/kandy.rb:18:in `get_user_access_token'
  app/controllers/home_controller.rb:18:in `update_preferences'




Started GET "/preferences?hmac=5bac0891bddd91f1dd6d9d46a6c5f64fdcc062840fa598f5412034ef689d9cfb&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4c87bdf56f9494e76001fcaa2c1eb9d0&timestamp=1444100131" for 42.118.134.227 at 2015-10-06 09:55:32 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"5bac0891bddd91f1dd6d9d46a6c5f64fdcc062840fa598f5412034ef689d9cfb", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4c87bdf56f9494e76001fcaa2c1eb9d0", "timestamp"=>"1444100131"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  Rendered home/preferences.haml within layouts/embedded_app (9.5ms)
Completed 200 OK in 87ms (Views: 83.6ms | ActiveRecord: 0.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 09:56:44 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"AYqE3bOpLQbQVV+LCnJiuohyCMxi7uFQIPXA7fqiSrtZYMpbxgdkDpZHm5zzQOoxpzCaUJfk9RLExLW4EzBSOA==", "shop"=>{"id"=>"3", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UAT864374c5d19f47268862b57e5cc6e98c", "kandy_phonenumber"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hi %{firstname} %{lastname}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (7.4ms)
Completed 200 OK in 97ms (Views: 55.7ms | ActiveRecord: 2.2ms)


Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 10:03:23 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T23:03:23-04:00", "updated_at"=>"2015-10-05T23:03:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T23:03:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T23:03:23-04:00", "updated_at"=>"2015-10-05T23:03:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T23:03:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 19ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 10:25:41 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T23:25:41-04:00", "updated_at"=>"2015-10-05T23:25:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T23:25:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-05T23:25:41-04:00", "updated_at"=>"2015-10-05T23:25:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-05T23:25:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 30ms (Views: 15.0ms | ActiveRecord: 1.0ms)
  [1m[36m (2.2ms)[0m  [1mCREATE TABLE "schema_migrations" ("version" varchar NOT NULL) [0m
  [1m[35m (19.1ms)[0m  select sqlite_version(*)
  [1m[36m (1.4ms)[0m  [1mCREATE UNIQUE INDEX "unique_schema_migrations" ON "schema_migrations" ("version")[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
Migrating to CreateShops (20150428215339)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
DEPRECATION WARNING: `#timestamp` was called without specifying an option for `null`. In Rails 5, this behavior will change to `null: false`. You should manually specify `null: true` to prevent the behavior of your existing migrations from changing. (called from block in up at /Users/letranloc/Documents/Shopify/kandy-shopify/db/migrate/20150428215339_create_shops.rb:6)
  [1m[35m (0.5ms)[0m  CREATE TABLE "shops" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "shopify_domain" varchar NOT NULL, "shopify_token" varchar NOT NULL, "created_at" datetime, "updated_at" datetime) 
  [1m[36m (0.4ms)[0m  [1mCREATE UNIQUE INDEX "index_shops_on_shopify_domain" ON "shops" ("shopify_domain")[0m
  [1m[35mSQL (0.3ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20150428215339"]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Migrating to AddKandyToShops (20150930140112)
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36m (0.7ms)[0m  [1mALTER TABLE "shops" ADD "kandy_api_key" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_api_secret" varchar
  [1m[36m (0.2ms)[0m  [1mALTER TABLE "shops" ADD "kandy_phone_number" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "kandy_username" varchar
  [1m[36m (0.3ms)[0m  [1mALTER TABLE "shops" ADD "kandy_token" varchar[0m
  [1m[35m (0.3ms)[0m  ALTER TABLE "shops" ADD "sms_order_template" varchar
  [1m[36mSQL (0.2ms)[0m  [1mINSERT INTO "schema_migrations" ("version") VALUES (?)[0m  [["version", "20150930140112"]]
  [1m[35m (3.0ms)[0m  commit transaction
Migrating to CreateTemplates (20151005045008)
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35m (0.5ms)[0m  CREATE TABLE "templates" ("id" INTEGER PRIMARY KEY AUTOINCREMENT NOT NULL, "order_creation" varchar, "order_update" varchar, "order_payment" varchar, "customer_creation" varchar, "shop_id" integer, "created_at" datetime NOT NULL, "updated_at" datetime NOT NULL) 
  [1m[36m (0.2ms)[0m  [1mCREATE  INDEX "index_templates_on_shop_id" ON "templates" ("shop_id")[0m
  [1m[35mSQL (0.2ms)[0m  INSERT INTO "schema_migrations" ("version") VALUES (?)  [["version", "20151005045008"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
  [1m[35mActiveRecord::SchemaMigration Load (0.2ms)[0m  SELECT "schema_migrations".* FROM "schema_migrations"
  [1m[36m (0.2ms)[0m  [1m            SELECT sql
            FROM sqlite_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_shops_on_shopify_domain' AND type='index'
[0m
  [1m[35m (0.1ms)[0m              SELECT sql
            FROM sqlite_master
            WHERE name='index_templates_on_shop_id' AND type='index'
            UNION ALL
            SELECT sql
            FROM sqlite_temp_master
            WHERE name='index_templates_on_shop_id' AND type='index'



Started POST "/app/uninstalled" for 23.227.37.125 at 2015-10-06 11:25:23 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[36mShop Load (16.6ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 170ms (ActiveRecord: 18.9ms)

NoMethodError (undefined method `destroy!' for nil:NilClass):
  app/controllers/shopify_controller.rb:4:in `uninstalled'




Started POST "/app/uninstalled" for 23.227.37.110 at 2015-10-06 11:27:28 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `destroy!' for nil:NilClass):
  app/controllers/shopify_controller.rb:4:in `uninstalled'




Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 11:28:02 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (1.9ms)
Completed 200 OK in 36ms (Views: 35.2ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 11:28:03 +0700


Started GET "/auth/shopify/callback?code=1a1c5e82ef757544a6266b5b81c732cb&hmac=c83ed84a7ba0fa85daf2f8e54f7181c6b0057aa63b0f57975c73b325662b3916&shop=letranloc-2.myshopify.com&signature=4d685207db0279d892a7734bd73e7b65&state=f25382e20b5d189664d1f7b7f8491dca97f6ee9b01b9772b&timestamp=1444105688" for 42.118.134.227 at 2015-10-06 11:28:08 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"1a1c5e82ef757544a6266b5b81c732cb", "hmac"=>"c83ed84a7ba0fa85daf2f8e54f7181c6b0057aa63b0f57975c73b325662b3916", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4d685207db0279d892a7734bd73e7b65", "state"=>"f25382e20b5d189664d1f7b7f8491dca97f6ee9b01b9772b", "timestamp"=>"1444105688"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (17.5ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "857ebfab95847e11170362fc9f6063b2"], ["created_at", "2015-10-06 04:28:10.559965"], ["updated_at", "2015-10-06 04:28:10.559965"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4997032a35e5fd108fb52bf7aa13525f&timestamp=1444098158
Completed 302 Found in 151ms (ActiveRecord: 20.1ms)


Started GET "/?hmac=cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4997032a35e5fd108fb52bf7aa13525f&timestamp=1444098158" for 42.118.134.227 at 2015-10-06 11:28:11 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"cf2dad51f1ec93fb96d5be121cea1df4f7ed191061e3924b79fd0394b3ac783c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4997032a35e5fd108fb52bf7aa13525f", "timestamp"=>"1444098158"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (77.6ms)
Completed 200 OK in 1378ms (Views: 1375.4ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=642c06f09fed049153f42762edd67a3f16598c49276bdcb06e7db08258478ea0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7cf1bf4ed91ad97c865f84b67a1a5b98&timestamp=1444105693" for 42.118.134.227 at 2015-10-06 11:28:14 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"642c06f09fed049153f42762edd67a3f16598c49276bdcb06e7db08258478ea0", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7cf1bf4ed91ad97c865f84b67a1a5b98", "timestamp"=>"1444105693"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 80ms (Views: 77.7ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 11:28:21 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered home/preferences.haml within layouts/embedded_app (28.6ms)
Completed 500 Internal Server Error in 48ms (ActiveRecord: 0.3ms)

ActionView::Template::Error (Invalid tag: "%{payment_gateway}, %{shipping}, %{shop_domain}".):
    72:               = label_tag :order_creation, 'Order creation (customer)'
    73:               = t.text_area :order_creation, class: 'form-control', rows: 5
    74:               .small.help-block Varialbes: %{firstname}, %{lastname}, %{order_id}, %{products}, %{total},
    75:               %{payment_gateway}, %{shipping}, %{shop_domain}
    76:           .col-sm-6
    77:             .form-group
    78:               = label_tag :order_update, 'Order update (customer)'
  app/views/home/preferences.haml:75




Started GET "/?hmac=374ebfb502325e1eb626ea34ef230bab281312f6660a6e443a2dd656915d5bc9&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ef6caf9d090c9a9b46c0616d09fa31e0&timestamp=1444105731" for 42.118.134.227 at 2015-10-06 11:28:53 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"374ebfb502325e1eb626ea34ef230bab281312f6660a6e443a2dd656915d5bc9", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ef6caf9d090c9a9b46c0616d09fa31e0", "timestamp"=>"1444105731"}
  [1m[35mShop Load (1.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (1.2ms)
Completed 200 OK in 113ms (Views: 108.8ms | ActiveRecord: 1.4ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 11:29:30 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (7.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 1]]
  Rendered home/preferences.haml within layouts/embedded_app (132.8ms)
Completed 200 OK in 193ms (Views: 181.4ms | ActiveRecord: 7.9ms)


Started GET "/?hmac=d572f191f50400c9a25678406db839fecf9751eaec7a3564ad79c6fa59fb64da&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=0928ccef4bab486897620336151ac2d3&timestamp=1444105782" for 42.118.134.227 at 2015-10-06 11:29:43 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"d572f191f50400c9a25678406db839fecf9751eaec7a3564ad79c6fa59fb64da", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"0928ccef4bab486897620336151ac2d3", "timestamp"=>"1444105782"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 63ms (Views: 61.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=702b512032756ea6d8e6da15dec115723816188aa18abfffaf4532d1734fd22e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2ac8996f79eddc59d44252f3bfac444e&timestamp=1444105903" for 42.118.134.227 at 2015-10-06 11:31:44 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"702b512032756ea6d8e6da15dec115723816188aa18abfffaf4532d1734fd22e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2ac8996f79eddc59d44252f3bfac444e", "timestamp"=>"1444105903"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 1]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 49ms (Views: 47.7ms | ActiveRecord: 0.2ms)


Started POST "/app/uninstalled" for 23.227.37.112 at 2015-10-06 11:32:29 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.5ms)[0m  DELETE FROM "shops" WHERE "shops"."id" = ?  [["id", 1]]
  [1m[36m (2.7ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 6ms (ActiveRecord: 3.4ms)


Started GET "/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973" for 42.118.134.227 at 2015-10-06 11:32:55 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2d8db39d84ad717600eff38c6c9e4e01", "timestamp"=>"1444105973"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 1]]
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 11:32:56 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.5ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 11:32:57 +0700


Started GET "/auth/shopify/callback?code=3b4966ceb7b8f5ffa43ff7c20895cb9a&hmac=9706e3684910c5ab03f97e461e75960166266e8da200871a24fd4c74737007a1&shop=letranloc-2.myshopify.com&signature=56711cc3c6e5c12e2ac98e364bc71d06&state=01b9d91797a5c53aa88e5cf12f299387d5f759608104b829&timestamp=1444105977" for 42.118.134.227 at 2015-10-06 11:32:58 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"3b4966ceb7b8f5ffa43ff7c20895cb9a", "hmac"=>"9706e3684910c5ab03f97e461e75960166266e8da200871a24fd4c74737007a1", "shop"=>"letranloc-2.myshopify.com", "signature"=>"56711cc3c6e5c12e2ac98e364bc71d06", "state"=>"01b9d91797a5c53aa88e5cf12f299387d5f759608104b829", "timestamp"=>"1444105977"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "857ebfab95847e11170362fc9f6063b2"], ["created_at", "2015-10-06 04:32:59.216582"], ["updated_at", "2015-10-06 04:32:59.216582"]]
  [1m[36m (1.7ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973
Completed 302 Found in 11ms (ActiveRecord: 3.0ms)


Started GET "/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973" for 42.118.134.227 at 2015-10-06 11:32:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2d8db39d84ad717600eff38c6c9e4e01", "timestamp"=>"1444105973"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 44ms (Views: 42.0ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=6826eb8893df26434ac35e76cafa0769d959d2e21875e8ffdfd34e5c01bdf13d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=348688ac0d23bd77a85a1450a8b699a9&timestamp=1444105980" for 42.118.134.227 at 2015-10-06 11:33:01 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"6826eb8893df26434ac35e76cafa0769d959d2e21875e8ffdfd34e5c01bdf13d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"348688ac0d23bd77a85a1450a8b699a9", "timestamp"=>"1444105980"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 70ms (Views: 68.0ms | ActiveRecord: 0.1ms)


Started GET "/?hmac=40bef8a28bcc4a90c906420af442bb48496e2b4d049db7d4247d6728bd058389&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=fa3d9fcce4d25164135dcadd4c06ce21&timestamp=1444106044" for 42.118.134.227 at 2015-10-06 11:34:06 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"40bef8a28bcc4a90c906420af442bb48496e2b4d049db7d4247d6728bd058389", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"fa3d9fcce4d25164135dcadd4c06ce21", "timestamp"=>"1444106044"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 80ms (Views: 59.1ms | ActiveRecord: 1.6ms)


Started GET "/?hmac=85f9ccb6f8f0946b023be1c260bc9552ee3dfb457f810f52d375521609469cdd&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d6f7f767246dbd257970757cdd3e2500&timestamp=1444106058" for 42.118.134.227 at 2015-10-06 11:34:20 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"85f9ccb6f8f0946b023be1c260bc9552ee3dfb457f810f52d375521609469cdd", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d6f7f767246dbd257970757cdd3e2500", "timestamp"=>"1444106058"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 83ms (Views: 62.2ms | ActiveRecord: 1.1ms)


Started GET "/?hmac=b0875aa519d9e84295d77a9d6f3f4df7782c9040c8d5282a01ce2a659b11da56&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=833c1551ff6e544b12b7e13b16ad79a9&timestamp=1444106246" for 42.118.134.227 at 2015-10-06 11:37:28 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"b0875aa519d9e84295d77a9d6f3f4df7782c9040c8d5282a01ce2a659b11da56", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"833c1551ff6e544b12b7e13b16ad79a9", "timestamp"=>"1444106246"}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.5ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 2]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 39ms (ActiveRecord: 2.4ms)


Started GET "/install" for 42.118.134.227 at 2015-10-06 11:37:29 +0700
Processing by HomeController#install as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 2]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 2], ["created_at", "2015-10-06 04:37:29.677855"], ["updated_at", "2015-10-06 04:37:29.677855"]]
  [1m[35m (1.4ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 2) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 6602ms (ActiveRecord: 4.5ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 11:37:36 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 2]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 2]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 44ms (Views: 41.7ms | ActiveRecord: 0.4ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 11:37:40 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 2]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 2]]
  Rendered home/preferences.haml within layouts/embedded_app (7.1ms)
Completed 200 OK in 54ms (Views: 51.5ms | ActiveRecord: 0.4ms)


Started POST "/app/uninstalled" for 23.227.37.96 at 2015-10-06 12:03:42 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  DELETE FROM "shops" WHERE "shops"."id" = ?  [["id", 2]]
  [1m[36m (1.6ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 5ms (ActiveRecord: 2.4ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:03:56 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 2ms (Views: 1.3ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:03:57 +0700


Started GET "/auth/shopify/callback?code=808e39e920d470492943fd72c95ae729&hmac=af7795a62ec524e6e57cd1ceedc0a49a5949bc26403cd413afae7dbdb52f3f45&shop=letranloc-2.myshopify.com&signature=d9881c877af6d152fd27926d3eea9114&state=fb302bc9e4523f8d528fcf59c20cb6839327844aeb001ab6&timestamp=1444107841" for 42.118.134.227 at 2015-10-06 12:04:02 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"808e39e920d470492943fd72c95ae729", "hmac"=>"af7795a62ec524e6e57cd1ceedc0a49a5949bc26403cd413afae7dbdb52f3f45", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d9881c877af6d152fd27926d3eea9114", "state"=>"fb302bc9e4523f8d528fcf59c20cb6839327844aeb001ab6", "timestamp"=>"1444107841"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (1.0ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "557616efb426c756ac2b17e0f3a5780c"], ["created_at", "2015-10-06 05:04:04.693432"], ["updated_at", "2015-10-06 05:04:04.693432"]]
  [1m[35m (2.4ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973
Completed 302 Found in 12ms (ActiveRecord: 4.0ms)


Started GET "/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973" for 42.118.134.227 at 2015-10-06 12:04:05 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2d8db39d84ad717600eff38c6c9e4e01", "timestamp"=>"1444105973"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.3ms)
Completed 200 OK in 121ms (Views: 119.6ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=d62a31548b1af87cb5babbf5780cabc2a19d746dbbc7cf6de0d77c8d3f502a72&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=c102af706f8dfee9747634fdbfbc99b9&timestamp=1444107846" for 42.118.134.227 at 2015-10-06 12:04:07 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"d62a31548b1af87cb5babbf5780cabc2a19d746dbbc7cf6de0d77c8d3f502a72", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"c102af706f8dfee9747634fdbfbc99b9", "timestamp"=>"1444107846"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 74ms (Views: 72.7ms | ActiveRecord: 0.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:06:37 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 1ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:06:38 +0700


Started GET "/auth/shopify/callback?code=e94bb6e5538eb7db6aaf5c071a457692&hmac=cb2b91966e20f8210b588574c50caf72e3b4ef77089f7cb3aef71563525d8fc5&shop=letranloc-2.myshopify.com&signature=16959af65403ceba48900d0dfd555222&state=424a8d2c535c1c3588b375966e0df219c10183adf91d8f69&timestamp=1444108002" for 42.118.134.227 at 2015-10-06 12:06:43 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"e94bb6e5538eb7db6aaf5c071a457692", "hmac"=>"cb2b91966e20f8210b588574c50caf72e3b4ef77089f7cb3aef71563525d8fc5", "shop"=>"letranloc-2.myshopify.com", "signature"=>"16959af65403ceba48900d0dfd555222", "state"=>"424a8d2c535c1c3588b375966e0df219c10183adf91d8f69", "timestamp"=>"1444108002"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["shopify_token", "50fc786ee1727803950aa14fc325da6a"], ["updated_at", "2015-10-06 05:06:44.770323"], ["id", 3]]
  [1m[36m (1.3ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973
Completed 302 Found in 43ms (ActiveRecord: 3.3ms)


Started GET "/?hmac=f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2d8db39d84ad717600eff38c6c9e4e01&timestamp=1444105973" for 42.118.134.227 at 2015-10-06 12:06:45 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f6a9c92cd218efd8fd52500fb117a13055c2fdd539a5cb35438661bc5d53f97d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2d8db39d84ad717600eff38c6c9e4e01", "timestamp"=>"1444105973"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 57ms (Views: 54.1ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=453866137eff979d77224caba5402aa8b185c180552e67c89dc239535556908c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=bf1823e0a310a4773a8021a23c71db3a&timestamp=1444108006" for 42.118.134.227 at 2015-10-06 12:06:47 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"453866137eff979d77224caba5402aa8b185c180552e67c89dc239535556908c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"bf1823e0a310a4773a8021a23c71db3a", "timestamp"=>"1444108006"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 73ms (Views: 71.5ms | ActiveRecord: 0.2ms)


Started GET "/?hmac=fc975823fce35d35b55f76f6b4f0b0ad86860b39f5eeec5e330d34fd23d1534c&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=d753bf6800b705f14e95d637af60acbf&timestamp=1444108044" for 42.118.134.227 at 2015-10-06 12:07:25 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"fc975823fce35d35b55f76f6b4f0b0ad86860b39f5eeec5e330d34fd23d1534c", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"d753bf6800b705f14e95d637af60acbf", "timestamp"=>"1444108044"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 70ms (Views: 67.8ms | ActiveRecord: 0.2ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:08:36 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 2ms (Views: 0.9ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:08:37 +0700


Started GET "/auth/shopify/callback?code=213de73decca71bfef6a8f4cf7edd1c1&hmac=5f33cc02772ddfd5d403d1722ebf826d5988dfad0f90be04b16280ca63e8c625&shop=letranloc-2.myshopify.com&signature=70b8c58f3e508ad2dd2ff5d863a76106&state=d8c505775166889eb309925cd6bd2916f088033d92456848&timestamp=1444108121" for 42.118.134.227 at 2015-10-06 12:08:41 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"213de73decca71bfef6a8f4cf7edd1c1", "hmac"=>"5f33cc02772ddfd5d403d1722ebf826d5988dfad0f90be04b16280ca63e8c625", "shop"=>"letranloc-2.myshopify.com", "signature"=>"70b8c58f3e508ad2dd2ff5d863a76106", "state"=>"d8c505775166889eb309925cd6bd2916f088033d92456848", "timestamp"=>"1444108121"}
  [1m[36mShop Load (0.4ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1[0m
  [1m[35mSQL (0.4ms)[0m  UPDATE "shops" SET "shopify_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["shopify_token", "a5a1d758652473b667fb4ba28bd8e779"], ["updated_at", "2015-10-06 05:08:43.455773"], ["id", 3]]
  [1m[36m (1.5ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 49ms (ActiveRecord: 3.4ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:08:43 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.6ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 20ms (ActiveRecord: 1.1ms)


Started GET "/install" for 42.118.134.227 at 2015-10-06 12:08:44 +0700
Processing by HomeController#install as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 3]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 3], ["created_at", "2015-10-06 05:08:44.480169"], ["updated_at", "2015-10-06 05:08:44.480169"]]
  [1m[35m (2.5ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 3) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 6245ms (ActiveRecord: 4.0ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:08:51 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 3]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 58ms (Views: 54.3ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=423ea91582e3ff1afc826e6e7d955ecda258b1c78e09b3184cc87a17ebb69523&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a8adc74f8faeecedd87596be1b29d9b3&timestamp=1444108131" for 42.118.134.227 at 2015-10-06 12:08:53 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"423ea91582e3ff1afc826e6e7d955ecda258b1c78e09b3184cc87a17ebb69523", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a8adc74f8faeecedd87596be1b29d9b3", "timestamp"=>"1444108131"}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 3]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 59ms (Views: 57.7ms | ActiveRecord: 0.1ms)


Started POST "/app/uninstalled" for 23.227.37.101 at 2015-10-06 12:09:42 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.2ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.6ms)[0m  DELETE FROM "shops" WHERE "shops"."id" = ?  [["id", 3]]
  [1m[36m (2.1ms)[0m  [1mcommit transaction[0m
Completed 200 OK in 46ms (ActiveRecord: 4.5ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:09:47 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 2ms (Views: 1.1ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:09:48 +0700


Started GET "/auth/shopify/callback?code=a285843cb87681f5d46eb0a973c69aab&hmac=9c18a17c2b71b7091a3ee3d35d967b4d8f32f1709962f05a0bd1a0cf73e86a0d&shop=letranloc-2.myshopify.com&signature=916bc878b98eada520601ed3ab1fa59d&state=d6558e086b9624f22c968915e626bfd312df0779356b029d&timestamp=1444108194" for 42.118.134.227 at 2015-10-06 12:09:54 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"a285843cb87681f5d46eb0a973c69aab", "hmac"=>"9c18a17c2b71b7091a3ee3d35d967b4d8f32f1709962f05a0bd1a0cf73e86a0d", "shop"=>"letranloc-2.myshopify.com", "signature"=>"916bc878b98eada520601ed3ab1fa59d", "state"=>"d6558e086b9624f22c968915e626bfd312df0779356b029d", "timestamp"=>"1444108194"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1
  [1m[36mSQL (0.5ms)[0m  [1mINSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)[0m  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "208c6471f825326189e3718ed32dd18a"], ["created_at", "2015-10-06 05:09:56.309923"], ["updated_at", "2015-10-06 05:09:56.309923"]]
  [1m[35m (2.3ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 12ms (ActiveRecord: 3.3ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:09:56 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 19ms (ActiveRecord: 1.0ms)


Started GET "/install" for 42.118.134.227 at 2015-10-06 12:09:57 +0700
Processing by HomeController#install as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mSQL (0.4ms)[0m  INSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)  [["shop_id", 4], ["created_at", "2015-10-06 05:09:57.275046"], ["updated_at", "2015-10-06 05:09:57.275046"]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 6364ms (ActiveRecord: 2.9ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:10:04 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 49ms (Views: 44.7ms | ActiveRecord: 0.5ms)


Started GET "/?hmac=e4249f3fa093bc740a0b7efd892ac9d942b951cb596a01545a1dfbd84b8c3384&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=97609c36643e8b06720f0523336a856e&timestamp=1444108204" for 42.118.134.227 at 2015-10-06 12:10:06 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"e4249f3fa093bc740a0b7efd892ac9d942b951cb596a01545a1dfbd84b8c3384", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"97609c36643e8b06720f0523336a856e", "timestamp"=>"1444108204"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 68ms (Views: 66.1ms | ActiveRecord: 0.2ms)


Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 12:18:23 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:18:23-04:00", "updated_at"=>"2015-10-06T01:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:18:23-04:00", "updated_at"=>"2015-10-06T01:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `customer' for #<ActionController::Parameters:0x007fb3e2489278>):
  app/controllers/sms_controller.rb:4:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 12:18:24 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:18:23-04:00", "updated_at"=>"2015-10-06T01:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:18:23-04:00", "updated_at"=>"2015-10-06T01:18:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:18:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `customer' for #<ActionController::Parameters:0x007fb3e87310b0>):
  app/controllers/sms_controller.rb:4:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 12:19:27 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:19:27-04:00", "updated_at"=>"2015-10-06T01:19:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:19:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:19:27-04:00", "updated_at"=>"2015-10-06T01:19:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:19:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `customer' for #<ActionController::Parameters:0x007fb3e3b9fb60>):
  app/controllers/sms_controller.rb:4:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 12:21:27 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:21:27-04:00", "updated_at"=>"2015-10-06T01:21:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:21:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:21:27-04:00", "updated_at"=>"2015-10-06T01:21:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:21:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 1ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `customer' for #<ActionController::Parameters:0x007fb3ea1d9480>):
  app/controllers/sms_controller.rb:4:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 12:26:30 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:26:30-04:00", "updated_at"=>"2015-10-06T01:26:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:26:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:26:30-04:00", "updated_at"=>"2015-10-06T01:26:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:26:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 2ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `customer' for #<ActionController::Parameters:0x007fb3ea20f418>):
  app/controllers/sms_controller.rb:4:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 12:35:17 +0700
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:35:17-04:00", "updated_at"=>"2015-10-06T01:35:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:35:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:35:17-04:00", "updated_at"=>"2015-10-06T01:35:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:35:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 2ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 12:35:39 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:35:38-04:00", "updated_at"=>"2015-10-06T01:35:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:35:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:35:38-04:00", "updated_at"=>"2015-10-06T01:35:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:35:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 12:36:01 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:36:00-04:00", "updated_at"=>"2015-10-06T01:36:00-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:36:00-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:36:00-04:00", "updated_at"=>"2015-10-06T01:36:00-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:36:00-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 12:36:15 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:36:15-04:00", "updated_at"=>"2015-10-06T01:36:15-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:36:15-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:36:15-04:00", "updated_at"=>"2015-10-06T01:36:15-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:36:15-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 12:39:13 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:39:13-04:00", "updated_at"=>"2015-10-06T01:39:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:39:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:39:13-04:00", "updated_at"=>"2015-10-06T01:39:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:39:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 12:39:32 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:39:32-04:00", "updated_at"=>"2015-10-06T01:39:32-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:39:32-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:39:32-04:00", "updated_at"=>"2015-10-06T01:39:32-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:39:32-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 0ms (ActiveRecord: 0.0ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 12:40:35 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:40:34-04:00", "updated_at"=>"2015-10-06T01:40:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:40:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:40:34-04:00", "updated_at"=>"2015-10-06T01:40:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:40:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 200 OK in 1ms (ActiveRecord: 0.0ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:46:23 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"1ehuOrPHIycqzMcGwxD0fXdYw2ZaUNtdUnYFn/rxhCWNAiC8xmlqL2zeAxE6Inz2WBpR+q9azx+2R3DKE2Ocpg==", "shop"=>{"id"=>"2", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"", "kandy_phone_number"=>"+841234905207", "template_attributes"=>{"id"=>"1", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
Can't verify CSRF token authenticity
Redirected to https://kandy-shopify.ngrok.io/login?shop%5Bid%5D=2&shop%5Bkandy_api_key%5D=DAK81e603cf961e4c0295aa8e665828913d&shop%5Bkandy_api_secret%5D=DAS89933b8fc32949dc84eeebfabadfddee&shop%5Bkandy_password%5D=a1234567&shop%5Bkandy_phone_number%5D=%2B841234905207&shop%5Bkandy_token%5D=&shop%5Bkandy_username%5D=user2&shop%5Btemplate_attributes%5D%5Bcustomer_creation%5D=&shop%5Btemplate_attributes%5D%5Bid%5D=1&shop%5Btemplate_attributes%5D%5Border_creation%5D=&shop%5Btemplate_attributes%5D%5Border_payment%5D=&shop%5Btemplate_attributes%5D%5Border_update%5D=
Completed 302 Found in 29ms (ActiveRecord: 0.0ms)


Started GET "/login?shop%5Bid%5D=2&shop%5Bkandy_api_key%5D=DAK81e603cf961e4c0295aa8e665828913d&shop%5Bkandy_api_secret%5D=DAS89933b8fc32949dc84eeebfabadfddee&shop%5Bkandy_password%5D=[FILTERED]&shop%5Bkandy_phone_number%5D=%2B841234905207&shop%5Bkandy_token%5D=&shop%5Bkandy_username%5D=user2&shop%5Btemplate_attributes%5D%5Bcustomer_creation%5D=&shop%5Btemplate_attributes%5D%5Bid%5D=1&shop%5Btemplate_attributes%5D%5Border_creation%5D=&shop%5Btemplate_attributes%5D%5Border_payment%5D=&shop%5Btemplate_attributes%5D%5Border_update%5D=" for 42.118.134.227 at 2015-10-06 12:46:24 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>{"id"=>"2", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_password"=>"[FILTERED]", "kandy_phone_number"=>"+841234905207", "kandy_token"=>"", "kandy_username"=>"user2", "template_attributes"=>{"customer_creation"=>"", "id"=>"1", "order_creation"=>"", "order_payment"=>"", "order_update"=>""}}}
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 2ms (ActiveRecord: 0.0ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:46:25 +0700
Processing by HomeController#index as HTML
Redirected to https://kandy-shopify.ngrok.io/login
Completed 302 Found in 1ms (ActiveRecord: 0.0ms)


Started GET "/login" for 42.118.134.227 at 2015-10-06 12:46:26 +0700
Processing by SessionsController#new as HTML
  Rendered sessions/new.haml within layouts/application (4.8ms)
Completed 200 OK in 838ms (Views: 836.9ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:46:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.5ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 12:46:52 +0700


Started GET "/auth/shopify/callback?code=8bf5d2cba41f15bfd3cebbbb408b2d0a&hmac=c749331d339347764dde56922ab2261e08033f563bbafbcc3f350e5c0eb47a54&shop=letranloc-2.myshopify.com&signature=3e6e96373bda9b978ea93aec8fba860f&state=664cdd203f5493183d4453f611effb787b80ce8be503aa82&timestamp=1444110413" for 42.118.134.227 at 2015-10-06 12:46:53 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"8bf5d2cba41f15bfd3cebbbb408b2d0a", "hmac"=>"c749331d339347764dde56922ab2261e08033f563bbafbcc3f350e5c0eb47a54", "shop"=>"letranloc-2.myshopify.com", "signature"=>"3e6e96373bda9b978ea93aec8fba860f", "state"=>"664cdd203f5493183d4453f611effb787b80ce8be503aa82", "timestamp"=>"1444110413"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 142ms (ActiveRecord: 3.6ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 12:46:55 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/index.haml within layouts/embedded_app (68.9ms)
Completed 200 OK in 263ms (Views: 175.2ms | ActiveRecord: 1.2ms)


Started GET "/?hmac=0302325bf98b3810c8f43a0704ab343d8ea670acda708a836e16233c6fce842b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=762873af4ab901b253a4618032a809bb&timestamp=1444110418" for 42.118.134.227 at 2015-10-06 12:46:59 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"0302325bf98b3810c8f43a0704ab343d8ea670acda708a836e16233c6fce842b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"762873af4ab901b253a4618032a809bb", "timestamp"=>"1444110418"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.2ms)
Completed 200 OK in 81ms (Views: 78.0ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 12:47:03 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (51.9ms)
Completed 200 OK in 97ms (Views: 94.8ms | ActiveRecord: 0.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:47:24 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"U/qlBv/7dhoNm9ZPJ7Syn79+Gju9LAIA8HdLgNwUJ+3vq2WFhpiz5+Bb0jL9gnGqIHtD7Ti0eUPVwhUjW3cMdw==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"", "kandy_phone_number"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
Unpermitted parameters: kandy_token, kandy_phone_number
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "shops" SET "kandy_api_key" = ?, "kandy_api_secret" = ?, "kandy_username" = ?, "updated_at" = ? WHERE "shops"."id" = ?[0m  [["kandy_api_key", "DAK81e603cf961e4c0295aa8e665828913d"], ["kandy_api_secret", "DAS89933b8fc32949dc84eeebfabadfddee"], ["kandy_username", "user2"], ["updated_at", "2015-10-06 05:47:24.692195"], ["id", 4]]
  [1m[35mSQL (0.2ms)[0m  UPDATE "templates" SET "order_creation" = ?, "order_update" = ?, "order_payment" = ?, "customer_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?  [["order_creation", ""], ["order_update", ""], ["order_payment", ""], ["customer_creation", ""], ["updated_at", "2015-10-06 05:47:24.694800"], ["id", 3]]
  [1m[36m (2.8ms)[0m  [1mcommit transaction[0m
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.3ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35mSQL (0.7ms)[0m  UPDATE "shops" SET "kandy_token" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_token", "UATff8f57a3e2ae4a7b8ad5a1c957cbac99"], ["updated_at", "2015-10-06 05:47:27.034081"], ["id", 4]]
  [1m[36m (2.4ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 2406ms (Views: 47.4ms | ActiveRecord: 7.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:48:21 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"jq4JhXfuLfHapYyaoULoLB4XJwNW7SYqooxUqRhf3rky/8kGDo3oDDdliOd7dCsZgRJ+1dN1XWmHOQoKnzz1Iw==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
Unpermitted parameters: kandy_token, kandy_phone_number
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  [1m[35mShop Exists (0.2ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.9ms)
Completed 200 OK in 103ms (Views: 68.9ms | ActiveRecord: 2.1ms)


Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 12:48:34 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:48:34-04:00", "updated_at"=>"2015-10-06T01:48:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:48:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:48:34-04:00", "updated_at"=>"2015-10-06T01:48:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:48:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 20ms (Views: 18.4ms | ActiveRecord: 0.3ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:49:02 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"a1DQnmGHMqcy7wI9bOj0WWmDYUzMMT/88FtI6O4PwjLXARAdGOT3Wt8vBkC23jds9oY4mkmpRL/V7hZLaWzpqA==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Unpermitted parameters: kandy_token, kandy_phone_number
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  [1m[36mShop Exists (0.4ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.8ms)
Completed 200 OK in 53ms (Views: 45.6ms | ActiveRecord: 0.9ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:49:37 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"Nb4otDUNlGgbj0gvBHpGFXVxHfHTg6Se8hmsNcKw7zSJ7+g3TG5RlfZPTFLeTIUg6nREJ1Yb393XrPKWRdPErg==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Unpermitted parameter: kandy_token
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "shops" SET "kandy_phone_number" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_phone_number", "+841234905207"], ["updated_at", "2015-10-06 05:49:37.286734"], ["id", 4]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.4ms)
Completed 200 OK in 87ms (Views: 50.4ms | ActiveRecord: 4.7ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 12:50:34 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"0u/lFd0aq/RWLMuXIdgd0+2P6yupqPpSnwhX2IECVwtuviWWpHluCbvsz+r77t7mcoqy/SwwgRG6vQl7BmF8kQ==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"+841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hello {{customer.first_name}}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", "Hello {{customer.first_name}}"], ["updated_at", "2015-10-06 05:50:34.547722"], ["id", 3]]
  [1m[35m (2.6ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (4.8ms)
Completed 200 OK in 60ms (Views: 48.4ms | ActiveRecord: 3.6ms)


Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 12:50:42 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:50:42-04:00", "updated_at"=>"2015-10-06T01:50:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:50:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:50:42-04:00", "updated_at"=>"2015-10-06T01:50:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:50:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 3ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 12:52:03 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:52:03-04:00", "updated_at"=>"2015-10-06T01:52:03-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:52:03-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:52:03-04:00", "updated_at"=>"2015-10-06T01:52:03-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:52:03-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 19ms (Views: 1.0ms | ActiveRecord: 1.2ms)


Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 12:53:51 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:53:51-04:00", "updated_at"=>"2015-10-06T01:53:51-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:53:51-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:53:51-04:00", "updated_at"=>"2015-10-06T01:53:51-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:53:51-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 18ms (Views: 0.9ms | ActiveRecord: 1.3ms)


Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 12:54:20 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:54:19-04:00", "updated_at"=>"2015-10-06T01:54:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:54:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:54:19-04:00", "updated_at"=>"2015-10-06T01:54:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:54:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 27ms (Views: 0.8ms | ActiveRecord: 1.6ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 12:55:28 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:55:28-04:00", "updated_at"=>"2015-10-06T01:55:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:55:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:55:28-04:00", "updated_at"=>"2015-10-06T01:55:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:55:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 16ms (Views: 0.8ms | ActiveRecord: 1.4ms)


Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 12:55:46 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:55:46-04:00", "updated_at"=>"2015-10-06T01:55:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:55:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:55:46-04:00", "updated_at"=>"2015-10-06T01:55:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:55:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  Rendered text template (0.0ms)
Completed 200 OK in 16ms (Views: 0.9ms | ActiveRecord: 1.2ms)


Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 12:56:22 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:56:21-04:00", "updated_at"=>"2015-10-06T01:56:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:56:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:56:21-04:00", "updated_at"=>"2015-10-06T01:56:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:56:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 45ms (Views: 0.9ms | ActiveRecord: 1.7ms)


Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 12:57:32 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:57:31-04:00", "updated_at"=>"2015-10-06T01:57:31-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:57:31-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T01:57:31-04:00", "updated_at"=>"2015-10-06T01:57:31-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T01:57:31-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 29ms (Views: 0.7ms | ActiveRecord: 1.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 13:16:53 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"cvkA7r+TXoIV5KRXTiCnnKhuFHuAGIVPGCCWZfVU1lXOqMBtxvCbf/gkoCqUFmSpN2tNrQWA/gw9lcjGcjf9zw==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hello {{customer.first_name}}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Unpermitted parameter: kandy_token
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35mSQL (1.0ms)[0m  UPDATE "shops" SET "kandy_phone_number" = ?, "updated_at" = ? WHERE "shops"."id" = ?  [["kandy_phone_number", "841234905207"], ["updated_at", "2015-10-06 06:16:53.537858"], ["id", 4]]
  [1m[36m (1.4ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (5.5ms)
Completed 200 OK in 268ms (Views: 253.9ms | ActiveRecord: 3.2ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 13:16:59 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:16:58-04:00", "updated_at"=>"2015-10-06T02:16:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:16:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:16:58-04:00", "updated_at"=>"2015-10-06T02:16:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:16:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 6ms (Views: 0.7ms | ActiveRecord: 0.4ms)


Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 13:17:58 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:17:58-04:00", "updated_at"=>"2015-10-06T02:17:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:17:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:17:58-04:00", "updated_at"=>"2015-10-06T02:17:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:17:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 74ms (Views: 0.7ms | ActiveRecord: 4.0ms)


Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 13:35:04 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:04-04:00", "updated_at"=>"2015-10-06T02:35:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:04-04:00", "updated_at"=>"2015-10-06T02:35:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1179ms (ActiveRecord: 2.4ms)

NoMethodError (undefined method `status' for #<Hash:0x007fcf8befcda8>):
  app/services/kandy.rb:25:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:35:06 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:06-04:00", "updated_at"=>"2015-10-06T02:35:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:06-04:00", "updated_at"=>"2015-10-06T02:35:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3105ms (ActiveRecord: 0.3ms)

NoMethodError (undefined method `status' for #<Hash:0x007fcf8be2f448>):
  app/services/kandy.rb:25:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 13:35:48 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:48-04:00", "updated_at"=>"2015-10-06T02:35:48-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:48-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:48-04:00", "updated_at"=>"2015-10-06T02:35:48-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:48-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 973ms (ActiveRecord: 1.7ms)

NoMethodError (undefined method `status' for #<Hash:0x007fcf84a93a70>):
  app/services/kandy.rb:26:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:35:50 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:50-04:00", "updated_at"=>"2015-10-06T02:35:50-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:50-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:35:50-04:00", "updated_at"=>"2015-10-06T02:35:50-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:35:50-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1066ms (ActiveRecord: 0.4ms)

NoMethodError (undefined method `status' for #<Hash:0x007fcf8ad2fdf0>):
  app/services/kandy.rb:26:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:36:14 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:36:14-04:00", "updated_at"=>"2015-10-06T02:36:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:36:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:36:14-04:00", "updated_at"=>"2015-10-06T02:36:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:36:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 982ms (ActiveRecord: 0.3ms)

NoMethodError (undefined method `status' for #<Hash:0x007fcf8ba05598>):
  app/services/kandy.rb:26:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:36:55 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:36:55-04:00", "updated_at"=>"2015-10-06T02:36:55-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:36:55-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:36:55-04:00", "updated_at"=>"2015-10-06T02:36:55-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:36:55-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2967ms (ActiveRecord: 7.0ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 13:37:02 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:37:02-04:00", "updated_at"=>"2015-10-06T02:37:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:37:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:37:02-04:00", "updated_at"=>"2015-10-06T02:37:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:37:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1964ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:37:05 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:37:05-04:00", "updated_at"=>"2015-10-06T02:37:05-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:37:05-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:37:05-04:00", "updated_at"=>"2015-10-06T02:37:05-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:37:05-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1966ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 13:38:09 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:09-04:00", "updated_at"=>"2015-10-06T02:38:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:09-04:00", "updated_at"=>"2015-10-06T02:38:09-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:09-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1968ms (ActiveRecord: 2.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:38:12 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:12-04:00", "updated_at"=>"2015-10-06T02:38:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:12-04:00", "updated_at"=>"2015-10-06T02:38:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1900ms (ActiveRecord: 0.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 13:38:14 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:12-04:00", "updated_at"=>"2015-10-06T02:38:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:12-04:00", "updated_at"=>"2015-10-06T02:38:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1924ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 13:38:17 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:17-04:00", "updated_at"=>"2015-10-06T02:38:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:38:17-04:00", "updated_at"=>"2015-10-06T02:38:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:38:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2093ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:39:03 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:39:03-04:00", "updated_at"=>"2015-10-06T02:39:03-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:39:03-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:39:03-04:00", "updated_at"=>"2015-10-06T02:39:03-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:39:03-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1907ms (ActiveRecord: 0.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 13:39:19 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:39:18-04:00", "updated_at"=>"2015-10-06T02:39:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:39:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:39:18-04:00", "updated_at"=>"2015-10-06T02:39:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:39:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1998ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:40:20 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:40:20-04:00", "updated_at"=>"2015-10-06T02:40:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:40:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:40:20-04:00", "updated_at"=>"2015-10-06T02:40:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:40:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 78ms (ActiveRecord: 1.9ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/services/kandy.rb:27: syntax error, unexpected tSTRING_DEND, expecting keyword_end
...essage: {text: params[:text]}}}, parameters: {key: access_to...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/services/kandy.rb:27: syntax error, unexpected tSTRING_DEND, expecting '}'
/Users/letranloc/Documents/Shopify/kandy-shopify/app/services/kandy.rb:35: syntax error, unexpected tSTRING_DEND, expecting '}'):
  app/services/kandy.rb:27: syntax error, unexpected tSTRING_DEND, expecting keyword_end
  app/services/kandy.rb:27: syntax error, unexpected tSTRING_DEND, expecting '}'
  app/services/kandy.rb:35: syntax error, unexpected tSTRING_DEND, expecting '}'
  app/controllers/sms_controller.rb:21:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 13:41:22 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:21-04:00", "updated_at"=>"2015-10-06T02:41:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:21-04:00", "updated_at"=>"2015-10-06T02:41:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3509ms (ActiveRecord: 1.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:41:33 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:33-04:00", "updated_at"=>"2015-10-06T02:41:33-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:33-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:33-04:00", "updated_at"=>"2015-10-06T02:41:33-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:33-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1924ms (ActiveRecord: 1.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:41:35 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:35-04:00", "updated_at"=>"2015-10-06T02:41:35-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:35-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:41:35-04:00", "updated_at"=>"2015-10-06T02:41:35-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:41:35-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2661ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:42:03 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:02-04:00", "updated_at"=>"2015-10-06T02:42:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:02-04:00", "updated_at"=>"2015-10-06T02:42:02-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:02-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2115ms (ActiveRecord: 2.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 13:42:05 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:05-04:00", "updated_at"=>"2015-10-06T02:42:05-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:05-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:05-04:00", "updated_at"=>"2015-10-06T02:42:05-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:05-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1899ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:42:34 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:33-04:00", "updated_at"=>"2015-10-06T02:42:33-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:33-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:33-04:00", "updated_at"=>"2015-10-06T02:42:33-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:33-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2056ms (ActiveRecord: 2.0ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 13:42:37 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:36-04:00", "updated_at"=>"2015-10-06T02:42:36-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:36-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:36-04:00", "updated_at"=>"2015-10-06T02:42:36-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:36-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1997ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:42:39 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:39-04:00", "updated_at"=>"2015-10-06T02:42:39-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:39-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:42:39-04:00", "updated_at"=>"2015-10-06T02:42:39-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:42:39-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1863ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:43:10 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:10-04:00", "updated_at"=>"2015-10-06T02:43:10-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:10-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:10-04:00", "updated_at"=>"2015-10-06T02:43:10-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:10-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1949ms (ActiveRecord: 2.0ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.122 at 2015-10-06 13:43:20 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:20-04:00", "updated_at"=>"2015-10-06T02:43:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:20-04:00", "updated_at"=>"2015-10-06T02:43:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1910ms (ActiveRecord: 0.6ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 13:43:30 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:30-04:00", "updated_at"=>"2015-10-06T02:43:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:30-04:00", "updated_at"=>"2015-10-06T02:43:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3267ms (ActiveRecord: 1.9ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:43:35 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:34-04:00", "updated_at"=>"2015-10-06T02:43:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:34-04:00", "updated_at"=>"2015-10-06T02:43:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2455ms (ActiveRecord: 0.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:43:41 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:40-04:00", "updated_at"=>"2015-10-06T02:43:40-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:40-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:43:40-04:00", "updated_at"=>"2015-10-06T02:43:40-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:43:40-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1894ms (ActiveRecord: 1.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 13:44:06 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:06-04:00", "updated_at"=>"2015-10-06T02:44:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:06-04:00", "updated_at"=>"2015-10-06T02:44:06-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:06-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3119ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:44:37 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:37-04:00", "updated_at"=>"2015-10-06T02:44:37-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:37-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:37-04:00", "updated_at"=>"2015-10-06T02:44:37-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:37-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2320ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 13:44:43 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:42-04:00", "updated_at"=>"2015-10-06T02:44:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:44:42-04:00", "updated_at"=>"2015-10-06T02:44:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:44:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2029ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 13:45:14 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:13-04:00", "updated_at"=>"2015-10-06T02:45:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:13-04:00", "updated_at"=>"2015-10-06T02:45:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2086ms (ActiveRecord: 2.6ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 13:45:16 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:14-04:00", "updated_at"=>"2015-10-06T02:45:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:14-04:00", "updated_at"=>"2015-10-06T02:45:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1984ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:45:18 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:18-04:00", "updated_at"=>"2015-10-06T02:45:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:18-04:00", "updated_at"=>"2015-10-06T02:45:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1957ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 13:45:24 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:23-04:00", "updated_at"=>"2015-10-06T02:45:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:23-04:00", "updated_at"=>"2015-10-06T02:45:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1965ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 13:45:44 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:44-04:00", "updated_at"=>"2015-10-06T02:45:44-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:44-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:45:44-04:00", "updated_at"=>"2015-10-06T02:45:44-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:45:44-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2360ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 13:46:21 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:21-04:00", "updated_at"=>"2015-10-06T02:46:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:21-04:00", "updated_at"=>"2015-10-06T02:46:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1885ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 13:46:25 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:25-04:00", "updated_at"=>"2015-10-06T02:46:25-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:25-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:25-04:00", "updated_at"=>"2015-10-06T02:46:25-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:25-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 5354ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 13:46:41 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:41-04:00", "updated_at"=>"2015-10-06T02:46:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:46:41-04:00", "updated_at"=>"2015-10-06T02:46:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:46:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1868ms (ActiveRecord: 0.2ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 13:48:23 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:48:23-04:00", "updated_at"=>"2015-10-06T02:48:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:48:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:48:23-04:00", "updated_at"=>"2015-10-06T02:48:23-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:48:23-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3220ms (ActiveRecord: 1.9ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 13:49:45 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:49:45-04:00", "updated_at"=>"2015-10-06T02:49:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:49:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:49:45-04:00", "updated_at"=>"2015-10-06T02:49:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:49:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2514ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:27:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 13:50:16 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:16-04:00", "updated_at"=>"2015-10-06T02:50:16-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:16-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:16-04:00", "updated_at"=>"2015-10-06T02:50:16-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:16-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2054ms (Views: 1.5ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 13:50:27 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:27-04:00", "updated_at"=>"2015-10-06T02:50:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:27-04:00", "updated_at"=>"2015-10-06T02:50:27-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:27-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2561ms (Views: 1.4ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 13:50:41 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:41-04:00", "updated_at"=>"2015-10-06T02:50:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:41-04:00", "updated_at"=>"2015-10-06T02:50:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2546ms (Views: 1.4ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:50:52 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:52-04:00", "updated_at"=>"2015-10-06T02:50:52-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:52-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:50:52-04:00", "updated_at"=>"2015-10-06T02:50:52-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:50:52-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2446ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 13:51:43 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:51:43-04:00", "updated_at"=>"2015-10-06T02:51:43-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:51:43-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:51:43-04:00", "updated_at"=>"2015-10-06T02:51:43-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:51:43-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2523ms (Views: 1.0ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 13:53:31 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:53:30-04:00", "updated_at"=>"2015-10-06T02:53:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:53:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:53:30-04:00", "updated_at"=>"2015-10-06T02:53:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:53:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 3260ms (Views: 0.4ms | ActiveRecord: 0.5ms)


Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 13:53:55 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:53:55-04:00", "updated_at"=>"2015-10-06T02:53:55-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:53:55-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:53:55-04:00", "updated_at"=>"2015-10-06T02:53:55-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:53:55-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2281ms (Views: 1.1ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 13:58:04 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:58:04-04:00", "updated_at"=>"2015-10-06T02:58:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:58:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:58:04-04:00", "updated_at"=>"2015-10-06T02:58:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:58:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2138ms (Views: 1.4ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 13:59:36 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:59:36-04:00", "updated_at"=>"2015-10-06T02:59:36-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:59:36-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:59:36-04:00", "updated_at"=>"2015-10-06T02:59:36-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:59:36-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2043ms (ActiveRecord: 1.8ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 13:59:39 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:59:38-04:00", "updated_at"=>"2015-10-06T02:59:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:59:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T02:59:38-04:00", "updated_at"=>"2015-10-06T02:59:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T02:59:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1954ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 14:00:45 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:00:45-04:00", "updated_at"=>"2015-10-06T03:00:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:00:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:00:45-04:00", "updated_at"=>"2015-10-06T03:00:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:00:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1988ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 14:01:04 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:01:04-04:00", "updated_at"=>"2015-10-06T03:01:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:01:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:01:04-04:00", "updated_at"=>"2015-10-06T03:01:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:01:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1986ms (ActiveRecord: 2.0ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 14:01:07 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:01:07-04:00", "updated_at"=>"2015-10-06T03:01:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:01:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:01:07-04:00", "updated_at"=>"2015-10-06T03:01:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:01:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2884ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:02:12 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:02:12-04:00", "updated_at"=>"2015-10-06T03:02:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:02:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:02:12-04:00", "updated_at"=>"2015-10-06T03:02:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:02:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1963ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:02:48 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:02:48-04:00", "updated_at"=>"2015-10-06T03:02:48-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:02:48-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:02:48-04:00", "updated_at"=>"2015-10-06T03:02:48-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:02:48-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 44ms (ActiveRecord: 2.0ms)

SyntaxError (/Users/letranloc/Documents/Shopify/kandy-shopify/app/services/kandy.rb:28: syntax error, unexpected ':', expecting '}'
...'/devices/smss'].post {message: {destination: params[:to], s...
...                               ^
/Users/letranloc/Documents/Shopify/kandy-shopify/app/services/kandy.rb:28: syntax error, unexpected tLABEL
... params[:text]}}}.to_json, key: access_token, device_id: dev...
...                               ^):
  app/services/kandy.rb:28: syntax error, unexpected ':', expecting '}'
  app/services/kandy.rb:28: syntax error, unexpected tLABEL
  app/controllers/sms_controller.rb:21:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:04:15 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:04:15-04:00", "updated_at"=>"2015-10-06T03:04:15-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:04:15-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:04:15-04:00", "updated_at"=>"2015-10-06T03:04:15-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:04:15-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2026ms (ActiveRecord: 1.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:28:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 14:05:19 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:19-04:00", "updated_at"=>"2015-10-06T03:05:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:19-04:00", "updated_at"=>"2015-10-06T03:05:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2021ms (ActiveRecord: 2.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:05:22 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:21-04:00", "updated_at"=>"2015-10-06T03:05:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:21-04:00", "updated_at"=>"2015-10-06T03:05:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2163ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:05:27 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:26-04:00", "updated_at"=>"2015-10-06T03:05:26-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:26-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:05:26-04:00", "updated_at"=>"2015-10-06T03:05:26-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:05:26-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 3882ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:06:13 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:12-04:00", "updated_at"=>"2015-10-06T03:06:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:12-04:00", "updated_at"=>"2015-10-06T03:06:12-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:12-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2011ms (ActiveRecord: 1.8ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 14:06:15 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:13-04:00", "updated_at"=>"2015-10-06T03:06:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:13-04:00", "updated_at"=>"2015-10-06T03:06:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2020ms (ActiveRecord: 0.5ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 14:06:17 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:17-04:00", "updated_at"=>"2015-10-06T03:06:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:17-04:00", "updated_at"=>"2015-10-06T03:06:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1944ms (ActiveRecord: 0.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 14:06:28 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:28-04:00", "updated_at"=>"2015-10-06T03:06:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:06:28-04:00", "updated_at"=>"2015-10-06T03:06:28-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:06:28-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2471ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 14:07:04 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:04-04:00", "updated_at"=>"2015-10-06T03:07:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:04-04:00", "updated_at"=>"2015-10-06T03:07:04-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:04-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2018ms (ActiveRecord: 1.7ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:07:07 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:07-04:00", "updated_at"=>"2015-10-06T03:07:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:07-04:00", "updated_at"=>"2015-10-06T03:07:07-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:07-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1939ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 14:07:19 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:19-04:00", "updated_at"=>"2015-10-06T03:07:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:19-04:00", "updated_at"=>"2015-10-06T03:07:19-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:19-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1944ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 14:07:30 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:29-04:00", "updated_at"=>"2015-10-06T03:07:29-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:29-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:29-04:00", "updated_at"=>"2015-10-06T03:07:29-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:29-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1979ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:07:50 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:50-04:00", "updated_at"=>"2015-10-06T03:07:50-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:50-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:07:50-04:00", "updated_at"=>"2015-10-06T03:07:50-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:07:50-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1936ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 14:08:11 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:10-04:00", "updated_at"=>"2015-10-06T03:08:10-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:10-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:10-04:00", "updated_at"=>"2015-10-06T03:08:10-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:10-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2689ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 14:08:31 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:31-04:00", "updated_at"=>"2015-10-06T03:08:31-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:31-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:31-04:00", "updated_at"=>"2015-10-06T03:08:31-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:31-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2073ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.122 at 2015-10-06 14:08:36 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:35-04:00", "updated_at"=>"2015-10-06T03:08:35-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:35-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:08:35-04:00", "updated_at"=>"2015-10-06T03:08:35-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:08:35-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 1947ms (ActiveRecord: 0.3ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 14:09:17 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:17-04:00", "updated_at"=>"2015-10-06T03:09:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:17-04:00", "updated_at"=>"2015-10-06T03:09:17-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:17-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
Completed 500 Internal Server Error in 2034ms (ActiveRecord: 0.4ms)

RestClient::Forbidden (403 Forbidden):
  app/services/kandy.rb:29:in `send_sms'
  app/controllers/sms_controller.rb:22:in `order_creation'




Started POST "/sms/order-creation" for 23.227.37.112 at 2015-10-06 14:09:23 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:22-04:00", "updated_at"=>"2015-10-06T03:09:22-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:22-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:22-04:00", "updated_at"=>"2015-10-06T03:09:22-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:22-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.1ms)
Completed 200 OK in 2229ms (Views: 1.3ms | ActiveRecord: 1.6ms)


Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:09:25 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:25-04:00", "updated_at"=>"2015-10-06T03:09:25-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:25-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:09:25-04:00", "updated_at"=>"2015-10-06T03:09:25-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:09:25-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2139ms (Views: 0.6ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 14:10:14 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:10:14-04:00", "updated_at"=>"2015-10-06T03:10:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:10:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:10:14-04:00", "updated_at"=>"2015-10-06T03:10:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:10:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2254ms (Views: 0.6ms | ActiveRecord: 0.2ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 14:10:29 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:10:29-04:00", "updated_at"=>"2015-10-06T03:10:29-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:10:29-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:10:29-04:00", "updated_at"=>"2015-10-06T03:10:29-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:10:29-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2200ms (Views: 1.0ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.123 at 2015-10-06 14:11:53 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:11:53-04:00", "updated_at"=>"2015-10-06T03:11:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:11:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:11:53-04:00", "updated_at"=>"2015-10-06T03:11:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:11:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2250ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 14:13:43 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:13:42-04:00", "updated_at"=>"2015-10-06T03:13:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:13:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:13:42-04:00", "updated_at"=>"2015-10-06T03:13:42-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:13:42-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2288ms (Views: 0.6ms | ActiveRecord: 0.3ms)


Started POST "/sms/order-creation" for 23.227.37.120 at 2015-10-06 14:29:53 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:29:53-04:00", "updated_at"=>"2015-10-06T03:29:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:29:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:29:53-04:00", "updated_at"=>"2015-10-06T03:29:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:29:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.1ms)
Completed 200 OK in 2217ms (Views: 1.4ms | ActiveRecord: 2.0ms)


Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 14:31:21 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:31:20-04:00", "updated_at"=>"2015-10-06T03:31:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:31:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:31:20-04:00", "updated_at"=>"2015-10-06T03:31:20-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:31:20-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2268ms (Views: 1.6ms | ActiveRecord: 1.7ms)


Started GET "/?hmac=04526ea3a1ca2f2a21675948edacfc8eb7b3162127edd4add5f3926605ee7b49&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=df285ca2105c2e0bb8fd681d077d3939&timestamp=1444116921" for 42.118.134.227 at 2015-10-06 14:35:23 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"04526ea3a1ca2f2a21675948edacfc8eb7b3162127edd4add5f3926605ee7b49", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"df285ca2105c2e0bb8fd681d077d3939", "timestamp"=>"1444116921"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Redirected to https://kandy-shopify.ngrok.io/preferences
Completed 302 Found in 38ms (ActiveRecord: 1.0ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 14:35:23 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (4.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (36.7ms)
Completed 200 OK in 349ms (Views: 340.9ms | ActiveRecord: 5.3ms)


Started GET "/?hmac=4a6637ed83a342851f410993fd93bb563b2db2fcf55ea906c895275a6a6e7f6e&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=e061668bddbf3ef708239287a213f9d3&timestamp=1444116929" for 42.118.134.227 at 2015-10-06 14:35:30 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4a6637ed83a342851f410993fd93bb563b2db2fcf55ea906c895275a6a6e7f6e", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"e061668bddbf3ef708239287a213f9d3", "timestamp"=>"1444116929"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Redirected to https://kandy-shopify.ngrok.io/preferences
Completed 302 Found in 2ms (ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 14:35:31 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (10.0ms)
Completed 200 OK in 97ms (Views: 94.2ms | ActiveRecord: 0.5ms)


Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 14:44:45 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:44:45-04:00", "updated_at"=>"2015-10-06T03:44:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:44:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:44:45-04:00", "updated_at"=>"2015-10-06T03:44:45-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:44:45-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 13ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `get_account_informationt' for #<SmsController:0x007fcf8d40d670>):
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.37.113 at 2015-10-06 14:44:46 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:44:46-04:00", "updated_at"=>"2015-10-06T03:44:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:44:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:44:46-04:00", "updated_at"=>"2015-10-06T03:44:46-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:44:46-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 12ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `get_account_informationt' for #<SmsController:0x007fcf84d29af0>):
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.37.125 at 2015-10-06 14:45:38 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:38-04:00", "updated_at"=>"2015-10-06T03:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:38-04:00", "updated_at"=>"2015-10-06T03:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 19ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `get_account_informationt' for #<SmsController:0x007fcf8d5f7990>):
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:45:39 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:38-04:00", "updated_at"=>"2015-10-06T03:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:38-04:00", "updated_at"=>"2015-10-06T03:45:38-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:38-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 16ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `get_account_informationt' for #<SmsController:0x007fcf87ea7de8>):
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 14:45:50 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:49-04:00", "updated_at"=>"2015-10-06T03:45:49-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:49-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:45:49-04:00", "updated_at"=>"2015-10-06T03:45:49-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:45:49-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 22ms (ActiveRecord: 0.0ms)

NoMethodError (undefined method `get_account_informationt' for #<SmsController:0x007fcf893fc270>):
  activesupport (4.2.2) lib/active_support/callbacks.rb:432:in `block in make_lambda'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:164:in `block in halting'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `each'
  activesupport (4.2.2) lib/active_support/callbacks.rb:504:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:92:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_process_action_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/abstract_controller/callbacks.rb:19:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/rescue.rb:29:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:32:in `block in process_action'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `block in instrument'
  activesupport (4.2.2) lib/active_support/notifications/instrumenter.rb:20:in `instrument'
  activesupport (4.2.2) lib/active_support/notifications.rb:164:in `instrument'
  actionpack (4.2.2) lib/action_controller/metal/instrumentation.rb:30:in `process_action'
  actionpack (4.2.2) lib/action_controller/metal/params_wrapper.rb:250:in `process_action'
  activerecord (4.2.2) lib/active_record/railties/controller_runtime.rb:18:in `process_action'
  actionpack (4.2.2) lib/abstract_controller/base.rb:137:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:46:18 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:46:18-04:00", "updated_at"=>"2015-10-06T03:46:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:46:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:46:18-04:00", "updated_at"=>"2015-10-06T03:46:18-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:46:18-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2308ms (Views: 1.3ms | ActiveRecord: 2.1ms)


Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:46:41 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:46:41-04:00", "updated_at"=>"2015-10-06T03:46:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:46:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:46:41-04:00", "updated_at"=>"2015-10-06T03:46:41-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:46:41-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2321ms (Views: 1.2ms | ActiveRecord: 1.8ms)


Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:47:53 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:47:53-04:00", "updated_at"=>"2015-10-06T03:47:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:47:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:47:53-04:00", "updated_at"=>"2015-10-06T03:47:53-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:47:53-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2193ms (Views: 0.6ms | ActiveRecord: 0.3ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 14:49:41 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"xO65cUxWTJiYvB+l/vInkmgHGWhV5Hc+kKO6WikKbmN4v3nyNTWJZXV8G9gkxOSn9wJAvtB8DH21FuT5rmlF+Q==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hello {{customer.first_name}} {{customer.first_name}}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
Unpermitted parameter: kandy_token
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  [1m[35mShop Exists (0.1ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1
  [1m[36mSQL (0.4ms)[0m  [1mUPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?[0m  [["order_creation", "Hello {{customer.first_name}} {{customer.first_name}}"], ["updated_at", "2015-10-06 07:49:41.072064"], ["id", 3]]
  [1m[35m (2.3ms)[0m  commit transaction
  Rendered home/preferences.haml within layouts/embedded_app (15.7ms)
Completed 200 OK in 80ms (Views: 60.5ms | ActiveRecord: 3.5ms)


Started POST "/preferences" for 42.118.134.227 at 2015-10-06 14:50:41 +0700
Processing by HomeController#update_preferences as HTML
  Parameters: {"utf8"=>"✓", "authenticity_token"=>"MhrT6l9E9vUa3sHLRfL7tmiJ2nzap9V6ikbH+BN4G42OSxNpJiczCPcexbafxDiD94yDql8/rjmv85lblBswFw==", "shop"=>{"id"=>"4", "kandy_api_key"=>"DAK81e603cf961e4c0295aa8e665828913d", "kandy_api_secret"=>"DAS89933b8fc32949dc84eeebfabadfddee", "kandy_username"=>"user2", "kandy_password"=>"[FILTERED]", "kandy_token"=>"UATff8f57a3e2ae4a7b8ad5a1c957cbac99", "kandy_phone_number"=>"841234905207", "template_attributes"=>{"id"=>"3", "order_creation"=>"Hello {{customer.first_name}} {{customer.first_name}}\r\nCount: {{line_items.count}}\r\nTotal: {{total_price}} {{currency}}", "order_update"=>"", "order_payment"=>"", "customer_creation"=>""}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
Unpermitted parameter: kandy_token
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  [1m[36mShop Exists (0.1ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35mSQL (0.3ms)[0m  UPDATE "templates" SET "order_creation" = ?, "updated_at" = ? WHERE "templates"."id" = ?  [["order_creation", "Hello {{customer.first_name}} {{customer.first_name}}\r\nCount: {{line_items.count}}\r\nTotal: {{total_price}} {{currency}}"], ["updated_at", "2015-10-06 07:50:41.161658"], ["id", 3]]
  [1m[36m (2.5ms)[0m  [1mcommit transaction[0m
  Rendered home/preferences.haml within layouts/embedded_app (4.5ms)
Completed 200 OK in 57ms (Views: 45.7ms | ActiveRecord: 3.4ms)


Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:50:47 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:50:47-04:00", "updated_at"=>"2015-10-06T03:50:47-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:50:47-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:50:47-04:00", "updated_at"=>"2015-10-06T03:50:47-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:50:47-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2725ms (Views: 1.0ms | ActiveRecord: 0.4ms)


Started POST "/sms/order-creation" for 23.227.37.117 at 2015-10-06 14:55:13 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:13-04:00", "updated_at"=>"2015-10-06T03:55:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:13-04:00", "updated_at"=>"2015-10-06T03:55:13-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:13-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 38ms (ActiveRecord: 0.0ms)

TypeError (can't dump anonymous module: #<Module:0x007fcf842945b8>):
  app/controllers/webhooks_controller.rb:9:in `get_account_information'




Started POST "/sms/order-creation" for 23.227.37.96 at 2015-10-06 14:55:14 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:14-04:00", "updated_at"=>"2015-10-06T03:55:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:14-04:00", "updated_at"=>"2015-10-06T03:55:14-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:14-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 107ms (ActiveRecord: 0.0ms)

TypeError (can't dump anonymous module: #<Module:0x007fcf842945b8>):
  app/controllers/webhooks_controller.rb:9:in `get_account_information'




Started POST "/sms/order-creation" for 23.227.37.101 at 2015-10-06 14:55:52 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:51-04:00", "updated_at"=>"2015-10-06T03:55:51-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:51-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:51-04:00", "updated_at"=>"2015-10-06T03:55:51-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:51-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 65ms (ActiveRecord: 0.0ms)

TypeError (can't dump anonymous module: #<Module:0x007fcf842945b8>):
  app/controllers/webhooks_controller.rb:9:in `get_account_information'




Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:55:52 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:52-04:00", "updated_at"=>"2015-10-06T03:55:52-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:52-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:55:52-04:00", "updated_at"=>"2015-10-06T03:55:52-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:55:52-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
Completed 500 Internal Server Error in 121ms (ActiveRecord: 0.0ms)

TypeError (can't dump anonymous module: #<Module:0x007fcf842945b8>):
  app/controllers/webhooks_controller.rb:9:in `get_account_information'




Started POST "/sms/order-creation" for 23.227.37.110 at 2015-10-06 14:56:17 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:16-04:00", "updated_at"=>"2015-10-06T03:56:16-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:16-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:16-04:00", "updated_at"=>"2015-10-06T03:56:16-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:16-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2328ms (Views: 1.3ms | ActiveRecord: 2.2ms)


Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:56:49 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:49-04:00", "updated_at"=>"2015-10-06T03:56:49-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:49-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:49-04:00", "updated_at"=>"2015-10-06T03:56:49-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:49-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2171ms (Views: 1.6ms | ActiveRecord: 1.5ms)


Started POST "/sms/order-creation" for 23.227.37.121 at 2015-10-06 14:56:58 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:58-04:00", "updated_at"=>"2015-10-06T03:56:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T03:56:58-04:00", "updated_at"=>"2015-10-06T03:56:58-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T03:56:58-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2175ms (Views: 0.7ms | ActiveRecord: 0.3ms)


Started GET "/?hmac=707d3cc67febd50883987737d7f9479b166a646f9781f73a9a002f2231568d5d&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=009e08c385f7a7e03674db18f8a715f5&timestamp=1444118456" for 42.118.134.227 at 2015-10-06 15:00:57 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"707d3cc67febd50883987737d7f9479b166a646f9781f73a9a002f2231568d5d", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"009e08c385f7a7e03674db18f8a715f5", "timestamp"=>"1444118456"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.4ms)
Completed 200 OK in 293ms (Views: 270.0ms | ActiveRecord: 1.1ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 15:01:01 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.6ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (46.0ms)
Completed 200 OK in 106ms (Views: 100.9ms | ActiveRecord: 1.4ms)


Started GET "/?hmac=f5feb5830a6a8869beada320df289a4691d7a5b403c282d2d47c11c52f489b9b&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=1571978fd0183a31c9ffd80b07805bdf&timestamp=1444118465" for 42.118.134.227 at 2015-10-06 15:01:06 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"f5feb5830a6a8869beada320df289a4691d7a5b403c282d2d47c11c52f489b9b", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"1571978fd0183a31c9ffd80b07805bdf", "timestamp"=>"1444118465"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 57ms (Views: 55.3ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 15:01:10 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (7.2ms)
Completed 200 OK in 70ms (Views: 67.7ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=89c53b7545b76c2de110a0e3f2e52a271d68dbd9d44891f17c24202691750614&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=4349c966b9d853a29b07f6c207810516&timestamp=1444147766" for 42.118.134.227 at 2015-10-06 23:09:28 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"89c53b7545b76c2de110a0e3f2e52a271d68dbd9d44891f17c24202691750614", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"4349c966b9d853a29b07f6c207810516", "timestamp"=>"1444147766"}
Redirected to https://kandy-shopify.ngrok.io/login?shop=letranloc-2.myshopify.com
Completed 302 Found in 30ms (ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 23:09:30 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (14.1ms)
Completed 200 OK in 65ms (Views: 63.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 23:09:31 +0700


Started GET "/auth/shopify/callback?code=b510167ade1a79a1e5db84607d44fd1b&hmac=6016a6639d501e2e874916e675142dd91ccfbf44b4378a666a40a42a4fbba16a&shop=letranloc-2.myshopify.com&signature=208468164fff883e8415444af15e94d9&state=ed08240fa188a2238e28ca9606276b2b2f262e60fa1fd1d2&timestamp=1444147771" for 42.118.134.227 at 2015-10-06 23:09:32 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"b510167ade1a79a1e5db84607d44fd1b", "hmac"=>"6016a6639d501e2e874916e675142dd91ccfbf44b4378a666a40a42a4fbba16a", "shop"=>"letranloc-2.myshopify.com", "signature"=>"208468164fff883e8415444af15e94d9", "state"=>"ed08240fa188a2238e28ca9606276b2b2f262e60fa1fd1d2", "timestamp"=>"1444147771"}
  [1m[36mShop Load (28.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 4) LIMIT 1[0m
  [1m[35m (0.1ms)[0m  commit transaction
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 355ms (ActiveRecord: 31.4ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 23:09:34 +0700
Processing by HomeController#index as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (14.3ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/index.haml within layouts/embedded_app (132.0ms)
Completed 200 OK in 1349ms (Views: 1136.5ms | ActiveRecord: 15.4ms)


Started GET "/?hmac=c5486bc28e158e3f6dbf88612d4dab4ec3fa43a79663b41241add0f7b142b618&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=b377974c29f887ca9d5d222e3becc553&timestamp=1444147777" for 42.118.134.227 at 2015-10-06 23:09:40 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"c5486bc28e158e3f6dbf88612d4dab4ec3fa43a79663b41241add0f7b142b618", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"b377974c29f887ca9d5d222e3becc553", "timestamp"=>"1444147777"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (0.3ms)
Completed 200 OK in 150ms (Views: 148.0ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 23:10:18 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.4ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (103.7ms)
Completed 200 OK in 260ms (Views: 256.3ms | ActiveRecord: 0.9ms)


Started POST "/sms/order-update" for 23.227.37.125 at 2015-10-06 23:15:30 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_update as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:15:30-04:00", "updated_at"=>"2015-10-06T12:15:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:15:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:15:30-04:00", "updated_at"=>"2015-10-06T12:15:30-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:15:30-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2759ms (Views: 20.8ms | ActiveRecord: 2.5ms)


Started POST "/sms/order-creation" for 23.227.37.115 at 2015-10-06 23:17:21 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_creation as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:17:21-04:00", "updated_at"=>"2015-10-06T12:17:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:17:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:17:21-04:00", "updated_at"=>"2015-10-06T12:17:21-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:17:21-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 2225ms (Views: 0.9ms | ActiveRecord: 0.3ms)


Started POST "/sms/customer-creation" for 23.227.37.117 at 2015-10-06 23:18:08 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/sms_controller.rb:43:in `customer_creation'




Started POST "/sms/customer-creation" for 23.227.37.115 at 2015-10-06 23:18:09 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 5ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/sms_controller.rb:43:in `customer_creation'




Started POST "/sms/customer-creation" for 23.227.37.115 at 2015-10-06 23:19:11 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 6ms (ActiveRecord: 0.3ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/sms_controller.rb:43:in `customer_creation'




Started POST "/sms/order-payment" for 23.227.37.113 at 2015-10-06 23:19:35 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#order_payment as */*
  Parameters: {"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:19:34-04:00", "updated_at"=>"2015-10-06T12:19:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:19:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}, "sm"=>{"id"=>123456, "email"=>"jon@doe.ca", "closed_at"=>nil, "created_at"=>"2015-10-06T12:19:34-04:00", "updated_at"=>"2015-10-06T12:19:34-04:00", "number"=>234, "note"=>nil, "token"=>nil, "gateway"=>nil, "test"=>true, "total_price"=>"234.94", "subtotal_price"=>"224.94", "total_weight"=>0, "total_tax"=>"0.00", "taxes_included"=>false, "currency"=>"USD", "financial_status"=>"voided", "confirmed"=>false, "total_discounts"=>"5.00", "total_line_items_price"=>"229.94", "cart_token"=>nil, "buyer_accepts_marketing"=>true, "name"=>"#9999", "referring_site"=>nil, "landing_site"=>nil, "cancelled_at"=>"2015-10-06T12:19:34-04:00", "cancel_reason"=>"customer", "total_price_usd"=>nil, "checkout_token"=>nil, "reference"=>nil, "user_id"=>nil, "location_id"=>nil, "source_identifier"=>nil, "source_url"=>nil, "processed_at"=>nil, "device_id"=>nil, "browser_ip"=>nil, "landing_site_ref"=>nil, "order_number"=>1234, "discount_codes"=>nil, "note_attributes"=>nil, "payment_gateway_names"=>["bogus"], "processing_method"=>"", "source"=>"browser", "checkout_id"=>nil, "source_name"=>"web", "fulfillment_status"=>"pending", "tax_lines"=>nil, "tags"=>"", "line_items"=>[{"id"=>56789, "variant_id"=>nil, "title"=>"Sledgehammer", "quantity"=>1, "price"=>"199.99", "grams"=>5000, "sku"=>"SKU2006-001", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Sledgehammer", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"0.00", "fulfillment_status"=>nil, "tax_lines"=>nil}, {"id"=>98765, "variant_id"=>nil, "title"=>"Wire Cutter", "quantity"=>1, "price"=>"29.95", "grams"=>500, "sku"=>"SKU2006-020", "variant_title"=>nil, "vendor"=>nil, "fulfillment_service"=>"manual", "product_id"=>327475578523353102, "requires_shipping"=>true, "taxable"=>true, "gift_card"=>false, "name"=>"Wire Cutter", "variant_inventory_management"=>nil, "properties"=>nil, "product_exists"=>true, "fulfillable_quantity"=>1, "total_discount"=>"5.00", "fulfillment_status"=>nil, "tax_lines"=>nil}], "shipping_lines"=>[{"title"=>"Generic Shipping", "price"=>"10.00", "code"=>nil, "source"=>"shopify", "tax_lines"=>nil}], "billing_address"=>{"first_name"=>"Bob", "address1"=>"123 Billing Street", "phone"=>"555-555-BILL", "city"=>"Billtown", "zip"=>"K2P0B0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Biller", "address2"=>nil, "company"=>"My Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Bob Biller", "country_code"=>"US", "province_code"=>"KY"}, "shipping_address"=>{"first_name"=>"Steve", "address1"=>"123 Shipping Street", "phone"=>"555-555-SHIP", "city"=>"Shippington", "zip"=>"K2P0S0", "province"=>"Kentucky", "country"=>"United States", "last_name"=>"Shipper", "address2"=>nil, "company"=>"Shipping Company", "latitude"=>nil, "longitude"=>nil, "name"=>"Steve Shipper", "country_code"=>"US", "province_code"=>"KY"}, "fulfillments"=>nil, "refunds"=>nil, "customer"=>{"id"=>nil, "email"=>"john@test.com", "accepts_marketing"=>false, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"John", "last_name"=>"Smith", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>nil, "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "default_address"=>{"id"=>nil, "first_name"=>nil, "last_name"=>nil, "company"=>nil, "address1"=>"123 Elm St.", "address2"=>nil, "city"=>"Ottawa", "province"=>"Ontario", "country"=>"Canada", "zip"=>"K2H7A8", "phone"=>"123-123-1234", "name"=>"", "province_code"=>"ON", "country_code"=>"CA", "country_name"=>"Canada", "default"=>true}}}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 4]]
  Rendered text template (0.1ms)
Completed 200 OK in 3684ms (Views: 1.0ms | ActiveRecord: 0.4ms)


Started POST "/sms/order-fulfillment" for 23.227.37.125 at 2015-10-06 23:20:24 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-fulfillment" for 23.227.37.112 at 2015-10-06 23:20:26 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/customer-creation" for 23.227.37.117 at 2015-10-06 23:21:13 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
Completed 500 Internal Server Error in 4ms (ActiveRecord: 0.2ms)

NoMethodError (undefined method `[]' for nil:NilClass):
  app/controllers/sms_controller.rb:43:in `customer_creation'




Started POST "/sms/order-fulfillment" for 23.227.37.110 at 2015-10-06 23:21:29 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/order-fulfillment" for 23.227.37.123 at 2015-10-06 23:23:29 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started POST "/sms/customer-creation" for 23.227.37.96 at 2015-10-06 23:26:14 +0700
Value for params[:addresses] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Processing by SmsController#customer_creation as */*
  Parameters: {"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil, "sm"=>{"id"=>nil, "email"=>"bob@biller.com", "accepts_marketing"=>true, "created_at"=>nil, "updated_at"=>nil, "first_name"=>"Bob", "last_name"=>"Biller", "orders_count"=>0, "state"=>"disabled", "total_spent"=>"0.00", "last_order_id"=>nil, "note"=>"This customer loves ice cream", "verified_email"=>true, "multipass_identifier"=>nil, "tax_exempt"=>false, "tags"=>"", "last_order_name"=>nil, "addresses"=>nil}}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered text template (0.0ms)
Completed 200 OK in 31ms (Views: 0.8ms | ActiveRecord: 1.9ms)


Started POST "/sms/order-fulfillment" for 23.227.37.115 at 2015-10-06 23:28:32 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'




Started GET "/" for 42.118.134.227 at 2015-10-06 23:32:58 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 4]]
  Rendered home/index.haml within layouts/embedded_app (32.9ms)
Completed 200 OK in 157ms (Views: 155.0ms | ActiveRecord: 0.3ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 23:33:06 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 4]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 4]]
  Rendered home/preferences.haml within layouts/embedded_app (6.4ms)
Completed 200 OK in 70ms (Views: 67.9ms | ActiveRecord: 0.5ms)


Started POST "/app/uninstalled" for 23.227.37.125 at 2015-10-06 23:34:07 +0700
Processing by ShopifyController#uninstalled as */*
  Parameters: {"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false, "shopify"=>{"id"=>10079246, "name"=>"letranloc", "email"=>"letranloc180@gmail.com", "domain"=>"letranloc-2.myshopify.com", "created_at"=>"2015-09-28T23:51:37-04:00", "province"=>nil, "country"=>"VN", "address1"=>"Nguyen Van Cu", "zip"=>"70000", "city"=>"Ho Chi Minh", "source"=>"letranloc", "phone"=>"+841234905207", "updated_at"=>"2015-10-05T02:40:06-04:00", "customer_email"=>nil, "latitude"=>10.7594044, "longitude"=>106.6839945, "primary_location_id"=>2181892, "primary_locale"=>"en", "country_code"=>"VN", "country_name"=>"Vietnam", "currency"=>"VND", "timezone"=>"(GMT-05:00) Eastern Time (US & Canada)", "iana_timezone"=>"America/New_York", "shop_owner"=>"Loc Le Tran", "money_format"=>"{{amount_no_decimals_with_comma_separator}}&#8363;", "money_with_currency_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "province_code"=>nil, "taxes_included"=>false, "tax_shipping"=>nil, "county_taxes"=>true, "plan_display_name"=>"affiliate", "plan_name"=>"affiliate", "myshopify_domain"=>"letranloc-2.myshopify.com", "google_apps_domain"=>nil, "google_apps_login_enabled"=>nil, "money_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}}₫", "money_with_currency_in_emails_format"=>"{{amount_no_decimals_with_comma_separator}} VND", "eligible_for_payments"=>false, "requires_extra_payments_agreement"=>false, "password_enabled"=>"[FILTERED]", "has_storefront"=>true, "setup_required"=>false}}
  [1m[35mShop Load (0.4ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.2ms)[0m  begin transaction
  [1m[36mSQL (0.7ms)[0m  [1mDELETE FROM "shops" WHERE "shops"."id" = ?[0m  [["id", 4]]
  [1m[35m (1.6ms)[0m  commit transaction
Completed 200 OK in 86ms (ActiveRecord: 4.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 23:34:51 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.3ms)
Completed 200 OK in 2ms (Views: 1.0ms | ActiveRecord: 0.0ms)


Started GET "/login?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 23:34:52 +0700
Processing by SessionsController#new as HTML
  Parameters: {"shop"=>"letranloc-2.myshopify.com"}
  Rendered inline template (0.4ms)
Completed 200 OK in 2ms (Views: 0.8ms | ActiveRecord: 0.0ms)


Started GET "/auth/shopify?shop=letranloc-2.myshopify.com" for 42.118.134.227 at 2015-10-06 23:34:53 +0700


Started GET "/auth/shopify/callback?code=c7f5a71d6d4358bdf84c2dbae56b983a&hmac=b5b299e4787d3a6dd7555f90b2d2e0b31752bb05c100a7933979312709f58054&shop=letranloc-2.myshopify.com&signature=386e0c0b5d45dba9c57ac94bce18398a&state=962144670135e982a5f17198c3bd3ce268da7ecf9100cbb5&timestamp=1444149299" for 42.118.134.227 at 2015-10-06 23:34:59 +0700
Processing by SessionsController#callback as HTML
  Parameters: {"code"=>"c7f5a71d6d4358bdf84c2dbae56b983a", "hmac"=>"b5b299e4787d3a6dd7555f90b2d2e0b31752bb05c100a7933979312709f58054", "shop"=>"letranloc-2.myshopify.com", "signature"=>"386e0c0b5d45dba9c57ac94bce18398a", "state"=>"962144670135e982a5f17198c3bd3ce268da7ecf9100cbb5", "timestamp"=>"1444149299"}
  [1m[36mShop Load (0.3ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mShop Exists (0.2ms)[0m  [1mSELECT  1 AS one FROM "shops" WHERE "shops"."shopify_domain" = 'letranloc-2.myshopify.com' LIMIT 1[0m
  [1m[35mSQL (0.5ms)[0m  INSERT INTO "shops" ("shopify_domain", "shopify_token", "created_at", "updated_at") VALUES (?, ?, ?, ?)  [["shopify_domain", "letranloc-2.myshopify.com"], ["shopify_token", "e3e7d02d0ec5119ce844d48e559e71a7"], ["created_at", "2015-10-06 16:35:01.509887"], ["updated_at", "2015-10-06 16:35:01.509887"]]
  [1m[36m (73.0ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/
Completed 302 Found in 95ms (ActiveRecord: 74.9ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 23:35:02 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.3ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 5]]
Redirected to https://kandy-shopify.ngrok.io/install
Filter chain halted as :is_initialized rendered or redirected
Completed 302 Found in 27ms (ActiveRecord: 0.8ms)


Started GET "/install" for 42.118.134.227 at 2015-10-06 23:35:02 +0700
Processing by HomeController#install as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 5]]
  [1m[35m (0.1ms)[0m  begin transaction
  [1m[36mSQL (0.4ms)[0m  [1mINSERT INTO "templates" ("shop_id", "created_at", "updated_at") VALUES (?, ?, ?)[0m  [["shop_id", 5], ["created_at", "2015-10-06 16:35:02.810461"], ["updated_at", "2015-10-06 16:35:02.810461"]]
  [1m[35m (2.9ms)[0m  commit transaction
  [1m[36m (0.1ms)[0m  [1mbegin transaction[0m
  [1m[35mShop Exists (0.3ms)[0m  SELECT  1 AS one FROM "shops" WHERE ("shops"."shopify_domain" = 'letranloc-2.myshopify.com' AND "shops"."id" != 5) LIMIT 1
  [1m[36m (0.1ms)[0m  [1mcommit transaction[0m
Redirected to https://kandy-shopify.ngrok.io/preferences
Completed 302 Found in 7715ms (ActiveRecord: 4.5ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 23:35:11 +0700
Processing by HomeController#preferences as HTML
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.1ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 5]]
  [1m[36mCACHE (0.0ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mCACHE (0.0ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (6.0ms)
Completed 200 OK in 53ms (Views: 49.3ms | ActiveRecord: 0.5ms)


Started GET "/preferences?hmac=f5358e0d15b77bf278f8260c7af5df86feeff25735cef588d5c86b7e32d21395&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=2cc7b065822e6a73a97edab23ac20c49&timestamp=1444149312" for 42.118.134.227 at 2015-10-06 23:35:13 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"f5358e0d15b77bf278f8260c7af5df86feeff25735cef588d5c86b7e32d21395", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"2cc7b065822e6a73a97edab23ac20c49", "timestamp"=>"1444149312"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (6.3ms)
Completed 200 OK in 71ms (Views: 68.2ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=a4391f8613bdcf3dffbb848ab6fa2bc1087a72a51f0dc0a51ec8a7cbd0fe6cbc&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=7febd6ef408779d9722d75723ef277a5&timestamp=1444149323" for 42.118.134.227 at 2015-10-06 23:35:24 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"a4391f8613bdcf3dffbb848ab6fa2bc1087a72a51f0dc0a51ec8a7cbd0fe6cbc", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"7febd6ef408779d9722d75723ef277a5", "timestamp"=>"1444149323"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 49ms (Views: 47.5ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 23:35:28 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.1ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.1ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (5.2ms)
Completed 200 OK in 47ms (Views: 45.5ms | ActiveRecord: 0.4ms)


Started GET "/?hmac=4db2038cc8c694cd3ffa5c0ded1fb871a2f2fbb414d4796fa62f1630f6c3d951&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=ea3b7410e58b5a97b58ec5079408476f&timestamp=1444149344" for 42.118.134.227 at 2015-10-06 23:35:46 +0700
Processing by HomeController#index as HTML
  Parameters: {"hmac"=>"4db2038cc8c694cd3ffa5c0ded1fb871a2f2fbb414d4796fa62f1630f6c3d951", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"ea3b7410e58b5a97b58ec5079408476f", "timestamp"=>"1444149344"}
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 71ms (Views: 69.1ms | ActiveRecord: 0.2ms)


Started GET "/preferences" for 42.118.134.227 at 2015-10-06 23:38:05 +0700
Processing by HomeController#preferences as HTML
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (31.9ms)
Completed 200 OK in 87ms (Views: 82.6ms | ActiveRecord: 0.7ms)


Started GET "/preferences?hmac=e140e131078bc487885bdd4cede246953624b287a3975a18ed001b0203e80f87&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=f3260d60ffdf1ad4411e94441d565d71&timestamp=1444149575" for 42.118.134.227 at 2015-10-06 23:39:37 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"e140e131078bc487885bdd4cede246953624b287a3975a18ed001b0203e80f87", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"f3260d60ffdf1ad4411e94441d565d71", "timestamp"=>"1444149575"}
  [1m[35mShop Load (0.3ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1[0m  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[35mTemplate Load (0.2ms)[0m  SELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (55.9ms)
Completed 200 OK in 134ms (Views: 130.6ms | ActiveRecord: 0.6ms)


Started GET "/preferences?hmac=1eecdbca99ae2820ac41b48cfc531179e2b5f4e8788c21e85d4ab78bf5f598b0&protocol=https%3A%2F%2F&shop=letranloc-2.myshopify.com&signature=a95982a66a527d4ab708e1e5fb84cfab&timestamp=1444149607" for 42.118.134.227 at 2015-10-06 23:40:09 +0700
Processing by HomeController#preferences as HTML
  Parameters: {"hmac"=>"1eecdbca99ae2820ac41b48cfc531179e2b5f4e8788c21e85d4ab78bf5f598b0", "protocol"=>"https://", "shop"=>"letranloc-2.myshopify.com", "signature"=>"a95982a66a527d4ab708e1e5fb84cfab", "timestamp"=>"1444149607"}
  [1m[36mShop Load (0.2ms)[0m  [1mSELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1[0m  [["id", 5]]
  [1m[35mShop Load (0.2ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."shopify_domain" = ? LIMIT 1  [["shopify_domain", "letranloc-2.myshopify.com"]]
  [1m[36mTemplate Load (0.2ms)[0m  [1mSELECT  "templates".* FROM "templates" WHERE "templates"."shop_id" = ? LIMIT 1[0m  [["shop_id", 5]]
  Rendered home/preferences.haml within layouts/embedded_app (29.5ms)
Completed 200 OK in 88ms (Views: 85.5ms | ActiveRecord: 0.5ms)


Started GET "/" for 42.118.134.227 at 2015-10-06 23:40:19 +0700
Processing by HomeController#index as HTML
  [1m[35mShop Load (0.1ms)[0m  SELECT  "shops".* FROM "shops" WHERE "shops"."id" = ? LIMIT 1  [["id", 5]]
  Rendered home/index.haml within layouts/embedded_app (0.1ms)
Completed 200 OK in 48ms (Views: 46.3ms | ActiveRecord: 0.1ms)


Started POST "/sms/order-fulfillment" for 23.227.37.112 at 2015-10-06 23:50:37 +0700
Value for params[:discount_codes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:note_attributes] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:properties] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:line_items][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:shipping_lines][:tax_lines] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:fulfillments] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.
Value for params[:refunds] was set to nil, because it was one of [], [null] or [null, null, ...]. Go to http://guides.rubyonrails.org/security.html#unsafe-query-generation for more information.

AbstractController::ActionNotFound (The action 'order_fulfillment' could not be found for SmsController):
  actionpack (4.2.2) lib/abstract_controller/base.rb:132:in `process'
  actionview (4.2.2) lib/action_view/rendering.rb:30:in `process'
  actionpack (4.2.2) lib/action_controller/metal.rb:196:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal/rack_delegation.rb:13:in `dispatch'
  actionpack (4.2.2) lib/action_controller/metal.rb:237:in `block in action'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `call'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:74:in `dispatch'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:43:in `serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:43:in `block in serve'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `each'
  actionpack (4.2.2) lib/action_dispatch/journey/router.rb:30:in `serve'
  actionpack (4.2.2) lib/action_dispatch/routing/route_set.rb:819:in `call'
  omniauth (1.2.2) lib/omniauth/strategy.rb:186:in `call!'
  omniauth (1.2.2) lib/omniauth/strategy.rb:164:in `call'
  omniauth (1.2.2) lib/omniauth/builder.rb:59:in `call'
  rack (1.6.2) lib/rack/etag.rb:24:in `call'
  rack (1.6.2) lib/rack/conditionalget.rb:38:in `call'
  rack (1.6.2) lib/rack/head.rb:13:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/params_parser.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/flash.rb:260:in `call'
  rack (1.6.2) lib/rack/session/abstract/id.rb:225:in `context'
  rack (1.6.2) lib/rack/session/abstract/id.rb:220:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/cookies.rb:560:in `call'
  activerecord (4.2.2) lib/active_record/query_cache.rb:36:in `call'
  activerecord (4.2.2) lib/active_record/connection_adapters/abstract/connection_pool.rb:649:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:29:in `block in call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `call'
  activesupport (4.2.2) lib/active_support/callbacks.rb:88:in `_run_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:776:in `_run_call_callbacks'
  activesupport (4.2.2) lib/active_support/callbacks.rb:81:in `run_callbacks'
  actionpack (4.2.2) lib/action_dispatch/middleware/callbacks.rb:27:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/reloader.rb:73:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/remote_ip.rb:78:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/debug_exceptions.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/show_exceptions.rb:30:in `call'
  railties (4.2.2) lib/rails/rack/logger.rb:38:in `call_app'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `block in call'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `block in tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:26:in `tagged'
  activesupport (4.2.2) lib/active_support/tagged_logging.rb:68:in `tagged'
  railties (4.2.2) lib/rails/rack/logger.rb:20:in `call'
  quiet_assets (1.1.0) lib/quiet_assets.rb:27:in `call_with_quiet_assets'
  actionpack (4.2.2) lib/action_dispatch/middleware/request_id.rb:21:in `call'
  rack (1.6.2) lib/rack/methodoverride.rb:22:in `call'
  rack (1.6.2) lib/rack/runtime.rb:18:in `call'
  activesupport (4.2.2) lib/active_support/cache/strategy/local_cache_middleware.rb:28:in `call'
  rack (1.6.2) lib/rack/lock.rb:17:in `call'
  actionpack (4.2.2) lib/action_dispatch/middleware/static.rb:113:in `call'
  rack (1.6.2) lib/rack/sendfile.rb:113:in `call'
  railties (4.2.2) lib/rails/engine.rb:518:in `call'
  railties (4.2.2) lib/rails/application.rb:164:in `call'
  rack (1.6.2) lib/rack/content_length.rb:15:in `call'
  thin (1.6.3) lib/thin/connection.rb:86:in `block in pre_process'
  thin (1.6.3) lib/thin/connection.rb:84:in `catch'
  thin (1.6.3) lib/thin/connection.rb:84:in `pre_process'
  thin (1.6.3) lib/thin/connection.rb:53:in `process'
  thin (1.6.3) lib/thin/connection.rb:39:in `receive_data'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run_machine'
  eventmachine (1.0.7) lib/eventmachine.rb:187:in `run'
  thin (1.6.3) lib/thin/backends/base.rb:73:in `start'
  thin (1.6.3) lib/thin/server.rb:162:in `start'
  rack (1.6.2) lib/rack/handler/thin.rb:19:in `run'
  rack (1.6.2) lib/rack/server.rb:286:in `start'
  railties (4.2.2) lib/rails/commands/server.rb:80:in `start'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:80:in `block in server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `tap'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:75:in `server'
  railties (4.2.2) lib/rails/commands/commands_tasks.rb:39:in `run_command!'
  railties (4.2.2) lib/rails/commands.rb:17:in `<top (required)>'
  bin/rails:4:in `require'
  bin/rails:4:in `<main>'


